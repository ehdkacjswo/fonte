Assignments within conditions are sometimes incorrectly removed