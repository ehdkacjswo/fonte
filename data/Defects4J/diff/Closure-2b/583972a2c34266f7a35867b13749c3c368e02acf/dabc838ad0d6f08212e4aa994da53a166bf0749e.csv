is_addition,old_file_path,new_file_path,line_num,content
True,src/com/google/javascript/rhino/jstype/JSType.java,src/com/google/javascript/rhino/jstype/JSType.java,658,* Gets the least supertype of this that's not a union.
True,src/com/google/javascript/rhino/jstype/JSType.java,src/com/google/javascript/rhino/jstype/JSType.java,660,public JSType collapseUnion() {
True,src/com/google/javascript/rhino/jstype/JSType.java,src/com/google/javascript/rhino/jstype/JSType.java,661,return this;
True,src/com/google/javascript/rhino/jstype/JSTypeRegistry.java,src/com/google/javascript/rhino/jstype/JSTypeRegistry.java,53,import com.google.common.collect.Lists;
True,src/com/google/javascript/rhino/jstype/JSTypeRegistry.java,src/com/google/javascript/rhino/jstype/JSTypeRegistry.java,738,* Finds the common supertype of the two given object types.
True,src/com/google/javascript/rhino/jstype/JSTypeRegistry.java,src/com/google/javascript/rhino/jstype/JSTypeRegistry.java,740,"ObjectType findCommonSuperObject(ObjectType a, ObjectType b) {"
True,src/com/google/javascript/rhino/jstype/JSTypeRegistry.java,src/com/google/javascript/rhino/jstype/JSTypeRegistry.java,741,List<ObjectType> stackA = getSuperStack(a);
True,src/com/google/javascript/rhino/jstype/JSTypeRegistry.java,src/com/google/javascript/rhino/jstype/JSTypeRegistry.java,742,List<ObjectType> stackB = getSuperStack(b);
True,src/com/google/javascript/rhino/jstype/JSTypeRegistry.java,src/com/google/javascript/rhino/jstype/JSTypeRegistry.java,744,ObjectType result = getNativeObjectType(JSTypeNative.OBJECT_TYPE);
True,src/com/google/javascript/rhino/jstype/JSTypeRegistry.java,src/com/google/javascript/rhino/jstype/JSTypeRegistry.java,745,while (!stackA.isEmpty() && !stackB.isEmpty()) {
True,src/com/google/javascript/rhino/jstype/JSTypeRegistry.java,src/com/google/javascript/rhino/jstype/JSTypeRegistry.java,746,ObjectType currentA = stackA.remove(stackA.size() - 1);
True,src/com/google/javascript/rhino/jstype/JSTypeRegistry.java,src/com/google/javascript/rhino/jstype/JSTypeRegistry.java,747,ObjectType currentB = stackB.remove(stackB.size() - 1);
True,src/com/google/javascript/rhino/jstype/JSTypeRegistry.java,src/com/google/javascript/rhino/jstype/JSTypeRegistry.java,748,if (currentA.isEquivalentTo(currentB)) {
True,src/com/google/javascript/rhino/jstype/JSTypeRegistry.java,src/com/google/javascript/rhino/jstype/JSTypeRegistry.java,749,result = currentA;
True,src/com/google/javascript/rhino/jstype/JSTypeRegistry.java,src/com/google/javascript/rhino/jstype/JSTypeRegistry.java,750,} else {
True,src/com/google/javascript/rhino/jstype/JSTypeRegistry.java,src/com/google/javascript/rhino/jstype/JSTypeRegistry.java,751,return result;
True,src/com/google/javascript/rhino/jstype/JSTypeRegistry.java,src/com/google/javascript/rhino/jstype/JSTypeRegistry.java,754,return result;
True,src/com/google/javascript/rhino/jstype/JSTypeRegistry.java,src/com/google/javascript/rhino/jstype/JSTypeRegistry.java,757,private static List<ObjectType> getSuperStack(ObjectType a) {
True,src/com/google/javascript/rhino/jstype/JSTypeRegistry.java,src/com/google/javascript/rhino/jstype/JSTypeRegistry.java,758,List<ObjectType> stack = Lists.newArrayListWithExpectedSize(5);
True,src/com/google/javascript/rhino/jstype/JSTypeRegistry.java,src/com/google/javascript/rhino/jstype/JSTypeRegistry.java,759,for (ObjectType current = a;
True,src/com/google/javascript/rhino/jstype/JSTypeRegistry.java,src/com/google/javascript/rhino/jstype/JSTypeRegistry.java,760,current != null;
True,src/com/google/javascript/rhino/jstype/JSTypeRegistry.java,src/com/google/javascript/rhino/jstype/JSTypeRegistry.java,761,current = current.getImplicitPrototype()) {
True,src/com/google/javascript/rhino/jstype/JSTypeRegistry.java,src/com/google/javascript/rhino/jstype/JSTypeRegistry.java,762,stack.add(current);
True,src/com/google/javascript/rhino/jstype/JSTypeRegistry.java,src/com/google/javascript/rhino/jstype/JSTypeRegistry.java,764,return stack;
True,src/com/google/javascript/rhino/jstype/ProxyObjectType.java,src/com/google/javascript/rhino/jstype/ProxyObjectType.java,415,@Override
True,src/com/google/javascript/rhino/jstype/ProxyObjectType.java,src/com/google/javascript/rhino/jstype/ProxyObjectType.java,416,public JSType collapseUnion() {
True,src/com/google/javascript/rhino/jstype/ProxyObjectType.java,src/com/google/javascript/rhino/jstype/ProxyObjectType.java,417,if (referencedType.isUnionType()) {
True,src/com/google/javascript/rhino/jstype/ProxyObjectType.java,src/com/google/javascript/rhino/jstype/ProxyObjectType.java,418,return referencedType.collapseUnion();
True,src/com/google/javascript/rhino/jstype/ProxyObjectType.java,src/com/google/javascript/rhino/jstype/ProxyObjectType.java,420,return this;
True,src/com/google/javascript/rhino/jstype/UnionType.java,src/com/google/javascript/rhino/jstype/UnionType.java,559,@Override
True,src/com/google/javascript/rhino/jstype/UnionType.java,src/com/google/javascript/rhino/jstype/UnionType.java,560,public JSType collapseUnion() {
True,src/com/google/javascript/rhino/jstype/UnionType.java,src/com/google/javascript/rhino/jstype/UnionType.java,561,JSType currentValue = null;
True,src/com/google/javascript/rhino/jstype/UnionType.java,src/com/google/javascript/rhino/jstype/UnionType.java,562,ObjectType currentCommonSuper = null;
True,src/com/google/javascript/rhino/jstype/UnionType.java,src/com/google/javascript/rhino/jstype/UnionType.java,563,for (JSType a : alternates) {
True,src/com/google/javascript/rhino/jstype/UnionType.java,src/com/google/javascript/rhino/jstype/UnionType.java,564,if (a.isUnknownType()) {
True,src/com/google/javascript/rhino/jstype/UnionType.java,src/com/google/javascript/rhino/jstype/UnionType.java,565,return getNativeType(JSTypeNative.UNKNOWN_TYPE);
True,src/com/google/javascript/rhino/jstype/UnionType.java,src/com/google/javascript/rhino/jstype/UnionType.java,568,ObjectType obj = a.toObjectType();
True,src/com/google/javascript/rhino/jstype/UnionType.java,src/com/google/javascript/rhino/jstype/UnionType.java,569,if (obj == null) {
True,src/com/google/javascript/rhino/jstype/UnionType.java,src/com/google/javascript/rhino/jstype/UnionType.java,570,if (currentValue == null && currentCommonSuper == null) {
True,src/com/google/javascript/rhino/jstype/UnionType.java,src/com/google/javascript/rhino/jstype/UnionType.java,571,"// If obj is not an object, then it must be a value."
True,src/com/google/javascript/rhino/jstype/UnionType.java,src/com/google/javascript/rhino/jstype/UnionType.java,572,currentValue = a;
True,src/com/google/javascript/rhino/jstype/UnionType.java,src/com/google/javascript/rhino/jstype/UnionType.java,573,} else {
True,src/com/google/javascript/rhino/jstype/UnionType.java,src/com/google/javascript/rhino/jstype/UnionType.java,574,// Multiple values and objects will always collapse to the ALL_TYPE.
True,src/com/google/javascript/rhino/jstype/UnionType.java,src/com/google/javascript/rhino/jstype/UnionType.java,575,return getNativeType(JSTypeNative.ALL_TYPE);
True,src/com/google/javascript/rhino/jstype/UnionType.java,src/com/google/javascript/rhino/jstype/UnionType.java,577,} else if (currentValue != null) {
True,src/com/google/javascript/rhino/jstype/UnionType.java,src/com/google/javascript/rhino/jstype/UnionType.java,578,// Values and objects will always collapse to the ALL_TYPE.
True,src/com/google/javascript/rhino/jstype/UnionType.java,src/com/google/javascript/rhino/jstype/UnionType.java,579,return getNativeType(JSTypeNative.ALL_TYPE);
True,src/com/google/javascript/rhino/jstype/UnionType.java,src/com/google/javascript/rhino/jstype/UnionType.java,580,} else if (currentCommonSuper == null) {
True,src/com/google/javascript/rhino/jstype/UnionType.java,src/com/google/javascript/rhino/jstype/UnionType.java,581,currentCommonSuper = obj;
True,src/com/google/javascript/rhino/jstype/UnionType.java,src/com/google/javascript/rhino/jstype/UnionType.java,582,} else {
True,src/com/google/javascript/rhino/jstype/UnionType.java,src/com/google/javascript/rhino/jstype/UnionType.java,583,currentCommonSuper =
True,src/com/google/javascript/rhino/jstype/UnionType.java,src/com/google/javascript/rhino/jstype/UnionType.java,584,"registry.findCommonSuperObject(currentCommonSuper, obj);"
True,src/com/google/javascript/rhino/jstype/UnionType.java,src/com/google/javascript/rhino/jstype/UnionType.java,587,return currentCommonSuper;
True,test/com/google/javascript/rhino/jstype/UnionTypeTest.java,test/com/google/javascript/rhino/jstype/UnionTypeTest.java,357,public void testCollapseUnion1() {
True,test/com/google/javascript/rhino/jstype/UnionTypeTest.java,test/com/google/javascript/rhino/jstype/UnionTypeTest.java,358,assertEquals(
True,test/com/google/javascript/rhino/jstype/UnionTypeTest.java,test/com/google/javascript/rhino/jstype/UnionTypeTest.java,360,"registry.createUnionType(NUMBER_TYPE, STRING_TYPE)"
True,test/com/google/javascript/rhino/jstype/UnionTypeTest.java,test/com/google/javascript/rhino/jstype/UnionTypeTest.java,361,.collapseUnion().toString());
True,test/com/google/javascript/rhino/jstype/UnionTypeTest.java,test/com/google/javascript/rhino/jstype/UnionTypeTest.java,364,public void testCollapseUnion2() {
True,test/com/google/javascript/rhino/jstype/UnionTypeTest.java,test/com/google/javascript/rhino/jstype/UnionTypeTest.java,365,assertEquals(
True,test/com/google/javascript/rhino/jstype/UnionTypeTest.java,test/com/google/javascript/rhino/jstype/UnionTypeTest.java,367,"registry.createUnionType(UNKNOWN_TYPE, NUMBER_TYPE)"
True,test/com/google/javascript/rhino/jstype/UnionTypeTest.java,test/com/google/javascript/rhino/jstype/UnionTypeTest.java,368,.collapseUnion().toString());
True,test/com/google/javascript/rhino/jstype/UnionTypeTest.java,test/com/google/javascript/rhino/jstype/UnionTypeTest.java,369,assertEquals(
True,test/com/google/javascript/rhino/jstype/UnionTypeTest.java,test/com/google/javascript/rhino/jstype/UnionTypeTest.java,371,"registry.createUnionType(NUMBER_TYPE, UNKNOWN_TYPE)"
True,test/com/google/javascript/rhino/jstype/UnionTypeTest.java,test/com/google/javascript/rhino/jstype/UnionTypeTest.java,372,.collapseUnion().toString());
True,test/com/google/javascript/rhino/jstype/UnionTypeTest.java,test/com/google/javascript/rhino/jstype/UnionTypeTest.java,375,public void testCollapseUnion3() {
True,test/com/google/javascript/rhino/jstype/UnionTypeTest.java,test/com/google/javascript/rhino/jstype/UnionTypeTest.java,376,assertEquals(
True,test/com/google/javascript/rhino/jstype/UnionTypeTest.java,test/com/google/javascript/rhino/jstype/UnionTypeTest.java,377,"""Object"","
True,test/com/google/javascript/rhino/jstype/UnionTypeTest.java,test/com/google/javascript/rhino/jstype/UnionTypeTest.java,378,"registry.createUnionType(ARRAY_TYPE, DATE_TYPE)"
True,test/com/google/javascript/rhino/jstype/UnionTypeTest.java,test/com/google/javascript/rhino/jstype/UnionTypeTest.java,379,.collapseUnion().toString());
True,test/com/google/javascript/rhino/jstype/UnionTypeTest.java,test/com/google/javascript/rhino/jstype/UnionTypeTest.java,380,assertEquals(
True,test/com/google/javascript/rhino/jstype/UnionTypeTest.java,test/com/google/javascript/rhino/jstype/UnionTypeTest.java,381,"""Object"","
True,test/com/google/javascript/rhino/jstype/UnionTypeTest.java,test/com/google/javascript/rhino/jstype/UnionTypeTest.java,382,"registry.createUnionType(ARRAY_TYPE, OBJECT_TYPE)"
True,test/com/google/javascript/rhino/jstype/UnionTypeTest.java,test/com/google/javascript/rhino/jstype/UnionTypeTest.java,383,.collapseUnion().toString());
True,test/com/google/javascript/rhino/jstype/UnionTypeTest.java,test/com/google/javascript/rhino/jstype/UnionTypeTest.java,384,assertEquals(
True,test/com/google/javascript/rhino/jstype/UnionTypeTest.java,test/com/google/javascript/rhino/jstype/UnionTypeTest.java,385,"""Error"","
True,test/com/google/javascript/rhino/jstype/UnionTypeTest.java,test/com/google/javascript/rhino/jstype/UnionTypeTest.java,386,"registry.createUnionType(ERROR_TYPE, RANGE_ERROR_TYPE)"
True,test/com/google/javascript/rhino/jstype/UnionTypeTest.java,test/com/google/javascript/rhino/jstype/UnionTypeTest.java,387,.collapseUnion().toString());
True,test/com/google/javascript/rhino/jstype/UnionTypeTest.java,test/com/google/javascript/rhino/jstype/UnionTypeTest.java,388,assertEquals(
True,test/com/google/javascript/rhino/jstype/UnionTypeTest.java,test/com/google/javascript/rhino/jstype/UnionTypeTest.java,389,"""Error"","
True,test/com/google/javascript/rhino/jstype/UnionTypeTest.java,test/com/google/javascript/rhino/jstype/UnionTypeTest.java,390,"registry.createUnionType(EVAL_ERROR_TYPE, RANGE_ERROR_TYPE)"
True,test/com/google/javascript/rhino/jstype/UnionTypeTest.java,test/com/google/javascript/rhino/jstype/UnionTypeTest.java,391,.collapseUnion().toString());
True,test/com/google/javascript/rhino/jstype/UnionTypeTest.java,test/com/google/javascript/rhino/jstype/UnionTypeTest.java,392,assertEquals(
True,test/com/google/javascript/rhino/jstype/UnionTypeTest.java,test/com/google/javascript/rhino/jstype/UnionTypeTest.java,393,"""Error"","
True,test/com/google/javascript/rhino/jstype/UnionTypeTest.java,test/com/google/javascript/rhino/jstype/UnionTypeTest.java,394,registry.createUnionType(
True,test/com/google/javascript/rhino/jstype/UnionTypeTest.java,test/com/google/javascript/rhino/jstype/UnionTypeTest.java,395,"EVAL_ERROR_TYPE, RANGE_ERROR_TYPE, TYPE_ERROR_TYPE)"
True,test/com/google/javascript/rhino/jstype/UnionTypeTest.java,test/com/google/javascript/rhino/jstype/UnionTypeTest.java,396,.collapseUnion().toString());
True,test/com/google/javascript/rhino/jstype/UnionTypeTest.java,test/com/google/javascript/rhino/jstype/UnionTypeTest.java,399,public void testCollapseUnion4() {
True,test/com/google/javascript/rhino/jstype/UnionTypeTest.java,test/com/google/javascript/rhino/jstype/UnionTypeTest.java,400,assertEquals(
True,test/com/google/javascript/rhino/jstype/UnionTypeTest.java,test/com/google/javascript/rhino/jstype/UnionTypeTest.java,402,"registry.createUnionType(OBJECT_TYPE, STRING_TYPE)"
True,test/com/google/javascript/rhino/jstype/UnionTypeTest.java,test/com/google/javascript/rhino/jstype/UnionTypeTest.java,403,.collapseUnion().toString());
True,test/com/google/javascript/rhino/jstype/UnionTypeTest.java,test/com/google/javascript/rhino/jstype/UnionTypeTest.java,404,assertEquals(
True,test/com/google/javascript/rhino/jstype/UnionTypeTest.java,test/com/google/javascript/rhino/jstype/UnionTypeTest.java,406,"registry.createUnionType(STRING_TYPE, OBJECT_TYPE)"
True,test/com/google/javascript/rhino/jstype/UnionTypeTest.java,test/com/google/javascript/rhino/jstype/UnionTypeTest.java,407,.collapseUnion().toString());
True,test/com/google/javascript/rhino/jstype/UnionTypeTest.java,test/com/google/javascript/rhino/jstype/UnionTypeTest.java,410,public void testCollapseProxyUnion() {
True,test/com/google/javascript/rhino/jstype/UnionTypeTest.java,test/com/google/javascript/rhino/jstype/UnionTypeTest.java,411,// Make sure we don't unbox the proxy.
True,test/com/google/javascript/rhino/jstype/UnionTypeTest.java,test/com/google/javascript/rhino/jstype/UnionTypeTest.java,412,"ProxyObjectType type = new ProxyObjectType(registry, OBJECT_TYPE);"
True,test/com/google/javascript/rhino/jstype/UnionTypeTest.java,test/com/google/javascript/rhino/jstype/UnionTypeTest.java,413,assertTrue(type == type.collapseUnion());
