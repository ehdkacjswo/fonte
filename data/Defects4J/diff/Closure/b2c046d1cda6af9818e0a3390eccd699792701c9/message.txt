
Clean up the equivalence relation to use less polymorphism magic.
This is a big step towards addressing issue 791, but not quite there yet.

R=johnlenz
DELTA=385  (198 added, 116 deleted, 71 changed)


Revision created by MOE tool push_codebase.
MOE_MIGRATION=5632


git-svn-id: https://closure-compiler.googlecode.com/svn/trunk@2253 b0f006be-c8cd-11de-a2e8-8d36a3108c74
