incorporated code review feedback. Simplified the code, merged Device and Control and removed unnecessary fields.
