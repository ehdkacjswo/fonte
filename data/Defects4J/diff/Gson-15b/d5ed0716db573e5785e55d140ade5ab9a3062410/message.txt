Fix type adapter precedence so that last-registered wins (except for tree type hierarchy adapters, which were always last).
