COMPRESS-385 some tweaks to Tim's code, allow detection of 7z

closes #18
