is_addition,old_file_path,new_file_path,line_num,content
True,src/com/google/javascript/jscomp/CompilerOptions.java,src/com/google/javascript/jscomp/CompilerOptions.java,696,boolean exportLocalPropertyDefinitions;
True,src/com/google/javascript/jscomp/CompilerOptions.java,src/com/google/javascript/jscomp/CompilerOptions.java,1018,exportLocalPropertyDefinitions = false;
True,src/com/google/javascript/jscomp/CompilerOptions.java,src/com/google/javascript/jscomp/CompilerOptions.java,1452,public void setExportLocalPropertyDefinitions(boolean export) {
True,src/com/google/javascript/jscomp/CompilerOptions.java,src/com/google/javascript/jscomp/CompilerOptions.java,1453,this.exportLocalPropertyDefinitions = export;
False,src/com/google/javascript/jscomp/DefaultPassConfig.java,src/com/google/javascript/jscomp/DefaultPassConfig.java,69,"Rename prototypes and inline variables cannot be used together"");"
True,src/com/google/javascript/jscomp/DefaultPassConfig.java,src/com/google/javascript/jscomp/DefaultPassConfig.java,69,"""Rename prototypes and inline variables cannot be used together."");"
True,src/com/google/javascript/jscomp/DefaultPassConfig.java,src/com/google/javascript/jscomp/DefaultPassConfig.java,71,static final DiagnosticType CANNOT_USE_EXPORT_LOCALS_AND_EXTERN_PROP_REMOVAL =
True,src/com/google/javascript/jscomp/DefaultPassConfig.java,src/com/google/javascript/jscomp/DefaultPassConfig.java,72,"DiagnosticType.error(""JSC_CANNOT_USE_EXPORT_LOCALS_AND_EXTERN_PROP_REMOVAL"","
True,src/com/google/javascript/jscomp/DefaultPassConfig.java,src/com/google/javascript/jscomp/DefaultPassConfig.java,73,"""remove_unused_prototype_properties_in_externs "" +"
True,src/com/google/javascript/jscomp/DefaultPassConfig.java,src/com/google/javascript/jscomp/DefaultPassConfig.java,74,"""and export_local_property_definitions cannot be used together."");"
True,src/com/google/javascript/jscomp/DefaultPassConfig.java,src/com/google/javascript/jscomp/DefaultPassConfig.java,904,if (options.removeUnusedPrototypePropertiesInExterns
True,src/com/google/javascript/jscomp/DefaultPassConfig.java,src/com/google/javascript/jscomp/DefaultPassConfig.java,905,&& options.exportLocalPropertyDefinitions) {
True,src/com/google/javascript/jscomp/DefaultPassConfig.java,src/com/google/javascript/jscomp/DefaultPassConfig.java,906,return new ErrorPass(
True,src/com/google/javascript/jscomp/DefaultPassConfig.java,src/com/google/javascript/jscomp/DefaultPassConfig.java,907,"compiler, CANNOT_USE_EXPORT_LOCALS_AND_EXTERN_PROP_REMOVAL);"
True,src/com/google/javascript/jscomp/DefaultPassConfig.java,src/com/google/javascript/jscomp/DefaultPassConfig.java,914,"options.exportLocalPropertyDefinitions,"
True,src/com/google/javascript/jscomp/FindExportableNodes.java,src/com/google/javascript/jscomp/FindExportableNodes.java,20,import com.google.common.collect.Sets;
True,src/com/google/javascript/jscomp/FindExportableNodes.java,src/com/google/javascript/jscomp/FindExportableNodes.java,27,import java.util.Set;
False,src/com/google/javascript/jscomp/FindExportableNodes.java,src/com/google/javascript/jscomp/FindExportableNodes.java,44,ublic class FindExportableNodes extends AbstractPostOrderCallback {
True,src/com/google/javascript/jscomp/FindExportableNodes.java,src/com/google/javascript/jscomp/FindExportableNodes.java,46,class FindExportableNodes extends AbstractPostOrderCallback {
True,src/com/google/javascript/jscomp/FindExportableNodes.java,src/com/google/javascript/jscomp/FindExportableNodes.java,53,static final DiagnosticType EXPORT_ANNOTATION_NOT_ALLOWED =
True,src/com/google/javascript/jscomp/FindExportableNodes.java,src/com/google/javascript/jscomp/FindExportableNodes.java,54,"DiagnosticType.error(""JSC_EXPORT_ANNOTATION_NOT_ALLOWED"","
True,src/com/google/javascript/jscomp/FindExportableNodes.java,src/com/google/javascript/jscomp/FindExportableNodes.java,55,"""@export is not supported on this expression."");"
True,src/com/google/javascript/jscomp/FindExportableNodes.java,src/com/google/javascript/jscomp/FindExportableNodes.java,57,private final AbstractCompiler compiler;
False,src/com/google/javascript/jscomp/FindExportableNodes.java,src/com/google/javascript/jscomp/FindExportableNodes.java,55,"rivate final LinkedHashMap<String, GenerateNodeContext> exports;"
True,src/com/google/javascript/jscomp/FindExportableNodes.java,src/com/google/javascript/jscomp/FindExportableNodes.java,63,"private final LinkedHashMap<String, GenerateNodeContext> exports ="
True,src/com/google/javascript/jscomp/FindExportableNodes.java,src/com/google/javascript/jscomp/FindExportableNodes.java,64,Maps.newLinkedHashMap();
False,src/com/google/javascript/jscomp/FindExportableNodes.java,src/com/google/javascript/jscomp/FindExportableNodes.java,57,rivate final AbstractCompiler compiler;
True,src/com/google/javascript/jscomp/FindExportableNodes.java,src/com/google/javascript/jscomp/FindExportableNodes.java,66,private Set<String> externProps = Sets.newLinkedHashSet();
True,src/com/google/javascript/jscomp/FindExportableNodes.java,src/com/google/javascript/jscomp/FindExportableNodes.java,68,private final boolean allowLocalExports;
False,src/com/google/javascript/jscomp/FindExportableNodes.java,src/com/google/javascript/jscomp/FindExportableNodes.java,59,ublic FindExportableNodes(AbstractCompiler compiler) {
True,src/com/google/javascript/jscomp/FindExportableNodes.java,src/com/google/javascript/jscomp/FindExportableNodes.java,70,FindExportableNodes(
True,src/com/google/javascript/jscomp/FindExportableNodes.java,src/com/google/javascript/jscomp/FindExportableNodes.java,71,"AbstractCompiler compiler, boolean allowLocalExports) {"
False,src/com/google/javascript/jscomp/FindExportableNodes.java,src/com/google/javascript/jscomp/FindExportableNodes.java,61,his.exports = Maps.newLinkedHashMap();
True,src/com/google/javascript/jscomp/FindExportableNodes.java,src/com/google/javascript/jscomp/FindExportableNodes.java,73,this.allowLocalExports = allowLocalExports;
False,src/com/google/javascript/jscomp/FindExportableNodes.java,src/com/google/javascript/jscomp/FindExportableNodes.java,75,"ontext = new GenerateNodeContext(n, parent, n);"
True,src/com/google/javascript/jscomp/FindExportableNodes.java,src/com/google/javascript/jscomp/FindExportableNodes.java,87,"context = new GenerateNodeContext(n, Mode.EXPORT);"
False,src/com/google/javascript/jscomp/FindExportableNodes.java,src/com/google/javascript/jscomp/FindExportableNodes.java,80,f (grandparent != null && grandparent.isScript() &&
False,src/com/google/javascript/jscomp/FindExportableNodes.java,src/com/google/javascript/jscomp/FindExportableNodes.java,81,arent.isExprResult() &&
True,src/com/google/javascript/jscomp/FindExportableNodes.java,src/com/google/javascript/jscomp/FindExportableNodes.java,93,if (parent.isExprResult() &&
False,src/com/google/javascript/jscomp/FindExportableNodes.java,src/com/google/javascript/jscomp/FindExportableNodes.java,83,xport = n.getFirstChild().getQualifiedName();
False,src/com/google/javascript/jscomp/FindExportableNodes.java,src/com/google/javascript/jscomp/FindExportableNodes.java,84,"ontext = new GenerateNodeContext(n, grandparent, parent);"
True,src/com/google/javascript/jscomp/FindExportableNodes.java,src/com/google/javascript/jscomp/FindExportableNodes.java,95,if (grandparent != null && grandparent.isScript() &&
True,src/com/google/javascript/jscomp/FindExportableNodes.java,src/com/google/javascript/jscomp/FindExportableNodes.java,96,n.getFirstChild().isQualifiedName()) {
True,src/com/google/javascript/jscomp/FindExportableNodes.java,src/com/google/javascript/jscomp/FindExportableNodes.java,97,export = n.getFirstChild().getQualifiedName();
True,src/com/google/javascript/jscomp/FindExportableNodes.java,src/com/google/javascript/jscomp/FindExportableNodes.java,98,"context = new GenerateNodeContext(n, Mode.EXPORT);"
True,src/com/google/javascript/jscomp/FindExportableNodes.java,src/com/google/javascript/jscomp/FindExportableNodes.java,99,} else if (allowLocalExports && n.getFirstChild().isGetProp()) {
True,src/com/google/javascript/jscomp/FindExportableNodes.java,src/com/google/javascript/jscomp/FindExportableNodes.java,100,Node target = n.getFirstChild();
True,src/com/google/javascript/jscomp/FindExportableNodes.java,src/com/google/javascript/jscomp/FindExportableNodes.java,101,export = target.getLastChild().getString();
True,src/com/google/javascript/jscomp/FindExportableNodes.java,src/com/google/javascript/jscomp/FindExportableNodes.java,102,"context = new GenerateNodeContext(n, Mode.EXTERN);"
False,src/com/google/javascript/jscomp/FindExportableNodes.java,src/com/google/javascript/jscomp/FindExportableNodes.java,92,"ontext = new GenerateNodeContext(n, parent, n);"
True,src/com/google/javascript/jscomp/FindExportableNodes.java,src/com/google/javascript/jscomp/FindExportableNodes.java,112,"context = new GenerateNodeContext(n, Mode.EXPORT);"
True,src/com/google/javascript/jscomp/FindExportableNodes.java,src/com/google/javascript/jscomp/FindExportableNodes.java,115,break;
True,src/com/google/javascript/jscomp/FindExportableNodes.java,src/com/google/javascript/jscomp/FindExportableNodes.java,117,case Token.GETPROP:
True,src/com/google/javascript/jscomp/FindExportableNodes.java,src/com/google/javascript/jscomp/FindExportableNodes.java,118,if (allowLocalExports && parent.isExprResult()) {
True,src/com/google/javascript/jscomp/FindExportableNodes.java,src/com/google/javascript/jscomp/FindExportableNodes.java,119,export = n.getLastChild().getString();
True,src/com/google/javascript/jscomp/FindExportableNodes.java,src/com/google/javascript/jscomp/FindExportableNodes.java,120,"context = new GenerateNodeContext(n, Mode.EXTERN);"
True,src/com/google/javascript/jscomp/FindExportableNodes.java,src/com/google/javascript/jscomp/FindExportableNodes.java,122,break;
True,src/com/google/javascript/jscomp/FindExportableNodes.java,src/com/google/javascript/jscomp/FindExportableNodes.java,124,case Token.STRING_KEY:
True,src/com/google/javascript/jscomp/FindExportableNodes.java,src/com/google/javascript/jscomp/FindExportableNodes.java,125,if (allowLocalExports) {
True,src/com/google/javascript/jscomp/FindExportableNodes.java,src/com/google/javascript/jscomp/FindExportableNodes.java,126,export = n.getString();
True,src/com/google/javascript/jscomp/FindExportableNodes.java,src/com/google/javascript/jscomp/FindExportableNodes.java,127,"context = new GenerateNodeContext(n, Mode.EXTERN);"
True,src/com/google/javascript/jscomp/FindExportableNodes.java,src/com/google/javascript/jscomp/FindExportableNodes.java,129,break;
False,src/com/google/javascript/jscomp/FindExportableNodes.java,src/com/google/javascript/jscomp/FindExportableNodes.java,100,"ompiler.report(t.makeError(n, NON_GLOBAL_ERROR));"
True,src/com/google/javascript/jscomp/FindExportableNodes.java,src/com/google/javascript/jscomp/FindExportableNodes.java,135,if (allowLocalExports) {
True,src/com/google/javascript/jscomp/FindExportableNodes.java,src/com/google/javascript/jscomp/FindExportableNodes.java,136,"compiler.report(t.makeError(n, EXPORT_ANNOTATION_NOT_ALLOWED));"
True,src/com/google/javascript/jscomp/FindExportableNodes.java,src/com/google/javascript/jscomp/FindExportableNodes.java,137,} else {
True,src/com/google/javascript/jscomp/FindExportableNodes.java,src/com/google/javascript/jscomp/FindExportableNodes.java,138,"compiler.report(t.makeError(n, NON_GLOBAL_ERROR));"
False,src/com/google/javascript/jscomp/FindExportableNodes.java,src/com/google/javascript/jscomp/FindExportableNodes.java,105,"ublic LinkedHashMap<String, GenerateNodeContext> getExports() {"
True,src/com/google/javascript/jscomp/FindExportableNodes.java,src/com/google/javascript/jscomp/FindExportableNodes.java,144,"LinkedHashMap<String, GenerateNodeContext> getExports() {"
True,src/com/google/javascript/jscomp/FindExportableNodes.java,src/com/google/javascript/jscomp/FindExportableNodes.java,148,static enum Mode {
True,src/com/google/javascript/jscomp/FindExportableNodes.java,src/com/google/javascript/jscomp/FindExportableNodes.java,149,"EXPORT,"
True,src/com/google/javascript/jscomp/FindExportableNodes.java,src/com/google/javascript/jscomp/FindExportableNodes.java,150,EXTERN
False,src/com/google/javascript/jscomp/FindExportableNodes.java,src/com/google/javascript/jscomp/FindExportableNodes.java,113,ublic static class GenerateNodeContext {
False,src/com/google/javascript/jscomp/FindExportableNodes.java,src/com/google/javascript/jscomp/FindExportableNodes.java,114,rivate final Node scriptNode;
False,src/com/google/javascript/jscomp/FindExportableNodes.java,src/com/google/javascript/jscomp/FindExportableNodes.java,115,rivate final Node contextNode;
True,src/com/google/javascript/jscomp/FindExportableNodes.java,src/com/google/javascript/jscomp/FindExportableNodes.java,157,static class GenerateNodeContext {
True,src/com/google/javascript/jscomp/FindExportableNodes.java,src/com/google/javascript/jscomp/FindExportableNodes.java,159,private final Mode mode;
False,src/com/google/javascript/jscomp/FindExportableNodes.java,src/com/google/javascript/jscomp/FindExportableNodes.java,118,"ublic GenerateNodeContext(Node node, Node scriptNode, Node contextNode) {"
True,src/com/google/javascript/jscomp/FindExportableNodes.java,src/com/google/javascript/jscomp/FindExportableNodes.java,161,GenerateNodeContext(
True,src/com/google/javascript/jscomp/FindExportableNodes.java,src/com/google/javascript/jscomp/FindExportableNodes.java,162,"Node node, Mode mode) {"
False,src/com/google/javascript/jscomp/FindExportableNodes.java,src/com/google/javascript/jscomp/FindExportableNodes.java,120,his.scriptNode = scriptNode;
False,src/com/google/javascript/jscomp/FindExportableNodes.java,src/com/google/javascript/jscomp/FindExportableNodes.java,121,his.contextNode = contextNode;
True,src/com/google/javascript/jscomp/FindExportableNodes.java,src/com/google/javascript/jscomp/FindExportableNodes.java,164,this.mode = mode;
False,src/com/google/javascript/jscomp/FindExportableNodes.java,src/com/google/javascript/jscomp/FindExportableNodes.java,124,ublic Node getNode() {
True,src/com/google/javascript/jscomp/FindExportableNodes.java,src/com/google/javascript/jscomp/FindExportableNodes.java,167,Node getNode() {
False,src/com/google/javascript/jscomp/FindExportableNodes.java,src/com/google/javascript/jscomp/FindExportableNodes.java,128,ublic Node getScriptNode() {
False,src/com/google/javascript/jscomp/FindExportableNodes.java,src/com/google/javascript/jscomp/FindExportableNodes.java,129,eturn scriptNode;
False,src/com/google/javascript/jscomp/FindExportableNodes.java,src/com/google/javascript/jscomp/FindExportableNodes.java,132,ublic Node getContextNode() {
False,src/com/google/javascript/jscomp/FindExportableNodes.java,src/com/google/javascript/jscomp/FindExportableNodes.java,133,eturn contextNode;
True,src/com/google/javascript/jscomp/FindExportableNodes.java,src/com/google/javascript/jscomp/FindExportableNodes.java,171,public Mode getMode() {
True,src/com/google/javascript/jscomp/FindExportableNodes.java,src/com/google/javascript/jscomp/FindExportableNodes.java,172,return mode;
True,src/com/google/javascript/jscomp/GenerateExports.java,src/com/google/javascript/jscomp/GenerateExports.java,21,import com.google.javascript.jscomp.FindExportableNodes.Mode;
True,src/com/google/javascript/jscomp/GenerateExports.java,src/com/google/javascript/jscomp/GenerateExports.java,41,private final boolean allowNonGlobalExports;
False,src/com/google/javascript/jscomp/GenerateExports.java,src/com/google/javascript/jscomp/GenerateExports.java,46,"enerateExports(AbstractCompiler compiler, String exportSymbolFunction,"
True,src/com/google/javascript/jscomp/GenerateExports.java,src/com/google/javascript/jscomp/GenerateExports.java,49,GenerateExports(
True,src/com/google/javascript/jscomp/GenerateExports.java,src/com/google/javascript/jscomp/GenerateExports.java,50,"AbstractCompiler compiler,"
True,src/com/google/javascript/jscomp/GenerateExports.java,src/com/google/javascript/jscomp/GenerateExports.java,51,"boolean allowNonGlobalExports,"
True,src/com/google/javascript/jscomp/GenerateExports.java,src/com/google/javascript/jscomp/GenerateExports.java,52,"String exportSymbolFunction,"
True,src/com/google/javascript/jscomp/GenerateExports.java,src/com/google/javascript/jscomp/GenerateExports.java,59,this.allowNonGlobalExports = allowNonGlobalExports;
False,src/com/google/javascript/jscomp/GenerateExports.java,src/com/google/javascript/jscomp/GenerateExports.java,59,indExportableNodes findExportableNodes = new FindExportableNodes(compiler);
True,src/com/google/javascript/jscomp/GenerateExports.java,src/com/google/javascript/jscomp/GenerateExports.java,66,FindExportableNodes findExportableNodes = new FindExportableNodes(
True,src/com/google/javascript/jscomp/GenerateExports.java,src/com/google/javascript/jscomp/GenerateExports.java,67,"compiler, allowNonGlobalExports);"
False,src/com/google/javascript/jscomp/GenerateExports.java,src/com/google/javascript/jscomp/GenerateExports.java,64,odingConvention convention = compiler.getCodingConvention();
False,src/com/google/javascript/jscomp/GenerateExports.java,src/com/google/javascript/jscomp/GenerateExports.java,69,/ Emit the proper CALL expression.
False,src/com/google/javascript/jscomp/GenerateExports.java,src/com/google/javascript/jscomp/GenerateExports.java,70,/ This is an optimization to avoid exporting everything as a symbol
False,src/com/google/javascript/jscomp/GenerateExports.java,src/com/google/javascript/jscomp/GenerateExports.java,71,/ because exporting a property is significantly simpler/faster.
False,src/com/google/javascript/jscomp/GenerateExports.java,src/com/google/javascript/jscomp/GenerateExports.java,72,/ Only export the property if the parent is being exported or
False,src/com/google/javascript/jscomp/GenerateExports.java,src/com/google/javascript/jscomp/GenerateExports.java,73,"/ if the parent is ""prototype"" and the grandparent is being exported."
False,src/com/google/javascript/jscomp/GenerateExports.java,src/com/google/javascript/jscomp/GenerateExports.java,74,tring parent = null;
False,src/com/google/javascript/jscomp/GenerateExports.java,src/com/google/javascript/jscomp/GenerateExports.java,75,tring grandparent = null;
False,src/com/google/javascript/jscomp/GenerateExports.java,src/com/google/javascript/jscomp/GenerateExports.java,77,ode node = context.getNode().getFirstChild();
False,src/com/google/javascript/jscomp/GenerateExports.java,src/com/google/javascript/jscomp/GenerateExports.java,78,f (node.isGetProp()) {
False,src/com/google/javascript/jscomp/GenerateExports.java,src/com/google/javascript/jscomp/GenerateExports.java,79,arent = node.getFirstChild().getQualifiedName();
False,src/com/google/javascript/jscomp/GenerateExports.java,src/com/google/javascript/jscomp/GenerateExports.java,80,f (node.getFirstChild().isGetProp() &&
False,src/com/google/javascript/jscomp/GenerateExports.java,src/com/google/javascript/jscomp/GenerateExports.java,81,etPropertyName(node.getFirstChild()).equals(PROTOTYPE_PROPERTY)) {
False,src/com/google/javascript/jscomp/GenerateExports.java,src/com/google/javascript/jscomp/GenerateExports.java,82,randparent = node.getFirstChild().getFirstChild().getQualifiedName();
True,src/com/google/javascript/jscomp/GenerateExports.java,src/com/google/javascript/jscomp/GenerateExports.java,76,if (context.getMode() == Mode.EXPORT) {
True,src/com/google/javascript/jscomp/GenerateExports.java,src/com/google/javascript/jscomp/GenerateExports.java,77,"addExportMethod(exports, export, context);"
True,src/com/google/javascript/jscomp/GenerateExports.java,src/com/google/javascript/jscomp/GenerateExports.java,78,} else if (context.getMode() == Mode.EXTERN) {
True,src/com/google/javascript/jscomp/GenerateExports.java,src/com/google/javascript/jscomp/GenerateExports.java,79,addExtern(export);
False,src/com/google/javascript/jscomp/GenerateExports.java,src/com/google/javascript/jscomp/GenerateExports.java,86,oolean useExportSymbol = true;
False,src/com/google/javascript/jscomp/GenerateExports.java,src/com/google/javascript/jscomp/GenerateExports.java,87,f (grandparent != null && exports.containsKey(grandparent)) {
False,src/com/google/javascript/jscomp/GenerateExports.java,src/com/google/javascript/jscomp/GenerateExports.java,88,seExportSymbol = false;
False,src/com/google/javascript/jscomp/GenerateExports.java,src/com/google/javascript/jscomp/GenerateExports.java,89, else if (parent != null && exports.containsKey(parent)) {
False,src/com/google/javascript/jscomp/GenerateExports.java,src/com/google/javascript/jscomp/GenerateExports.java,90,seExportSymbol = false;
True,src/com/google/javascript/jscomp/GenerateExports.java,src/com/google/javascript/jscomp/GenerateExports.java,84,private Node qualifiedNameNode(String qname) {
True,src/com/google/javascript/jscomp/GenerateExports.java,src/com/google/javascript/jscomp/GenerateExports.java,85,"return NodeUtil.newQualifiedNameNode(compiler.getCodingConvention(), qname);"
False,src/com/google/javascript/jscomp/GenerateExports.java,src/com/google/javascript/jscomp/GenerateExports.java,93,ode call;
False,src/com/google/javascript/jscomp/GenerateExports.java,src/com/google/javascript/jscomp/GenerateExports.java,94,f (useExportSymbol) {
False,src/com/google/javascript/jscomp/GenerateExports.java,src/com/google/javascript/jscomp/GenerateExports.java,95,"/ exportSymbol(publicPath, object);"
False,src/com/google/javascript/jscomp/GenerateExports.java,src/com/google/javascript/jscomp/GenerateExports.java,96,all = IR.call(
False,src/com/google/javascript/jscomp/GenerateExports.java,src/com/google/javascript/jscomp/GenerateExports.java,97,odeUtil.newQualifiedNameNode(
False,src/com/google/javascript/jscomp/GenerateExports.java,src/com/google/javascript/jscomp/GenerateExports.java,98,"onvention, exportSymbolFunction,"
False,src/com/google/javascript/jscomp/GenerateExports.java,src/com/google/javascript/jscomp/GenerateExports.java,99,"ontext.getNode(), export),"
False,src/com/google/javascript/jscomp/GenerateExports.java,src/com/google/javascript/jscomp/GenerateExports.java,100,"R.string(export),"
False,src/com/google/javascript/jscomp/GenerateExports.java,src/com/google/javascript/jscomp/GenerateExports.java,101,odeUtil.newQualifiedNameNode(
False,src/com/google/javascript/jscomp/GenerateExports.java,src/com/google/javascript/jscomp/GenerateExports.java,102,"onvention, export,"
False,src/com/google/javascript/jscomp/GenerateExports.java,src/com/google/javascript/jscomp/GenerateExports.java,103,"ontext.getNode(), export));"
False,src/com/google/javascript/jscomp/GenerateExports.java,src/com/google/javascript/jscomp/GenerateExports.java,104, else {
False,src/com/google/javascript/jscomp/GenerateExports.java,src/com/google/javascript/jscomp/GenerateExports.java,105,"/ exportProperty(object, publicName, symbol);"
False,src/com/google/javascript/jscomp/GenerateExports.java,src/com/google/javascript/jscomp/GenerateExports.java,106,tring property = getPropertyName(node);
False,src/com/google/javascript/jscomp/GenerateExports.java,src/com/google/javascript/jscomp/GenerateExports.java,107,all = IR.call(
False,src/com/google/javascript/jscomp/GenerateExports.java,src/com/google/javascript/jscomp/GenerateExports.java,108,odeUtil.newQualifiedNameNode(
False,src/com/google/javascript/jscomp/GenerateExports.java,src/com/google/javascript/jscomp/GenerateExports.java,109,"onvention, exportPropertyFunction,"
False,src/com/google/javascript/jscomp/GenerateExports.java,src/com/google/javascript/jscomp/GenerateExports.java,110,"ontext.getNode(), exportPropertyFunction),"
False,src/com/google/javascript/jscomp/GenerateExports.java,src/com/google/javascript/jscomp/GenerateExports.java,111,odeUtil.newQualifiedNameNode(
False,src/com/google/javascript/jscomp/GenerateExports.java,src/com/google/javascript/jscomp/GenerateExports.java,112,"onvention, parent,"
False,src/com/google/javascript/jscomp/GenerateExports.java,src/com/google/javascript/jscomp/GenerateExports.java,113,"ontext.getNode(), exportPropertyFunction),"
False,src/com/google/javascript/jscomp/GenerateExports.java,src/com/google/javascript/jscomp/GenerateExports.java,114,"R.string(property),"
False,src/com/google/javascript/jscomp/GenerateExports.java,src/com/google/javascript/jscomp/GenerateExports.java,115,odeUtil.newQualifiedNameNode(
False,src/com/google/javascript/jscomp/GenerateExports.java,src/com/google/javascript/jscomp/GenerateExports.java,116,"onvention, export,"
False,src/com/google/javascript/jscomp/GenerateExports.java,src/com/google/javascript/jscomp/GenerateExports.java,117,"ontext.getNode(), exportPropertyFunction));"
True,src/com/google/javascript/jscomp/GenerateExports.java,src/com/google/javascript/jscomp/GenerateExports.java,88,private void addExtern(String export) {
True,src/com/google/javascript/jscomp/GenerateExports.java,src/com/google/javascript/jscomp/GenerateExports.java,89,Node propstmt = IR.exprResult(
True,src/com/google/javascript/jscomp/GenerateExports.java,src/com/google/javascript/jscomp/GenerateExports.java,90,"IR.getprop(qualifiedNameNode(""Object.prototype""), IR.string(export)));"
True,src/com/google/javascript/jscomp/GenerateExports.java,src/com/google/javascript/jscomp/GenerateExports.java,91,getSynthesizedExternsRoot().addChildToBack(propstmt);
True,src/com/google/javascript/jscomp/GenerateExports.java,src/com/google/javascript/jscomp/GenerateExports.java,92,compiler.reportCodeChange();
True,src/com/google/javascript/jscomp/GenerateExports.java,src/com/google/javascript/jscomp/GenerateExports.java,95,"private void addExportMethod(Map<String, GenerateNodeContext> exports,"
True,src/com/google/javascript/jscomp/GenerateExports.java,src/com/google/javascript/jscomp/GenerateExports.java,96,"String export, GenerateNodeContext context) {"
True,src/com/google/javascript/jscomp/GenerateExports.java,src/com/google/javascript/jscomp/GenerateExports.java,97,CodingConvention convention = compiler.getCodingConvention();
False,src/com/google/javascript/jscomp/GenerateExports.java,src/com/google/javascript/jscomp/GenerateExports.java,120,ode expression = IR.exprResult(call);
False,src/com/google/javascript/jscomp/GenerateExports.java,src/com/google/javascript/jscomp/GenerateExports.java,121,nnotate(expression);
False,src/com/google/javascript/jscomp/GenerateExports.java,src/com/google/javascript/jscomp/GenerateExports.java,123,/ It's important that any class-building calls (goog.inherits)
False,src/com/google/javascript/jscomp/GenerateExports.java,src/com/google/javascript/jscomp/GenerateExports.java,124,"/ come right after the class definition, so move the export after that."
False,src/com/google/javascript/jscomp/GenerateExports.java,src/com/google/javascript/jscomp/GenerateExports.java,125,ode insertionPoint = context.getContextNode().getNext();
False,src/com/google/javascript/jscomp/GenerateExports.java,src/com/google/javascript/jscomp/GenerateExports.java,126,hile (insertionPoint != null &&
False,src/com/google/javascript/jscomp/GenerateExports.java,src/com/google/javascript/jscomp/GenerateExports.java,127,odeUtil.isExprCall(insertionPoint) &&
False,src/com/google/javascript/jscomp/GenerateExports.java,src/com/google/javascript/jscomp/GenerateExports.java,128,onvention.getClassesDefinedByCall(
False,src/com/google/javascript/jscomp/GenerateExports.java,src/com/google/javascript/jscomp/GenerateExports.java,129,nsertionPoint.getFirstChild()) != null) {
False,src/com/google/javascript/jscomp/GenerateExports.java,src/com/google/javascript/jscomp/GenerateExports.java,130,nsertionPoint = insertionPoint.getNext();
True,src/com/google/javascript/jscomp/GenerateExports.java,src/com/google/javascript/jscomp/GenerateExports.java,99,// Emit the proper CALL expression.
True,src/com/google/javascript/jscomp/GenerateExports.java,src/com/google/javascript/jscomp/GenerateExports.java,100,// This is an optimization to avoid exporting everything as a symbol
True,src/com/google/javascript/jscomp/GenerateExports.java,src/com/google/javascript/jscomp/GenerateExports.java,101,// because exporting a property is significantly simpler/faster.
True,src/com/google/javascript/jscomp/GenerateExports.java,src/com/google/javascript/jscomp/GenerateExports.java,102,// Only export the property if the parent is being exported or
True,src/com/google/javascript/jscomp/GenerateExports.java,src/com/google/javascript/jscomp/GenerateExports.java,103,"// if the parent is ""prototype"" and the grandparent is being exported."
True,src/com/google/javascript/jscomp/GenerateExports.java,src/com/google/javascript/jscomp/GenerateExports.java,104,String parent = null;
True,src/com/google/javascript/jscomp/GenerateExports.java,src/com/google/javascript/jscomp/GenerateExports.java,105,String grandparent = null;
True,src/com/google/javascript/jscomp/GenerateExports.java,src/com/google/javascript/jscomp/GenerateExports.java,107,Node node = context.getNode().getFirstChild();
True,src/com/google/javascript/jscomp/GenerateExports.java,src/com/google/javascript/jscomp/GenerateExports.java,108,if (node.isGetProp()) {
True,src/com/google/javascript/jscomp/GenerateExports.java,src/com/google/javascript/jscomp/GenerateExports.java,109,Node parentNode = node.getFirstChild();
True,src/com/google/javascript/jscomp/GenerateExports.java,src/com/google/javascript/jscomp/GenerateExports.java,110,parent = parentNode.getQualifiedName();
True,src/com/google/javascript/jscomp/GenerateExports.java,src/com/google/javascript/jscomp/GenerateExports.java,111,if (parentNode.isGetProp()
True,src/com/google/javascript/jscomp/GenerateExports.java,src/com/google/javascript/jscomp/GenerateExports.java,112,&& parentNode.getLastChild().getString().equals(PROTOTYPE_PROPERTY)) {
True,src/com/google/javascript/jscomp/GenerateExports.java,src/com/google/javascript/jscomp/GenerateExports.java,113,grandparent = parentNode.getFirstChild().getQualifiedName();
True,src/com/google/javascript/jscomp/GenerateExports.java,src/com/google/javascript/jscomp/GenerateExports.java,117,boolean useExportSymbol = true;
True,src/com/google/javascript/jscomp/GenerateExports.java,src/com/google/javascript/jscomp/GenerateExports.java,118,if (grandparent != null && exports.containsKey(grandparent)) {
True,src/com/google/javascript/jscomp/GenerateExports.java,src/com/google/javascript/jscomp/GenerateExports.java,119,// grandparent is only set for properties exported off a prototype obj.
True,src/com/google/javascript/jscomp/GenerateExports.java,src/com/google/javascript/jscomp/GenerateExports.java,120,useExportSymbol = false;
True,src/com/google/javascript/jscomp/GenerateExports.java,src/com/google/javascript/jscomp/GenerateExports.java,121,} else if (parent != null && exports.containsKey(parent)) {
True,src/com/google/javascript/jscomp/GenerateExports.java,src/com/google/javascript/jscomp/GenerateExports.java,122,useExportSymbol = false;
False,src/com/google/javascript/jscomp/GenerateExports.java,src/com/google/javascript/jscomp/GenerateExports.java,133,f (insertionPoint == null) {
False,src/com/google/javascript/jscomp/GenerateExports.java,src/com/google/javascript/jscomp/GenerateExports.java,134,ontext.getScriptNode().addChildToBack(expression);
True,src/com/google/javascript/jscomp/GenerateExports.java,src/com/google/javascript/jscomp/GenerateExports.java,125,Node call;
True,src/com/google/javascript/jscomp/GenerateExports.java,src/com/google/javascript/jscomp/GenerateExports.java,126,if (useExportSymbol) {
True,src/com/google/javascript/jscomp/GenerateExports.java,src/com/google/javascript/jscomp/GenerateExports.java,127,"// exportSymbol(publicPath, object);"
True,src/com/google/javascript/jscomp/GenerateExports.java,src/com/google/javascript/jscomp/GenerateExports.java,128,call = IR.call(
True,src/com/google/javascript/jscomp/GenerateExports.java,src/com/google/javascript/jscomp/GenerateExports.java,129,NodeUtil.newQualifiedNameNode(
True,src/com/google/javascript/jscomp/GenerateExports.java,src/com/google/javascript/jscomp/GenerateExports.java,130,"convention, exportSymbolFunction,"
True,src/com/google/javascript/jscomp/GenerateExports.java,src/com/google/javascript/jscomp/GenerateExports.java,131,"context.getNode(), export),"
True,src/com/google/javascript/jscomp/GenerateExports.java,src/com/google/javascript/jscomp/GenerateExports.java,132,"IR.string(export),"
True,src/com/google/javascript/jscomp/GenerateExports.java,src/com/google/javascript/jscomp/GenerateExports.java,133,NodeUtil.newQualifiedNameNode(
True,src/com/google/javascript/jscomp/GenerateExports.java,src/com/google/javascript/jscomp/GenerateExports.java,134,"convention, export,"
True,src/com/google/javascript/jscomp/GenerateExports.java,src/com/google/javascript/jscomp/GenerateExports.java,135,"context.getNode(), export));"
True,src/com/google/javascript/jscomp/GenerateExports.java,src/com/google/javascript/jscomp/GenerateExports.java,136,} else {
True,src/com/google/javascript/jscomp/GenerateExports.java,src/com/google/javascript/jscomp/GenerateExports.java,137,"// exportProperty(object, publicName, symbol);"
True,src/com/google/javascript/jscomp/GenerateExports.java,src/com/google/javascript/jscomp/GenerateExports.java,138,String property = getPropertyName(node);
True,src/com/google/javascript/jscomp/GenerateExports.java,src/com/google/javascript/jscomp/GenerateExports.java,139,call = IR.call(
True,src/com/google/javascript/jscomp/GenerateExports.java,src/com/google/javascript/jscomp/GenerateExports.java,140,NodeUtil.newQualifiedNameNode(
True,src/com/google/javascript/jscomp/GenerateExports.java,src/com/google/javascript/jscomp/GenerateExports.java,141,"convention, exportPropertyFunction,"
True,src/com/google/javascript/jscomp/GenerateExports.java,src/com/google/javascript/jscomp/GenerateExports.java,142,"context.getNode(), exportPropertyFunction),"
True,src/com/google/javascript/jscomp/GenerateExports.java,src/com/google/javascript/jscomp/GenerateExports.java,143,NodeUtil.newQualifiedNameNode(
True,src/com/google/javascript/jscomp/GenerateExports.java,src/com/google/javascript/jscomp/GenerateExports.java,144,"convention, parent,"
True,src/com/google/javascript/jscomp/GenerateExports.java,src/com/google/javascript/jscomp/GenerateExports.java,145,"context.getNode(), exportPropertyFunction),"
True,src/com/google/javascript/jscomp/GenerateExports.java,src/com/google/javascript/jscomp/GenerateExports.java,146,"IR.string(property),"
True,src/com/google/javascript/jscomp/GenerateExports.java,src/com/google/javascript/jscomp/GenerateExports.java,147,NodeUtil.newQualifiedNameNode(
True,src/com/google/javascript/jscomp/GenerateExports.java,src/com/google/javascript/jscomp/GenerateExports.java,148,"convention, export,"
True,src/com/google/javascript/jscomp/GenerateExports.java,src/com/google/javascript/jscomp/GenerateExports.java,149,"context.getNode(), exportPropertyFunction));"
True,src/com/google/javascript/jscomp/GenerateExports.java,src/com/google/javascript/jscomp/GenerateExports.java,152,Node expression = IR.exprResult(call);
True,src/com/google/javascript/jscomp/GenerateExports.java,src/com/google/javascript/jscomp/GenerateExports.java,153,annotate(expression);
True,src/com/google/javascript/jscomp/GenerateExports.java,src/com/google/javascript/jscomp/GenerateExports.java,155,"addStatement(context, expression);"
True,src/com/google/javascript/jscomp/GenerateExports.java,src/com/google/javascript/jscomp/GenerateExports.java,157,compiler.reportCodeChange();
True,src/com/google/javascript/jscomp/GenerateExports.java,src/com/google/javascript/jscomp/GenerateExports.java,160,"private void addStatement(GenerateNodeContext context, Node stmt) {"
True,src/com/google/javascript/jscomp/GenerateExports.java,src/com/google/javascript/jscomp/GenerateExports.java,161,CodingConvention convention = compiler.getCodingConvention();
True,src/com/google/javascript/jscomp/GenerateExports.java,src/com/google/javascript/jscomp/GenerateExports.java,163,Node n = context.getNode();
True,src/com/google/javascript/jscomp/GenerateExports.java,src/com/google/javascript/jscomp/GenerateExports.java,164,Node exprRoot = n;
True,src/com/google/javascript/jscomp/GenerateExports.java,src/com/google/javascript/jscomp/GenerateExports.java,165,while (!NodeUtil.isStatementBlock(exprRoot.getParent())) {
True,src/com/google/javascript/jscomp/GenerateExports.java,src/com/google/javascript/jscomp/GenerateExports.java,166,exprRoot = exprRoot.getParent();
True,src/com/google/javascript/jscomp/GenerateExports.java,src/com/google/javascript/jscomp/GenerateExports.java,169,// It's important that any class-building calls (goog.inherits)
True,src/com/google/javascript/jscomp/GenerateExports.java,src/com/google/javascript/jscomp/GenerateExports.java,170,"// come right after the class definition, so move the export after that."
True,src/com/google/javascript/jscomp/GenerateExports.java,src/com/google/javascript/jscomp/GenerateExports.java,171,while (true) {
True,src/com/google/javascript/jscomp/GenerateExports.java,src/com/google/javascript/jscomp/GenerateExports.java,172,Node next = exprRoot.getNext();
True,src/com/google/javascript/jscomp/GenerateExports.java,src/com/google/javascript/jscomp/GenerateExports.java,173,if (next != null
True,src/com/google/javascript/jscomp/GenerateExports.java,src/com/google/javascript/jscomp/GenerateExports.java,174,&& NodeUtil.isExprCall(next)
True,src/com/google/javascript/jscomp/GenerateExports.java,src/com/google/javascript/jscomp/GenerateExports.java,175,&& convention.getClassesDefinedByCall(next.getFirstChild()) != null) {
True,src/com/google/javascript/jscomp/GenerateExports.java,src/com/google/javascript/jscomp/GenerateExports.java,176,exprRoot = next;
False,src/com/google/javascript/jscomp/GenerateExports.java,src/com/google/javascript/jscomp/GenerateExports.java,136,"ontext.getScriptNode().addChildBefore(expression, insertionPoint);"
True,src/com/google/javascript/jscomp/GenerateExports.java,src/com/google/javascript/jscomp/GenerateExports.java,178,break;
False,src/com/google/javascript/jscomp/GenerateExports.java,src/com/google/javascript/jscomp/GenerateExports.java,138,ompiler.reportCodeChange();
True,src/com/google/javascript/jscomp/GenerateExports.java,src/com/google/javascript/jscomp/GenerateExports.java,182,Node block = exprRoot.getParent();
True,src/com/google/javascript/jscomp/GenerateExports.java,src/com/google/javascript/jscomp/GenerateExports.java,183,"block.addChildAfter(stmt, exprRoot);"
True,src/com/google/javascript/jscomp/GenerateExports.java,src/com/google/javascript/jscomp/GenerateExports.java,202,"/** Lazily create a ""new"" externs root for undeclared variables. */"
True,src/com/google/javascript/jscomp/GenerateExports.java,src/com/google/javascript/jscomp/GenerateExports.java,203,private Node getSynthesizedExternsRoot() {
True,src/com/google/javascript/jscomp/GenerateExports.java,src/com/google/javascript/jscomp/GenerateExports.java,204,return  compiler.getSynthesizedExternsInput().getAstRoot(compiler);
False,src/com/google/javascript/jscomp/VarCheck.java,src/com/google/javascript/jscomp/VarCheck.java,67,rivate Node synthesizedExternsRoot = null;
False,src/com/google/javascript/jscomp/VarCheck.java,src/com/google/javascript/jscomp/VarCheck.java,163,"ull, getSynthesizedExternsInput());"
True,src/com/google/javascript/jscomp/VarCheck.java,src/com/google/javascript/jscomp/VarCheck.java,161,"null, compiler.getSynthesizedExternsInput());"
False,src/com/google/javascript/jscomp/VarCheck.java,src/com/google/javascript/jscomp/VarCheck.java,266,"** Lazily create a ""new"" externs input for undeclared variables. */"
False,src/com/google/javascript/jscomp/VarCheck.java,src/com/google/javascript/jscomp/VarCheck.java,267,rivate CompilerInput getSynthesizedExternsInput() {
False,src/com/google/javascript/jscomp/VarCheck.java,src/com/google/javascript/jscomp/VarCheck.java,268,eturn compiler.getSynthesizedExternsInput();
False,src/com/google/javascript/jscomp/VarCheck.java,src/com/google/javascript/jscomp/VarCheck.java,273,f (synthesizedExternsRoot == null) {
False,src/com/google/javascript/jscomp/VarCheck.java,src/com/google/javascript/jscomp/VarCheck.java,274,ompilerInput synthesizedExterns = getSynthesizedExternsInput();
False,src/com/google/javascript/jscomp/VarCheck.java,src/com/google/javascript/jscomp/VarCheck.java,275,ynthesizedExternsRoot = synthesizedExterns.getAstRoot(compiler);
False,src/com/google/javascript/jscomp/VarCheck.java,src/com/google/javascript/jscomp/VarCheck.java,277,eturn synthesizedExternsRoot;
True,src/com/google/javascript/jscomp/VarCheck.java,src/com/google/javascript/jscomp/VarCheck.java,266,return  compiler.getSynthesizedExternsInput().getAstRoot(compiler);
True,test/com/google/javascript/jscomp/GenerateExportsTest.java,test/com/google/javascript/jscomp/GenerateExportsTest.java,19,import com.google.common.collect.ImmutableList;
True,test/com/google/javascript/jscomp/GenerateExportsTest.java,test/com/google/javascript/jscomp/GenerateExportsTest.java,20,import com.google.javascript.rhino.Node;
True,test/com/google/javascript/jscomp/GenerateExportsTest.java,test/com/google/javascript/jscomp/GenerateExportsTest.java,32,private boolean allowNonGlobalExports = true;
False,test/com/google/javascript/jscomp/GenerateExportsTest.java,test/com/google/javascript/jscomp/GenerateExportsTest.java,35,"eturn new GenerateExports(compiler,"
True,test/com/google/javascript/jscomp/GenerateExportsTest.java,test/com/google/javascript/jscomp/GenerateExportsTest.java,40,"return new GenerateExports(compiler, allowNonGlobalExports,"
True,test/com/google/javascript/jscomp/GenerateExportsTest.java,test/com/google/javascript/jscomp/GenerateExportsTest.java,55,this.allowNonGlobalExports  = true;
True,test/com/google/javascript/jscomp/GenerateExportsTest.java,test/com/google/javascript/jscomp/GenerateExportsTest.java,96,this.allowNonGlobalExports = false;
True,test/com/google/javascript/jscomp/GenerateExportsTest.java,test/com/google/javascript/jscomp/GenerateExportsTest.java,100,this.allowNonGlobalExports = true;
True,test/com/google/javascript/jscomp/GenerateExportsTest.java,test/com/google/javascript/jscomp/GenerateExportsTest.java,101,"test(""var BAR;\n/** @export */var FOO = BAR = 5"","
True,test/com/google/javascript/jscomp/GenerateExportsTest.java,test/com/google/javascript/jscomp/GenerateExportsTest.java,102,"null, FindExportableNodes.EXPORT_ANNOTATION_NOT_ALLOWED);"
True,test/com/google/javascript/jscomp/GenerateExportsTest.java,test/com/google/javascript/jscomp/GenerateExportsTest.java,111,this.allowNonGlobalExports = false;
True,test/com/google/javascript/jscomp/GenerateExportsTest.java,test/com/google/javascript/jscomp/GenerateExportsTest.java,115,this.allowNonGlobalExports = true;
True,test/com/google/javascript/jscomp/GenerateExportsTest.java,test/com/google/javascript/jscomp/GenerateExportsTest.java,116,"test(""var BAR;var FOO = {};\n/** @export */FOO.test = BAR = 5"","
True,test/com/google/javascript/jscomp/GenerateExportsTest.java,test/com/google/javascript/jscomp/GenerateExportsTest.java,117,"null, FindExportableNodes.EXPORT_ANNOTATION_NOT_ALLOWED);"
True,test/com/google/javascript/jscomp/GenerateExportsTest.java,test/com/google/javascript/jscomp/GenerateExportsTest.java,121,this.allowNonGlobalExports = false;
True,test/com/google/javascript/jscomp/GenerateExportsTest.java,test/com/google/javascript/jscomp/GenerateExportsTest.java,125,this.allowNonGlobalExports = true;
True,test/com/google/javascript/jscomp/GenerateExportsTest.java,test/com/google/javascript/jscomp/GenerateExportsTest.java,126,"test(""(function() { /** @export */var FOO = 5 })()"","
True,test/com/google/javascript/jscomp/GenerateExportsTest.java,test/com/google/javascript/jscomp/GenerateExportsTest.java,127,"null, FindExportableNodes.EXPORT_ANNOTATION_NOT_ALLOWED);"
True,test/com/google/javascript/jscomp/GenerateExportsTest.java,test/com/google/javascript/jscomp/GenerateExportsTest.java,149,public void testExportObjectLit1() {
True,test/com/google/javascript/jscomp/GenerateExportsTest.java,test/com/google/javascript/jscomp/GenerateExportsTest.java,150,allowExternsChanges(true);
True,test/com/google/javascript/jscomp/GenerateExportsTest.java,test/com/google/javascript/jscomp/GenerateExportsTest.java,151,"String code = ""var E = {/** @export */ A:1, B:2};"";"
True,test/com/google/javascript/jscomp/GenerateExportsTest.java,test/com/google/javascript/jscomp/GenerateExportsTest.java,152,testSame(code);
True,test/com/google/javascript/jscomp/GenerateExportsTest.java,test/com/google/javascript/jscomp/GenerateExportsTest.java,153,"checkSynthesizedExtern(code, ""Object.prototype.A;"");"
True,test/com/google/javascript/jscomp/GenerateExportsTest.java,test/com/google/javascript/jscomp/GenerateExportsTest.java,156,public void testExportClassMember1() {
True,test/com/google/javascript/jscomp/GenerateExportsTest.java,test/com/google/javascript/jscomp/GenerateExportsTest.java,157,allowExternsChanges(true);
True,test/com/google/javascript/jscomp/GenerateExportsTest.java,test/com/google/javascript/jscomp/GenerateExportsTest.java,158,"String code = ""var E = function() { /** @export */ this.foo = 1; };"";"
True,test/com/google/javascript/jscomp/GenerateExportsTest.java,test/com/google/javascript/jscomp/GenerateExportsTest.java,159,testSame(code);
True,test/com/google/javascript/jscomp/GenerateExportsTest.java,test/com/google/javascript/jscomp/GenerateExportsTest.java,160,"checkSynthesizedExtern(code, ""Object.prototype.foo;"");"
True,test/com/google/javascript/jscomp/GenerateExportsTest.java,test/com/google/javascript/jscomp/GenerateExportsTest.java,163,public void testExportClassMemberStub() {
True,test/com/google/javascript/jscomp/GenerateExportsTest.java,test/com/google/javascript/jscomp/GenerateExportsTest.java,164,allowExternsChanges(true);
True,test/com/google/javascript/jscomp/GenerateExportsTest.java,test/com/google/javascript/jscomp/GenerateExportsTest.java,165,"String code = ""var E = function() { /** @export */ this.foo; };"";"
True,test/com/google/javascript/jscomp/GenerateExportsTest.java,test/com/google/javascript/jscomp/GenerateExportsTest.java,166,testSame(code);
True,test/com/google/javascript/jscomp/GenerateExportsTest.java,test/com/google/javascript/jscomp/GenerateExportsTest.java,167,"checkSynthesizedExtern(code, ""Object.prototype.foo;"");"
True,test/com/google/javascript/jscomp/GenerateExportsTest.java,test/com/google/javascript/jscomp/GenerateExportsTest.java,170,public void checkSynthesizedExtern(
True,test/com/google/javascript/jscomp/GenerateExportsTest.java,test/com/google/javascript/jscomp/GenerateExportsTest.java,171,"String input, String expectedExtern) {"
True,test/com/google/javascript/jscomp/GenerateExportsTest.java,test/com/google/javascript/jscomp/GenerateExportsTest.java,172,"checkSynthesizedExtern("""", input, expectedExtern);"
True,test/com/google/javascript/jscomp/GenerateExportsTest.java,test/com/google/javascript/jscomp/GenerateExportsTest.java,176,// TODO(johnlenz): make this common code and unify with the VarCheckTest
True,test/com/google/javascript/jscomp/GenerateExportsTest.java,test/com/google/javascript/jscomp/GenerateExportsTest.java,177,public void checkSynthesizedExtern(
True,test/com/google/javascript/jscomp/GenerateExportsTest.java,test/com/google/javascript/jscomp/GenerateExportsTest.java,178,"String extern, String input, String expectedExtern) {"
True,test/com/google/javascript/jscomp/GenerateExportsTest.java,test/com/google/javascript/jscomp/GenerateExportsTest.java,179,Compiler compiler = createCompiler();
True,test/com/google/javascript/jscomp/GenerateExportsTest.java,test/com/google/javascript/jscomp/GenerateExportsTest.java,180,CompilerOptions options = getOptions();
True,test/com/google/javascript/jscomp/GenerateExportsTest.java,test/com/google/javascript/jscomp/GenerateExportsTest.java,181,compiler.init(
True,test/com/google/javascript/jscomp/GenerateExportsTest.java,test/com/google/javascript/jscomp/GenerateExportsTest.java,182,"ImmutableList.of(SourceFile.fromCode(""extern"", extern)),"
True,test/com/google/javascript/jscomp/GenerateExportsTest.java,test/com/google/javascript/jscomp/GenerateExportsTest.java,183,"ImmutableList.of(SourceFile.fromCode(""input"", input)),"
True,test/com/google/javascript/jscomp/GenerateExportsTest.java,test/com/google/javascript/jscomp/GenerateExportsTest.java,184,options);
True,test/com/google/javascript/jscomp/GenerateExportsTest.java,test/com/google/javascript/jscomp/GenerateExportsTest.java,185,compiler.parseInputs();
True,test/com/google/javascript/jscomp/GenerateExportsTest.java,test/com/google/javascript/jscomp/GenerateExportsTest.java,186,assertFalse(compiler.hasErrors());
True,test/com/google/javascript/jscomp/GenerateExportsTest.java,test/com/google/javascript/jscomp/GenerateExportsTest.java,188,Node externsAndJs = compiler.getRoot();
True,test/com/google/javascript/jscomp/GenerateExportsTest.java,test/com/google/javascript/jscomp/GenerateExportsTest.java,189,Node root = externsAndJs.getLastChild();
True,test/com/google/javascript/jscomp/GenerateExportsTest.java,test/com/google/javascript/jscomp/GenerateExportsTest.java,191,Node externs = externsAndJs.getFirstChild();
True,test/com/google/javascript/jscomp/GenerateExportsTest.java,test/com/google/javascript/jscomp/GenerateExportsTest.java,193,Node expected = compiler.parseTestCode(expectedExtern);
True,test/com/google/javascript/jscomp/GenerateExportsTest.java,test/com/google/javascript/jscomp/GenerateExportsTest.java,194,assertFalse(compiler.hasErrors());
True,test/com/google/javascript/jscomp/GenerateExportsTest.java,test/com/google/javascript/jscomp/GenerateExportsTest.java,196,(getProcessor(compiler))
True,test/com/google/javascript/jscomp/GenerateExportsTest.java,test/com/google/javascript/jscomp/GenerateExportsTest.java,197,".process(externs, root);"
True,test/com/google/javascript/jscomp/GenerateExportsTest.java,test/com/google/javascript/jscomp/GenerateExportsTest.java,199,String externsCode = compiler.toSource(externs);
True,test/com/google/javascript/jscomp/GenerateExportsTest.java,test/com/google/javascript/jscomp/GenerateExportsTest.java,200,String expectedCode = compiler.toSource(expected);
True,test/com/google/javascript/jscomp/GenerateExportsTest.java,test/com/google/javascript/jscomp/GenerateExportsTest.java,202,"assertEquals(expectedCode, externsCode);"
True,test/com/google/javascript/jscomp/IntegrationTest.java,test/com/google/javascript/jscomp/IntegrationTest.java,2711,public void testExports() {
True,test/com/google/javascript/jscomp/IntegrationTest.java,test/com/google/javascript/jscomp/IntegrationTest.java,2712,CompilerOptions options = createCompilerOptions();
True,test/com/google/javascript/jscomp/IntegrationTest.java,test/com/google/javascript/jscomp/IntegrationTest.java,2713,CompilationLevel level = CompilationLevel.ADVANCED_OPTIMIZATIONS;
True,test/com/google/javascript/jscomp/IntegrationTest.java,test/com/google/javascript/jscomp/IntegrationTest.java,2714,level.setOptionsForCompilationLevel(options);
True,test/com/google/javascript/jscomp/IntegrationTest.java,test/com/google/javascript/jscomp/IntegrationTest.java,2715,WarningLevel warnings = WarningLevel.DEFAULT;
True,test/com/google/javascript/jscomp/IntegrationTest.java,test/com/google/javascript/jscomp/IntegrationTest.java,2716,warnings.setOptionsForWarningLevel(options);
True,test/com/google/javascript/jscomp/IntegrationTest.java,test/com/google/javascript/jscomp/IntegrationTest.java,2718,"String code = """" +"
True,test/com/google/javascript/jscomp/IntegrationTest.java,test/com/google/javascript/jscomp/IntegrationTest.java,2719,"""/** @constructor */ var X = function() {"" +"
True,test/com/google/javascript/jscomp/IntegrationTest.java,test/com/google/javascript/jscomp/IntegrationTest.java,2720,"""/** @export */ this.abc = 1;};\n"" +"
True,test/com/google/javascript/jscomp/IntegrationTest.java,test/com/google/javascript/jscomp/IntegrationTest.java,2721,"""/** @constructor */ var Y = function() {"" +"
True,test/com/google/javascript/jscomp/IntegrationTest.java,test/com/google/javascript/jscomp/IntegrationTest.java,2722,"""/** @export */ this.abc = 1;};\n"" +"
True,test/com/google/javascript/jscomp/IntegrationTest.java,test/com/google/javascript/jscomp/IntegrationTest.java,2723,"""alert(new X().abc + new Y().abc);"";"
True,test/com/google/javascript/jscomp/IntegrationTest.java,test/com/google/javascript/jscomp/IntegrationTest.java,2725,"// no export enabled, property name not preserved"
True,test/com/google/javascript/jscomp/IntegrationTest.java,test/com/google/javascript/jscomp/IntegrationTest.java,2726,"test(options, code,"
True,test/com/google/javascript/jscomp/IntegrationTest.java,test/com/google/javascript/jscomp/IntegrationTest.java,2727,"""alert((new function(){this.a = 1}).a + "" +"
True,test/com/google/javascript/jscomp/IntegrationTest.java,test/com/google/javascript/jscomp/IntegrationTest.java,2728,"""(new function(){this.a = 1}).a);"");"
True,test/com/google/javascript/jscomp/IntegrationTest.java,test/com/google/javascript/jscomp/IntegrationTest.java,2730,options.generateExports = true;
True,test/com/google/javascript/jscomp/IntegrationTest.java,test/com/google/javascript/jscomp/IntegrationTest.java,2732,"// exports enabled, but not local exports"
True,test/com/google/javascript/jscomp/IntegrationTest.java,test/com/google/javascript/jscomp/IntegrationTest.java,2733,"test(options,"
True,test/com/google/javascript/jscomp/IntegrationTest.java,test/com/google/javascript/jscomp/IntegrationTest.java,2734,"""/** @constructor */ var X = function() {"" +"
True,test/com/google/javascript/jscomp/IntegrationTest.java,test/com/google/javascript/jscomp/IntegrationTest.java,2735,"""/** @export */ this.abc = 1;};\n"","
True,test/com/google/javascript/jscomp/IntegrationTest.java,test/com/google/javascript/jscomp/IntegrationTest.java,2736,FindExportableNodes.NON_GLOBAL_ERROR);
True,test/com/google/javascript/jscomp/IntegrationTest.java,test/com/google/javascript/jscomp/IntegrationTest.java,2738,options.exportLocalPropertyDefinitions = true;
True,test/com/google/javascript/jscomp/IntegrationTest.java,test/com/google/javascript/jscomp/IntegrationTest.java,2740,"// Local exports enabled, but removeUnusedPrototypePropertiesInExterns not"
True,test/com/google/javascript/jscomp/IntegrationTest.java,test/com/google/javascript/jscomp/IntegrationTest.java,2741,// disabled.
True,test/com/google/javascript/jscomp/IntegrationTest.java,test/com/google/javascript/jscomp/IntegrationTest.java,2742,"test(options, code,"
True,test/com/google/javascript/jscomp/IntegrationTest.java,test/com/google/javascript/jscomp/IntegrationTest.java,2743,DefaultPassConfig.CANNOT_USE_EXPORT_LOCALS_AND_EXTERN_PROP_REMOVAL);
True,test/com/google/javascript/jscomp/IntegrationTest.java,test/com/google/javascript/jscomp/IntegrationTest.java,2745,options.removeUnusedPrototypePropertiesInExterns = false;
True,test/com/google/javascript/jscomp/IntegrationTest.java,test/com/google/javascript/jscomp/IntegrationTest.java,2747,// property name preserved due to export
True,test/com/google/javascript/jscomp/IntegrationTest.java,test/com/google/javascript/jscomp/IntegrationTest.java,2748,"test(options, code,"
True,test/com/google/javascript/jscomp/IntegrationTest.java,test/com/google/javascript/jscomp/IntegrationTest.java,2749,"""alert((new function(){this.abc = 1}).abc + "" +"
True,test/com/google/javascript/jscomp/IntegrationTest.java,test/com/google/javascript/jscomp/IntegrationTest.java,2750,"""(new function(){this.abc = 1}).abc);"");"
True,test/com/google/javascript/jscomp/IntegrationTest.java,test/com/google/javascript/jscomp/IntegrationTest.java,2752,// unreferenced property not removed due to export.
True,test/com/google/javascript/jscomp/IntegrationTest.java,test/com/google/javascript/jscomp/IntegrationTest.java,2753,"test(options, """" +"
True,test/com/google/javascript/jscomp/IntegrationTest.java,test/com/google/javascript/jscomp/IntegrationTest.java,2754,"""/** @constructor */ var X = function() {"" +"
True,test/com/google/javascript/jscomp/IntegrationTest.java,test/com/google/javascript/jscomp/IntegrationTest.java,2755,"""/** @export */ this.abc = 1;};\n"" +"
True,test/com/google/javascript/jscomp/IntegrationTest.java,test/com/google/javascript/jscomp/IntegrationTest.java,2756,"""/** @constructor */ var Y = function() {"" +"
True,test/com/google/javascript/jscomp/IntegrationTest.java,test/com/google/javascript/jscomp/IntegrationTest.java,2757,"""/** @export */ this.abc = 1;};\n"" +"
True,test/com/google/javascript/jscomp/IntegrationTest.java,test/com/google/javascript/jscomp/IntegrationTest.java,2758,"""alert(new X() + new Y());"","
True,test/com/google/javascript/jscomp/IntegrationTest.java,test/com/google/javascript/jscomp/IntegrationTest.java,2759,"""alert((new function(){this.abc = 1}) + "" +"
True,test/com/google/javascript/jscomp/IntegrationTest.java,test/com/google/javascript/jscomp/IntegrationTest.java,2760,"""(new function(){this.abc = 1}));"");"
True,test/com/google/javascript/jscomp/IntegrationTest.java,test/com/google/javascript/jscomp/IntegrationTest.java,2762,// disambiguate and ambiguate properties respect the exports.
True,test/com/google/javascript/jscomp/IntegrationTest.java,test/com/google/javascript/jscomp/IntegrationTest.java,2763,options.checkTypes = true;
True,test/com/google/javascript/jscomp/IntegrationTest.java,test/com/google/javascript/jscomp/IntegrationTest.java,2764,options.disambiguateProperties = true;
True,test/com/google/javascript/jscomp/IntegrationTest.java,test/com/google/javascript/jscomp/IntegrationTest.java,2765,options.ambiguateProperties = true;
True,test/com/google/javascript/jscomp/IntegrationTest.java,test/com/google/javascript/jscomp/IntegrationTest.java,2766,options.propertyInvalidationErrors = ImmutableMap.of(
True,test/com/google/javascript/jscomp/IntegrationTest.java,test/com/google/javascript/jscomp/IntegrationTest.java,2767,"""abc"", CheckLevel.ERROR);"
True,test/com/google/javascript/jscomp/IntegrationTest.java,test/com/google/javascript/jscomp/IntegrationTest.java,2769,"test(options, code,"
True,test/com/google/javascript/jscomp/IntegrationTest.java,test/com/google/javascript/jscomp/IntegrationTest.java,2770,"""alert((new function(){this.abc = 1}).abc + "" +"
True,test/com/google/javascript/jscomp/IntegrationTest.java,test/com/google/javascript/jscomp/IntegrationTest.java,2771,"""(new function(){this.abc = 1}).abc);"");"
True,test/com/google/javascript/jscomp/IntegrationTest.java,test/com/google/javascript/jscomp/IntegrationTest.java,2773,// unreferenced property not removed due to export.
True,test/com/google/javascript/jscomp/IntegrationTest.java,test/com/google/javascript/jscomp/IntegrationTest.java,2774,"test(options, """" +"
True,test/com/google/javascript/jscomp/IntegrationTest.java,test/com/google/javascript/jscomp/IntegrationTest.java,2775,"""/** @constructor */ var X = function() {"" +"
True,test/com/google/javascript/jscomp/IntegrationTest.java,test/com/google/javascript/jscomp/IntegrationTest.java,2776,"""/** @export */ this.abc = 1;};\n"" +"
True,test/com/google/javascript/jscomp/IntegrationTest.java,test/com/google/javascript/jscomp/IntegrationTest.java,2777,"""/** @constructor */ var Y = function() {"" +"
True,test/com/google/javascript/jscomp/IntegrationTest.java,test/com/google/javascript/jscomp/IntegrationTest.java,2778,"""/** @export */ this.abc = 1;};\n"" +"
True,test/com/google/javascript/jscomp/IntegrationTest.java,test/com/google/javascript/jscomp/IntegrationTest.java,2779,"""alert(new X() + new Y());"","
True,test/com/google/javascript/jscomp/IntegrationTest.java,test/com/google/javascript/jscomp/IntegrationTest.java,2780,"""alert((new function(){this.abc = 1}) + "" +"
True,test/com/google/javascript/jscomp/IntegrationTest.java,test/com/google/javascript/jscomp/IntegrationTest.java,2781,"""(new function(){this.abc = 1}));"");"
