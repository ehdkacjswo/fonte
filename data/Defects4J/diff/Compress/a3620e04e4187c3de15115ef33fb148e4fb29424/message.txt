refactor Snappy to use the same decompress code as LZ4
