is_addition,old_file_path,new_file_path,line_num,content
True,src/test/java/org/apache/commons/lang3/builder/ReflectionToStringBuilderConcurrencyTest.java,src/test/java/org/apache/commons/lang3/builder/ReflectionToStringBuilderConcurrencyTest.java,2,* Licensed to the Apache Software Foundation (ASF) under one or more
True,src/test/java/org/apache/commons/lang3/builder/ReflectionToStringBuilderConcurrencyTest.java,src/test/java/org/apache/commons/lang3/builder/ReflectionToStringBuilderConcurrencyTest.java,3,* contributor license agreements.  See the NOTICE file distributed with
True,src/test/java/org/apache/commons/lang3/builder/ReflectionToStringBuilderConcurrencyTest.java,src/test/java/org/apache/commons/lang3/builder/ReflectionToStringBuilderConcurrencyTest.java,4,* this work for additional information regarding copyright ownership.
True,src/test/java/org/apache/commons/lang3/builder/ReflectionToStringBuilderConcurrencyTest.java,src/test/java/org/apache/commons/lang3/builder/ReflectionToStringBuilderConcurrencyTest.java,5,"* The ASF licenses this file to You under the Apache License, Version 2.0"
True,src/test/java/org/apache/commons/lang3/builder/ReflectionToStringBuilderConcurrencyTest.java,src/test/java/org/apache/commons/lang3/builder/ReflectionToStringBuilderConcurrencyTest.java,6,"* (the ""License""); you may not use this file except in compliance with"
True,src/test/java/org/apache/commons/lang3/builder/ReflectionToStringBuilderConcurrencyTest.java,src/test/java/org/apache/commons/lang3/builder/ReflectionToStringBuilderConcurrencyTest.java,7,* the License.  You may obtain a copy of the License at
True,src/test/java/org/apache/commons/lang3/builder/ReflectionToStringBuilderConcurrencyTest.java,src/test/java/org/apache/commons/lang3/builder/ReflectionToStringBuilderConcurrencyTest.java,9,*      http://www.apache.org/licenses/LICENSE-2.0
True,src/test/java/org/apache/commons/lang3/builder/ReflectionToStringBuilderConcurrencyTest.java,src/test/java/org/apache/commons/lang3/builder/ReflectionToStringBuilderConcurrencyTest.java,11,"* Unless required by applicable law or agreed to in writing, software"
True,src/test/java/org/apache/commons/lang3/builder/ReflectionToStringBuilderConcurrencyTest.java,src/test/java/org/apache/commons/lang3/builder/ReflectionToStringBuilderConcurrencyTest.java,12,"* distributed under the License is distributed on an ""AS IS"" BASIS,"
True,src/test/java/org/apache/commons/lang3/builder/ReflectionToStringBuilderConcurrencyTest.java,src/test/java/org/apache/commons/lang3/builder/ReflectionToStringBuilderConcurrencyTest.java,13,"* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied."
True,src/test/java/org/apache/commons/lang3/builder/ReflectionToStringBuilderConcurrencyTest.java,src/test/java/org/apache/commons/lang3/builder/ReflectionToStringBuilderConcurrencyTest.java,14,* See the License for the specific language governing permissions and
True,src/test/java/org/apache/commons/lang3/builder/ReflectionToStringBuilderConcurrencyTest.java,src/test/java/org/apache/commons/lang3/builder/ReflectionToStringBuilderConcurrencyTest.java,15,* limitations under the License.
True,src/test/java/org/apache/commons/lang3/builder/ReflectionToStringBuilderConcurrencyTest.java,src/test/java/org/apache/commons/lang3/builder/ReflectionToStringBuilderConcurrencyTest.java,18,package org.apache.commons.lang3.builder;
True,src/test/java/org/apache/commons/lang3/builder/ReflectionToStringBuilderConcurrencyTest.java,src/test/java/org/apache/commons/lang3/builder/ReflectionToStringBuilderConcurrencyTest.java,20,import java.util.ArrayList;
True,src/test/java/org/apache/commons/lang3/builder/ReflectionToStringBuilderConcurrencyTest.java,src/test/java/org/apache/commons/lang3/builder/ReflectionToStringBuilderConcurrencyTest.java,21,import java.util.Collection;
True,src/test/java/org/apache/commons/lang3/builder/ReflectionToStringBuilderConcurrencyTest.java,src/test/java/org/apache/commons/lang3/builder/ReflectionToStringBuilderConcurrencyTest.java,22,import java.util.LinkedList;
True,src/test/java/org/apache/commons/lang3/builder/ReflectionToStringBuilderConcurrencyTest.java,src/test/java/org/apache/commons/lang3/builder/ReflectionToStringBuilderConcurrencyTest.java,23,import java.util.List;
True,src/test/java/org/apache/commons/lang3/builder/ReflectionToStringBuilderConcurrencyTest.java,src/test/java/org/apache/commons/lang3/builder/ReflectionToStringBuilderConcurrencyTest.java,24,import java.util.concurrent.Callable;
True,src/test/java/org/apache/commons/lang3/builder/ReflectionToStringBuilderConcurrencyTest.java,src/test/java/org/apache/commons/lang3/builder/ReflectionToStringBuilderConcurrencyTest.java,25,import java.util.concurrent.CopyOnWriteArrayList;
True,src/test/java/org/apache/commons/lang3/builder/ReflectionToStringBuilderConcurrencyTest.java,src/test/java/org/apache/commons/lang3/builder/ReflectionToStringBuilderConcurrencyTest.java,26,import java.util.concurrent.ExecutionException;
True,src/test/java/org/apache/commons/lang3/builder/ReflectionToStringBuilderConcurrencyTest.java,src/test/java/org/apache/commons/lang3/builder/ReflectionToStringBuilderConcurrencyTest.java,27,import java.util.concurrent.ExecutorService;
True,src/test/java/org/apache/commons/lang3/builder/ReflectionToStringBuilderConcurrencyTest.java,src/test/java/org/apache/commons/lang3/builder/ReflectionToStringBuilderConcurrencyTest.java,28,import java.util.concurrent.Executors;
True,src/test/java/org/apache/commons/lang3/builder/ReflectionToStringBuilderConcurrencyTest.java,src/test/java/org/apache/commons/lang3/builder/ReflectionToStringBuilderConcurrencyTest.java,29,import java.util.concurrent.Future;
True,src/test/java/org/apache/commons/lang3/builder/ReflectionToStringBuilderConcurrencyTest.java,src/test/java/org/apache/commons/lang3/builder/ReflectionToStringBuilderConcurrencyTest.java,31,import junit.framework.Assert;
True,src/test/java/org/apache/commons/lang3/builder/ReflectionToStringBuilderConcurrencyTest.java,src/test/java/org/apache/commons/lang3/builder/ReflectionToStringBuilderConcurrencyTest.java,33,import org.junit.Ignore;
True,src/test/java/org/apache/commons/lang3/builder/ReflectionToStringBuilderConcurrencyTest.java,src/test/java/org/apache/commons/lang3/builder/ReflectionToStringBuilderConcurrencyTest.java,34,import org.junit.Test;
True,src/test/java/org/apache/commons/lang3/builder/ReflectionToStringBuilderConcurrencyTest.java,src/test/java/org/apache/commons/lang3/builder/ReflectionToStringBuilderConcurrencyTest.java,37,* Tests concurrent access for {@link ReflectionToStringBuilder}.
True,src/test/java/org/apache/commons/lang3/builder/ReflectionToStringBuilderConcurrencyTest.java,src/test/java/org/apache/commons/lang3/builder/ReflectionToStringBuilderConcurrencyTest.java,38,* <p>
True,src/test/java/org/apache/commons/lang3/builder/ReflectionToStringBuilderConcurrencyTest.java,src/test/java/org/apache/commons/lang3/builder/ReflectionToStringBuilderConcurrencyTest.java,39,* The {@link ToStringStyle} class includes a registry to avoid infinite loops for objects with circular references. We
True,src/test/java/org/apache/commons/lang3/builder/ReflectionToStringBuilderConcurrencyTest.java,src/test/java/org/apache/commons/lang3/builder/ReflectionToStringBuilderConcurrencyTest.java,40,* want to make sure that we do not get concurrency exceptions accessing this registry.
True,src/test/java/org/apache/commons/lang3/builder/ReflectionToStringBuilderConcurrencyTest.java,src/test/java/org/apache/commons/lang3/builder/ReflectionToStringBuilderConcurrencyTest.java,41,* </p>
True,src/test/java/org/apache/commons/lang3/builder/ReflectionToStringBuilderConcurrencyTest.java,src/test/java/org/apache/commons/lang3/builder/ReflectionToStringBuilderConcurrencyTest.java,42,* <p>
True,src/test/java/org/apache/commons/lang3/builder/ReflectionToStringBuilderConcurrencyTest.java,src/test/java/org/apache/commons/lang3/builder/ReflectionToStringBuilderConcurrencyTest.java,43,* The tests on the non-thread-safe collections do not pass.
True,src/test/java/org/apache/commons/lang3/builder/ReflectionToStringBuilderConcurrencyTest.java,src/test/java/org/apache/commons/lang3/builder/ReflectionToStringBuilderConcurrencyTest.java,44,* </p>
True,src/test/java/org/apache/commons/lang3/builder/ReflectionToStringBuilderConcurrencyTest.java,src/test/java/org/apache/commons/lang3/builder/ReflectionToStringBuilderConcurrencyTest.java,46,"* @see <a href=""https://issues.apache.org/jira/browse/LANG-762"">[LANG-762] Handle or document ReflectionToStringBuilder"
True,src/test/java/org/apache/commons/lang3/builder/ReflectionToStringBuilderConcurrencyTest.java,src/test/java/org/apache/commons/lang3/builder/ReflectionToStringBuilderConcurrencyTest.java,47,*      and ToStringBuilder for collections that are not thread safe</a>
True,src/test/java/org/apache/commons/lang3/builder/ReflectionToStringBuilderConcurrencyTest.java,src/test/java/org/apache/commons/lang3/builder/ReflectionToStringBuilderConcurrencyTest.java,48,* @since 3.0.2
True,src/test/java/org/apache/commons/lang3/builder/ReflectionToStringBuilderConcurrencyTest.java,src/test/java/org/apache/commons/lang3/builder/ReflectionToStringBuilderConcurrencyTest.java,50,public class ReflectionToStringBuilderConcurrencyTest {
True,src/test/java/org/apache/commons/lang3/builder/ReflectionToStringBuilderConcurrencyTest.java,src/test/java/org/apache/commons/lang3/builder/ReflectionToStringBuilderConcurrencyTest.java,52,static class CollectionHolder<T extends Collection<?>> {
True,src/test/java/org/apache/commons/lang3/builder/ReflectionToStringBuilderConcurrencyTest.java,src/test/java/org/apache/commons/lang3/builder/ReflectionToStringBuilderConcurrencyTest.java,53,T collection;
True,src/test/java/org/apache/commons/lang3/builder/ReflectionToStringBuilderConcurrencyTest.java,src/test/java/org/apache/commons/lang3/builder/ReflectionToStringBuilderConcurrencyTest.java,55,CollectionHolder(T collection) {
True,src/test/java/org/apache/commons/lang3/builder/ReflectionToStringBuilderConcurrencyTest.java,src/test/java/org/apache/commons/lang3/builder/ReflectionToStringBuilderConcurrencyTest.java,56,this.collection = collection;
True,src/test/java/org/apache/commons/lang3/builder/ReflectionToStringBuilderConcurrencyTest.java,src/test/java/org/apache/commons/lang3/builder/ReflectionToStringBuilderConcurrencyTest.java,60,private static final int DATA_SIZE = 100000;
True,src/test/java/org/apache/commons/lang3/builder/ReflectionToStringBuilderConcurrencyTest.java,src/test/java/org/apache/commons/lang3/builder/ReflectionToStringBuilderConcurrencyTest.java,61,private static final int REPEAT = 100;
True,src/test/java/org/apache/commons/lang3/builder/ReflectionToStringBuilderConcurrencyTest.java,src/test/java/org/apache/commons/lang3/builder/ReflectionToStringBuilderConcurrencyTest.java,63,@Test
True,src/test/java/org/apache/commons/lang3/builder/ReflectionToStringBuilderConcurrencyTest.java,src/test/java/org/apache/commons/lang3/builder/ReflectionToStringBuilderConcurrencyTest.java,64,@Ignore
True,src/test/java/org/apache/commons/lang3/builder/ReflectionToStringBuilderConcurrencyTest.java,src/test/java/org/apache/commons/lang3/builder/ReflectionToStringBuilderConcurrencyTest.java,65,"public void testLinkedList() throws InterruptedException, ExecutionException {"
True,src/test/java/org/apache/commons/lang3/builder/ReflectionToStringBuilderConcurrencyTest.java,src/test/java/org/apache/commons/lang3/builder/ReflectionToStringBuilderConcurrencyTest.java,66,this.testConcurrency(new CollectionHolder<List<Integer>>(new LinkedList<Integer>()));
True,src/test/java/org/apache/commons/lang3/builder/ReflectionToStringBuilderConcurrencyTest.java,src/test/java/org/apache/commons/lang3/builder/ReflectionToStringBuilderConcurrencyTest.java,69,@Test
True,src/test/java/org/apache/commons/lang3/builder/ReflectionToStringBuilderConcurrencyTest.java,src/test/java/org/apache/commons/lang3/builder/ReflectionToStringBuilderConcurrencyTest.java,70,@Ignore
True,src/test/java/org/apache/commons/lang3/builder/ReflectionToStringBuilderConcurrencyTest.java,src/test/java/org/apache/commons/lang3/builder/ReflectionToStringBuilderConcurrencyTest.java,71,"public void testArrayList() throws InterruptedException, ExecutionException {"
True,src/test/java/org/apache/commons/lang3/builder/ReflectionToStringBuilderConcurrencyTest.java,src/test/java/org/apache/commons/lang3/builder/ReflectionToStringBuilderConcurrencyTest.java,72,this.testConcurrency(new CollectionHolder<List<Integer>>(new ArrayList<Integer>()));
True,src/test/java/org/apache/commons/lang3/builder/ReflectionToStringBuilderConcurrencyTest.java,src/test/java/org/apache/commons/lang3/builder/ReflectionToStringBuilderConcurrencyTest.java,75,@Test
True,src/test/java/org/apache/commons/lang3/builder/ReflectionToStringBuilderConcurrencyTest.java,src/test/java/org/apache/commons/lang3/builder/ReflectionToStringBuilderConcurrencyTest.java,76,"public void testCopyOnWriteArrayList() throws InterruptedException, ExecutionException {"
True,src/test/java/org/apache/commons/lang3/builder/ReflectionToStringBuilderConcurrencyTest.java,src/test/java/org/apache/commons/lang3/builder/ReflectionToStringBuilderConcurrencyTest.java,77,this.testConcurrency(new CollectionHolder<List<Integer>>(new CopyOnWriteArrayList<Integer>()));
True,src/test/java/org/apache/commons/lang3/builder/ReflectionToStringBuilderConcurrencyTest.java,src/test/java/org/apache/commons/lang3/builder/ReflectionToStringBuilderConcurrencyTest.java,80,"private void testConcurrency(final CollectionHolder<List<Integer>> holder) throws InterruptedException,"
True,src/test/java/org/apache/commons/lang3/builder/ReflectionToStringBuilderConcurrencyTest.java,src/test/java/org/apache/commons/lang3/builder/ReflectionToStringBuilderConcurrencyTest.java,81,ExecutionException {
True,src/test/java/org/apache/commons/lang3/builder/ReflectionToStringBuilderConcurrencyTest.java,src/test/java/org/apache/commons/lang3/builder/ReflectionToStringBuilderConcurrencyTest.java,82,final List<Integer> list = holder.collection;
True,src/test/java/org/apache/commons/lang3/builder/ReflectionToStringBuilderConcurrencyTest.java,src/test/java/org/apache/commons/lang3/builder/ReflectionToStringBuilderConcurrencyTest.java,83,// make a big array that takes a long time to toString()
True,src/test/java/org/apache/commons/lang3/builder/ReflectionToStringBuilderConcurrencyTest.java,src/test/java/org/apache/commons/lang3/builder/ReflectionToStringBuilderConcurrencyTest.java,84,for (int i = 0; i < DATA_SIZE; i++) {
True,src/test/java/org/apache/commons/lang3/builder/ReflectionToStringBuilderConcurrencyTest.java,src/test/java/org/apache/commons/lang3/builder/ReflectionToStringBuilderConcurrencyTest.java,85,list.add(Integer.valueOf(i));
True,src/test/java/org/apache/commons/lang3/builder/ReflectionToStringBuilderConcurrencyTest.java,src/test/java/org/apache/commons/lang3/builder/ReflectionToStringBuilderConcurrencyTest.java,87,// Create a thread pool with two threads to cause the most contention on the underlying resource.
True,src/test/java/org/apache/commons/lang3/builder/ReflectionToStringBuilderConcurrencyTest.java,src/test/java/org/apache/commons/lang3/builder/ReflectionToStringBuilderConcurrencyTest.java,88,final ExecutorService threadPool = Executors.newFixedThreadPool(2);
True,src/test/java/org/apache/commons/lang3/builder/ReflectionToStringBuilderConcurrencyTest.java,src/test/java/org/apache/commons/lang3/builder/ReflectionToStringBuilderConcurrencyTest.java,89,// Consumes toStrings
True,src/test/java/org/apache/commons/lang3/builder/ReflectionToStringBuilderConcurrencyTest.java,src/test/java/org/apache/commons/lang3/builder/ReflectionToStringBuilderConcurrencyTest.java,90,Callable<Integer> consumer = new Callable<Integer>() {
True,src/test/java/org/apache/commons/lang3/builder/ReflectionToStringBuilderConcurrencyTest.java,src/test/java/org/apache/commons/lang3/builder/ReflectionToStringBuilderConcurrencyTest.java,91,public Integer call() {
True,src/test/java/org/apache/commons/lang3/builder/ReflectionToStringBuilderConcurrencyTest.java,src/test/java/org/apache/commons/lang3/builder/ReflectionToStringBuilderConcurrencyTest.java,92,for (int i = 0; i < REPEAT; i++) {
True,src/test/java/org/apache/commons/lang3/builder/ReflectionToStringBuilderConcurrencyTest.java,src/test/java/org/apache/commons/lang3/builder/ReflectionToStringBuilderConcurrencyTest.java,93,String s = ReflectionToStringBuilder.toString(holder);
True,src/test/java/org/apache/commons/lang3/builder/ReflectionToStringBuilderConcurrencyTest.java,src/test/java/org/apache/commons/lang3/builder/ReflectionToStringBuilderConcurrencyTest.java,94,Assert.assertNotNull(s);
True,src/test/java/org/apache/commons/lang3/builder/ReflectionToStringBuilderConcurrencyTest.java,src/test/java/org/apache/commons/lang3/builder/ReflectionToStringBuilderConcurrencyTest.java,96,return REPEAT;
True,src/test/java/org/apache/commons/lang3/builder/ReflectionToStringBuilderConcurrencyTest.java,src/test/java/org/apache/commons/lang3/builder/ReflectionToStringBuilderConcurrencyTest.java,99,// Produces changes in the list
True,src/test/java/org/apache/commons/lang3/builder/ReflectionToStringBuilderConcurrencyTest.java,src/test/java/org/apache/commons/lang3/builder/ReflectionToStringBuilderConcurrencyTest.java,100,Callable<Integer> producer = new Callable<Integer>() {
True,src/test/java/org/apache/commons/lang3/builder/ReflectionToStringBuilderConcurrencyTest.java,src/test/java/org/apache/commons/lang3/builder/ReflectionToStringBuilderConcurrencyTest.java,101,public Integer call() {
True,src/test/java/org/apache/commons/lang3/builder/ReflectionToStringBuilderConcurrencyTest.java,src/test/java/org/apache/commons/lang3/builder/ReflectionToStringBuilderConcurrencyTest.java,102,for (int i = 0; i < DATA_SIZE; i++) {
True,src/test/java/org/apache/commons/lang3/builder/ReflectionToStringBuilderConcurrencyTest.java,src/test/java/org/apache/commons/lang3/builder/ReflectionToStringBuilderConcurrencyTest.java,103,list.remove(list.get(0));
True,src/test/java/org/apache/commons/lang3/builder/ReflectionToStringBuilderConcurrencyTest.java,src/test/java/org/apache/commons/lang3/builder/ReflectionToStringBuilderConcurrencyTest.java,105,return REPEAT;
True,src/test/java/org/apache/commons/lang3/builder/ReflectionToStringBuilderConcurrencyTest.java,src/test/java/org/apache/commons/lang3/builder/ReflectionToStringBuilderConcurrencyTest.java,108,Collection<Callable<Integer>> tasks = new ArrayList<Callable<Integer>>();
True,src/test/java/org/apache/commons/lang3/builder/ReflectionToStringBuilderConcurrencyTest.java,src/test/java/org/apache/commons/lang3/builder/ReflectionToStringBuilderConcurrencyTest.java,109,tasks.add(consumer);
True,src/test/java/org/apache/commons/lang3/builder/ReflectionToStringBuilderConcurrencyTest.java,src/test/java/org/apache/commons/lang3/builder/ReflectionToStringBuilderConcurrencyTest.java,110,tasks.add(producer);
True,src/test/java/org/apache/commons/lang3/builder/ReflectionToStringBuilderConcurrencyTest.java,src/test/java/org/apache/commons/lang3/builder/ReflectionToStringBuilderConcurrencyTest.java,111,final List<Future<Integer>> futures = threadPool.invokeAll(tasks);
True,src/test/java/org/apache/commons/lang3/builder/ReflectionToStringBuilderConcurrencyTest.java,src/test/java/org/apache/commons/lang3/builder/ReflectionToStringBuilderConcurrencyTest.java,112,for (Future<Integer> future : futures) {
True,src/test/java/org/apache/commons/lang3/builder/ReflectionToStringBuilderConcurrencyTest.java,src/test/java/org/apache/commons/lang3/builder/ReflectionToStringBuilderConcurrencyTest.java,113,"Assert.assertEquals(REPEAT, future.get().intValue());"
