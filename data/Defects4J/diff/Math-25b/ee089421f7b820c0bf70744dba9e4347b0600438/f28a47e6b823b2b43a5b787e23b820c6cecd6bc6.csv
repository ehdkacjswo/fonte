is_addition,old_file_path,new_file_path,line_num,content
False,src/java/org/apache/commons/math/stat/regression/OLSMultipleLinearRegression.java,src/java/org/apache/commons/math/stat/regression/OLSMultipleLinearRegression.java,20,mport org.apache.commons.math.linear.LUSolver;
True,src/java/org/apache/commons/math/stat/regression/OLSMultipleLinearRegression.java,src/java/org/apache/commons/math/stat/regression/OLSMultipleLinearRegression.java,83,"* <p>Compute the ""hat"" matrix."
True,src/java/org/apache/commons/math/stat/regression/OLSMultipleLinearRegression.java,src/java/org/apache/commons/math/stat/regression/OLSMultipleLinearRegression.java,84,* </p>
True,src/java/org/apache/commons/math/stat/regression/OLSMultipleLinearRegression.java,src/java/org/apache/commons/math/stat/regression/OLSMultipleLinearRegression.java,85,* <p>The hat matrix is defined in terms of the design matrix X
True,src/java/org/apache/commons/math/stat/regression/OLSMultipleLinearRegression.java,src/java/org/apache/commons/math/stat/regression/OLSMultipleLinearRegression.java,86,*  by X(X^TX)^-1X^T
True,src/java/org/apache/commons/math/stat/regression/OLSMultipleLinearRegression.java,src/java/org/apache/commons/math/stat/regression/OLSMultipleLinearRegression.java,87,* <p>
True,src/java/org/apache/commons/math/stat/regression/OLSMultipleLinearRegression.java,src/java/org/apache/commons/math/stat/regression/OLSMultipleLinearRegression.java,88,* <p>The implementation here uses the QR decomposition to compute the
True,src/java/org/apache/commons/math/stat/regression/OLSMultipleLinearRegression.java,src/java/org/apache/commons/math/stat/regression/OLSMultipleLinearRegression.java,89,* hat matrix as QIpQ^T where Ip is the p-dimensional identity matrix
True,src/java/org/apache/commons/math/stat/regression/OLSMultipleLinearRegression.java,src/java/org/apache/commons/math/stat/regression/OLSMultipleLinearRegression.java,90,"* augmented by 0's.  This computational formula is from ""The Hat Matrix"
True,src/java/org/apache/commons/math/stat/regression/OLSMultipleLinearRegression.java,src/java/org/apache/commons/math/stat/regression/OLSMultipleLinearRegression.java,91,"* in Regression and ANOVA"", David C. Hoaglin and Roy E. Welsch,"
True,src/java/org/apache/commons/math/stat/regression/OLSMultipleLinearRegression.java,src/java/org/apache/commons/math/stat/regression/OLSMultipleLinearRegression.java,92,"* The American Statistician, Vol. 32, No. 1 (Feb., 1978), pp. 17-22."
True,src/java/org/apache/commons/math/stat/regression/OLSMultipleLinearRegression.java,src/java/org/apache/commons/math/stat/regression/OLSMultipleLinearRegression.java,94,* @return the hat matrix
True,src/java/org/apache/commons/math/stat/regression/OLSMultipleLinearRegression.java,src/java/org/apache/commons/math/stat/regression/OLSMultipleLinearRegression.java,96,public RealMatrix calculateHat() {
True,src/java/org/apache/commons/math/stat/regression/OLSMultipleLinearRegression.java,src/java/org/apache/commons/math/stat/regression/OLSMultipleLinearRegression.java,97,// Create augmented identity matrix
True,src/java/org/apache/commons/math/stat/regression/OLSMultipleLinearRegression.java,src/java/org/apache/commons/math/stat/regression/OLSMultipleLinearRegression.java,98,RealMatrix Q = qr.getQ();
True,src/java/org/apache/commons/math/stat/regression/OLSMultipleLinearRegression.java,src/java/org/apache/commons/math/stat/regression/OLSMultipleLinearRegression.java,99,final int p = qr.getR().getColumnDimension();
True,src/java/org/apache/commons/math/stat/regression/OLSMultipleLinearRegression.java,src/java/org/apache/commons/math/stat/regression/OLSMultipleLinearRegression.java,100,final int n = Q.getColumnDimension();
True,src/java/org/apache/commons/math/stat/regression/OLSMultipleLinearRegression.java,src/java/org/apache/commons/math/stat/regression/OLSMultipleLinearRegression.java,101,"RealMatrixImpl augI = new RealMatrixImpl(n, n);"
True,src/java/org/apache/commons/math/stat/regression/OLSMultipleLinearRegression.java,src/java/org/apache/commons/math/stat/regression/OLSMultipleLinearRegression.java,102,double[][] augIData = augI.getDataRef();
True,src/java/org/apache/commons/math/stat/regression/OLSMultipleLinearRegression.java,src/java/org/apache/commons/math/stat/regression/OLSMultipleLinearRegression.java,103,for (int i = 0; i < n; i++) {
True,src/java/org/apache/commons/math/stat/regression/OLSMultipleLinearRegression.java,src/java/org/apache/commons/math/stat/regression/OLSMultipleLinearRegression.java,104,for (int j =0; j < n; j++) {
True,src/java/org/apache/commons/math/stat/regression/OLSMultipleLinearRegression.java,src/java/org/apache/commons/math/stat/regression/OLSMultipleLinearRegression.java,105,if (i == j && i < p) {
True,src/java/org/apache/commons/math/stat/regression/OLSMultipleLinearRegression.java,src/java/org/apache/commons/math/stat/regression/OLSMultipleLinearRegression.java,106,augIData[i][j] = 1d;
True,src/java/org/apache/commons/math/stat/regression/OLSMultipleLinearRegression.java,src/java/org/apache/commons/math/stat/regression/OLSMultipleLinearRegression.java,107,} else {
True,src/java/org/apache/commons/math/stat/regression/OLSMultipleLinearRegression.java,src/java/org/apache/commons/math/stat/regression/OLSMultipleLinearRegression.java,108,augIData[i][j] = 0d;
True,src/java/org/apache/commons/math/stat/regression/OLSMultipleLinearRegression.java,src/java/org/apache/commons/math/stat/regression/OLSMultipleLinearRegression.java,113,// Compute and return Hat matrix
True,src/java/org/apache/commons/math/stat/regression/OLSMultipleLinearRegression.java,src/java/org/apache/commons/math/stat/regression/OLSMultipleLinearRegression.java,114,return Q.multiply(augI).multiply(Q.transpose());
True,src/test/org/apache/commons/math/stat/regression/OLSMultipleLinearRegressionTest.java,src/test/org/apache/commons/math/stat/regression/OLSMultipleLinearRegressionTest.java,20,import org.apache.commons.math.linear.MatrixUtils;
True,src/test/org/apache/commons/math/stat/regression/OLSMultipleLinearRegressionTest.java,src/test/org/apache/commons/math/stat/regression/OLSMultipleLinearRegressionTest.java,21,import org.apache.commons.math.linear.RealMatrix;
True,src/test/org/apache/commons/math/stat/regression/OLSMultipleLinearRegressionTest.java,src/test/org/apache/commons/math/stat/regression/OLSMultipleLinearRegressionTest.java,22,import org.apache.commons.math.linear.RealMatrixImpl;
True,src/test/org/apache/commons/math/stat/regression/OLSMultipleLinearRegressionTest.java,src/test/org/apache/commons/math/stat/regression/OLSMultipleLinearRegressionTest.java,25,import static org.junit.Assert.assertEquals;
True,src/test/org/apache/commons/math/stat/regression/OLSMultipleLinearRegressionTest.java,src/test/org/apache/commons/math/stat/regression/OLSMultipleLinearRegressionTest.java,252,* Test hat matrix computation
True,src/test/org/apache/commons/math/stat/regression/OLSMultipleLinearRegressionTest.java,src/test/org/apache/commons/math/stat/regression/OLSMultipleLinearRegressionTest.java,254,* @throws Exception
True,src/test/org/apache/commons/math/stat/regression/OLSMultipleLinearRegressionTest.java,src/test/org/apache/commons/math/stat/regression/OLSMultipleLinearRegressionTest.java,256,@Test
True,src/test/org/apache/commons/math/stat/regression/OLSMultipleLinearRegressionTest.java,src/test/org/apache/commons/math/stat/regression/OLSMultipleLinearRegressionTest.java,257,public void testHat() throws Exception {
True,src/test/org/apache/commons/math/stat/regression/OLSMultipleLinearRegressionTest.java,src/test/org/apache/commons/math/stat/regression/OLSMultipleLinearRegressionTest.java,260,"* This example is from ""The Hat Matrix in Regression and ANOVA"","
True,src/test/org/apache/commons/math/stat/regression/OLSMultipleLinearRegressionTest.java,src/test/org/apache/commons/math/stat/regression/OLSMultipleLinearRegressionTest.java,261,"* David C. Hoaglin and Roy E. Welsch,"
True,src/test/org/apache/commons/math/stat/regression/OLSMultipleLinearRegressionTest.java,src/test/org/apache/commons/math/stat/regression/OLSMultipleLinearRegressionTest.java,262,"* The American Statistician, Vol. 32, No. 1 (Feb., 1978), pp. 17-22."
True,src/test/org/apache/commons/math/stat/regression/OLSMultipleLinearRegressionTest.java,src/test/org/apache/commons/math/stat/regression/OLSMultipleLinearRegressionTest.java,265,double[] design = new double[] {
True,src/test/org/apache/commons/math/stat/regression/OLSMultipleLinearRegressionTest.java,src/test/org/apache/commons/math/stat/regression/OLSMultipleLinearRegressionTest.java,266,"11.14, .499, 11.1,"
True,src/test/org/apache/commons/math/stat/regression/OLSMultipleLinearRegressionTest.java,src/test/org/apache/commons/math/stat/regression/OLSMultipleLinearRegressionTest.java,267,"12.74, .558, 8.9,"
True,src/test/org/apache/commons/math/stat/regression/OLSMultipleLinearRegressionTest.java,src/test/org/apache/commons/math/stat/regression/OLSMultipleLinearRegressionTest.java,268,"13.13, .604, 8.8,"
True,src/test/org/apache/commons/math/stat/regression/OLSMultipleLinearRegressionTest.java,src/test/org/apache/commons/math/stat/regression/OLSMultipleLinearRegressionTest.java,269,"11.51, .441, 8.9,"
True,src/test/org/apache/commons/math/stat/regression/OLSMultipleLinearRegressionTest.java,src/test/org/apache/commons/math/stat/regression/OLSMultipleLinearRegressionTest.java,270,"12.38, .550, 8.8,"
True,src/test/org/apache/commons/math/stat/regression/OLSMultipleLinearRegressionTest.java,src/test/org/apache/commons/math/stat/regression/OLSMultipleLinearRegressionTest.java,271,"12.60, .528, 9.9,"
True,src/test/org/apache/commons/math/stat/regression/OLSMultipleLinearRegressionTest.java,src/test/org/apache/commons/math/stat/regression/OLSMultipleLinearRegressionTest.java,272,"11.13, .418, 10.7,"
True,src/test/org/apache/commons/math/stat/regression/OLSMultipleLinearRegressionTest.java,src/test/org/apache/commons/math/stat/regression/OLSMultipleLinearRegressionTest.java,273,"11.7, .480, 10.5,"
True,src/test/org/apache/commons/math/stat/regression/OLSMultipleLinearRegressionTest.java,src/test/org/apache/commons/math/stat/regression/OLSMultipleLinearRegressionTest.java,274,"11.02, .406, 10.5,"
True,src/test/org/apache/commons/math/stat/regression/OLSMultipleLinearRegressionTest.java,src/test/org/apache/commons/math/stat/regression/OLSMultipleLinearRegressionTest.java,275,"11.41, .467, 10.7"
True,src/test/org/apache/commons/math/stat/regression/OLSMultipleLinearRegressionTest.java,src/test/org/apache/commons/math/stat/regression/OLSMultipleLinearRegressionTest.java,278,int nobs = 10;
True,src/test/org/apache/commons/math/stat/regression/OLSMultipleLinearRegressionTest.java,src/test/org/apache/commons/math/stat/regression/OLSMultipleLinearRegressionTest.java,279,int nvars = 2;
True,src/test/org/apache/commons/math/stat/regression/OLSMultipleLinearRegressionTest.java,src/test/org/apache/commons/math/stat/regression/OLSMultipleLinearRegressionTest.java,281,// Estimate the model
True,src/test/org/apache/commons/math/stat/regression/OLSMultipleLinearRegressionTest.java,src/test/org/apache/commons/math/stat/regression/OLSMultipleLinearRegressionTest.java,282,OLSMultipleLinearRegression model = new OLSMultipleLinearRegression();
True,src/test/org/apache/commons/math/stat/regression/OLSMultipleLinearRegressionTest.java,src/test/org/apache/commons/math/stat/regression/OLSMultipleLinearRegressionTest.java,283,"model.newSampleData(design, nobs, nvars);"
True,src/test/org/apache/commons/math/stat/regression/OLSMultipleLinearRegressionTest.java,src/test/org/apache/commons/math/stat/regression/OLSMultipleLinearRegressionTest.java,285,RealMatrix hat = model.calculateHat();
True,src/test/org/apache/commons/math/stat/regression/OLSMultipleLinearRegressionTest.java,src/test/org/apache/commons/math/stat/regression/OLSMultipleLinearRegressionTest.java,287,// Reference data is upper half of symmetric hat matrix
True,src/test/org/apache/commons/math/stat/regression/OLSMultipleLinearRegressionTest.java,src/test/org/apache/commons/math/stat/regression/OLSMultipleLinearRegressionTest.java,288,double[] referenceData = new double[] {
True,src/test/org/apache/commons/math/stat/regression/OLSMultipleLinearRegressionTest.java,src/test/org/apache/commons/math/stat/regression/OLSMultipleLinearRegressionTest.java,289,".418, -.002,  .079, -.274, -.046,  .181,  .128,  .222,  .050,  .242,"
True,src/test/org/apache/commons/math/stat/regression/OLSMultipleLinearRegressionTest.java,src/test/org/apache/commons/math/stat/regression/OLSMultipleLinearRegressionTest.java,290,".242,  .292,  .136,  .243,  .128, -.041,  .033, -.035,  .004,"
True,src/test/org/apache/commons/math/stat/regression/OLSMultipleLinearRegressionTest.java,src/test/org/apache/commons/math/stat/regression/OLSMultipleLinearRegressionTest.java,291,".417, -.019,  .273,  .187, -.126,  .044, -.153,  .004,"
True,src/test/org/apache/commons/math/stat/regression/OLSMultipleLinearRegressionTest.java,src/test/org/apache/commons/math/stat/regression/OLSMultipleLinearRegressionTest.java,292,".604,  .197, -.038,  .168, -.022,  .275, -.028,"
True,src/test/org/apache/commons/math/stat/regression/OLSMultipleLinearRegressionTest.java,src/test/org/apache/commons/math/stat/regression/OLSMultipleLinearRegressionTest.java,293,".252,  .111, -.030,  .019, -.010, -.010,"
True,src/test/org/apache/commons/math/stat/regression/OLSMultipleLinearRegressionTest.java,src/test/org/apache/commons/math/stat/regression/OLSMultipleLinearRegressionTest.java,294,".148,  .042,  .117,  .012,  .111,"
True,src/test/org/apache/commons/math/stat/regression/OLSMultipleLinearRegressionTest.java,src/test/org/apache/commons/math/stat/regression/OLSMultipleLinearRegressionTest.java,295,".262,  .145,  .277,  .174,"
True,src/test/org/apache/commons/math/stat/regression/OLSMultipleLinearRegressionTest.java,src/test/org/apache/commons/math/stat/regression/OLSMultipleLinearRegressionTest.java,296,".154,  .120,  .168,"
True,src/test/org/apache/commons/math/stat/regression/OLSMultipleLinearRegressionTest.java,src/test/org/apache/commons/math/stat/regression/OLSMultipleLinearRegressionTest.java,297,".315,  .148,"
True,src/test/org/apache/commons/math/stat/regression/OLSMultipleLinearRegressionTest.java,src/test/org/apache/commons/math/stat/regression/OLSMultipleLinearRegressionTest.java,298,.187
True,src/test/org/apache/commons/math/stat/regression/OLSMultipleLinearRegressionTest.java,src/test/org/apache/commons/math/stat/regression/OLSMultipleLinearRegressionTest.java,301,// Check against reference data and verify symmetry
True,src/test/org/apache/commons/math/stat/regression/OLSMultipleLinearRegressionTest.java,src/test/org/apache/commons/math/stat/regression/OLSMultipleLinearRegressionTest.java,302,int k = 0;
True,src/test/org/apache/commons/math/stat/regression/OLSMultipleLinearRegressionTest.java,src/test/org/apache/commons/math/stat/regression/OLSMultipleLinearRegressionTest.java,303,for (int i = 0; i < 10; i++) {
True,src/test/org/apache/commons/math/stat/regression/OLSMultipleLinearRegressionTest.java,src/test/org/apache/commons/math/stat/regression/OLSMultipleLinearRegressionTest.java,304,for (int j = i; j < 10; j++) {
True,src/test/org/apache/commons/math/stat/regression/OLSMultipleLinearRegressionTest.java,src/test/org/apache/commons/math/stat/regression/OLSMultipleLinearRegressionTest.java,305,"assertEquals(referenceData[k], hat.getEntry(i, j), 10e-3);"
True,src/test/org/apache/commons/math/stat/regression/OLSMultipleLinearRegressionTest.java,src/test/org/apache/commons/math/stat/regression/OLSMultipleLinearRegressionTest.java,306,"assertEquals(hat.getEntry(i, j), hat.getEntry(j, i), 10e-12);"
True,src/test/org/apache/commons/math/stat/regression/OLSMultipleLinearRegressionTest.java,src/test/org/apache/commons/math/stat/regression/OLSMultipleLinearRegressionTest.java,307,k++;
True,src/test/org/apache/commons/math/stat/regression/OLSMultipleLinearRegressionTest.java,src/test/org/apache/commons/math/stat/regression/OLSMultipleLinearRegressionTest.java,312,* Verify that residuals computed using the hat matrix are close to
True,src/test/org/apache/commons/math/stat/regression/OLSMultipleLinearRegressionTest.java,src/test/org/apache/commons/math/stat/regression/OLSMultipleLinearRegressionTest.java,313,"* what we get from direct computation, i.e. r = (I - H) y"
True,src/test/org/apache/commons/math/stat/regression/OLSMultipleLinearRegressionTest.java,src/test/org/apache/commons/math/stat/regression/OLSMultipleLinearRegressionTest.java,315,double[] residuals = model.estimateResiduals();
True,src/test/org/apache/commons/math/stat/regression/OLSMultipleLinearRegressionTest.java,src/test/org/apache/commons/math/stat/regression/OLSMultipleLinearRegressionTest.java,316,RealMatrix I = MatrixUtils.createRealIdentityMatrix(10);
True,src/test/org/apache/commons/math/stat/regression/OLSMultipleLinearRegressionTest.java,src/test/org/apache/commons/math/stat/regression/OLSMultipleLinearRegressionTest.java,317,double[] hatResiduals = I.subtract(hat).multiply(model.Y).getColumn(0);
True,src/test/org/apache/commons/math/stat/regression/OLSMultipleLinearRegressionTest.java,src/test/org/apache/commons/math/stat/regression/OLSMultipleLinearRegressionTest.java,318,"TestUtils.assertEquals(residuals, hatResiduals, 10e-12);"
