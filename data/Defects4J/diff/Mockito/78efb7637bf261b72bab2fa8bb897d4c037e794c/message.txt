Added some tests, improved javadocs
