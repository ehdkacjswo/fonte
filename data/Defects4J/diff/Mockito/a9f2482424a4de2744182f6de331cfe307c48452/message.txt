Some refactorings
Made the exception message better for SmartNull
