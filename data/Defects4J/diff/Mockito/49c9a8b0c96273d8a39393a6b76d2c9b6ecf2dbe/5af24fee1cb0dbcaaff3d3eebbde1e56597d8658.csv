is_addition,old_file_path,new_file_path,line_num,content
False,src/org/mockito/exceptions/Reporter.java,src/org/mockito/exceptions/Reporter.java,409,"ethodName + ""() should return "" + expectedType"
True,src/org/mockito/exceptions/Reporter.java,src/org/mockito/exceptions/Reporter.java,409,"methodName + ""() should return "" + expectedType,"
True,src/org/mockito/exceptions/Reporter.java,src/org/mockito/exceptions/Reporter.java,411,"""This exception *might* occur in wrongly written multi-threaded tests."","
True,src/org/mockito/exceptions/Reporter.java,src/org/mockito/exceptions/Reporter.java,412,"""Please refer to Mockito FAQ on limitations of concurrency testing."","
True,test/org/mockitousage/bugs/MultithreadedStubbingHalfManualTest.java,test/org/mockitousage/bugs/MultithreadedStubbingHalfManualTest.java,1,package org.mockitousage.bugs;
True,test/org/mockitousage/bugs/MultithreadedStubbingHalfManualTest.java,test/org/mockitousage/bugs/MultithreadedStubbingHalfManualTest.java,3,import static java.util.Collections.synchronizedList;
True,test/org/mockitousage/bugs/MultithreadedStubbingHalfManualTest.java,test/org/mockitousage/bugs/MultithreadedStubbingHalfManualTest.java,4,import static org.junit.Assert.fail;
True,test/org/mockitousage/bugs/MultithreadedStubbingHalfManualTest.java,test/org/mockitousage/bugs/MultithreadedStubbingHalfManualTest.java,5,import static org.mockito.Mockito.doReturn;
True,test/org/mockitousage/bugs/MultithreadedStubbingHalfManualTest.java,test/org/mockitousage/bugs/MultithreadedStubbingHalfManualTest.java,6,import static org.mockito.Mockito.mock;
True,test/org/mockitousage/bugs/MultithreadedStubbingHalfManualTest.java,test/org/mockitousage/bugs/MultithreadedStubbingHalfManualTest.java,7,import static org.mockito.Mockito.when;
True,test/org/mockitousage/bugs/MultithreadedStubbingHalfManualTest.java,test/org/mockitousage/bugs/MultithreadedStubbingHalfManualTest.java,9,import java.util.LinkedList;
True,test/org/mockitousage/bugs/MultithreadedStubbingHalfManualTest.java,test/org/mockitousage/bugs/MultithreadedStubbingHalfManualTest.java,10,import java.util.List;
True,test/org/mockitousage/bugs/MultithreadedStubbingHalfManualTest.java,test/org/mockitousage/bugs/MultithreadedStubbingHalfManualTest.java,11,import java.util.concurrent.Executor;
True,test/org/mockitousage/bugs/MultithreadedStubbingHalfManualTest.java,test/org/mockitousage/bugs/MultithreadedStubbingHalfManualTest.java,12,import java.util.concurrent.Executors;
True,test/org/mockitousage/bugs/MultithreadedStubbingHalfManualTest.java,test/org/mockitousage/bugs/MultithreadedStubbingHalfManualTest.java,13,import java.util.concurrent.RejectedExecutionException;
True,test/org/mockitousage/bugs/MultithreadedStubbingHalfManualTest.java,test/org/mockitousage/bugs/MultithreadedStubbingHalfManualTest.java,15,import org.junit.Before;
True,test/org/mockitousage/bugs/MultithreadedStubbingHalfManualTest.java,test/org/mockitousage/bugs/MultithreadedStubbingHalfManualTest.java,16,import org.junit.Ignore;
True,test/org/mockitousage/bugs/MultithreadedStubbingHalfManualTest.java,test/org/mockitousage/bugs/MultithreadedStubbingHalfManualTest.java,17,import org.junit.Test;
True,test/org/mockitousage/bugs/MultithreadedStubbingHalfManualTest.java,test/org/mockitousage/bugs/MultithreadedStubbingHalfManualTest.java,20,* Race condition test in Mockito.
True,test/org/mockitousage/bugs/MultithreadedStubbingHalfManualTest.java,test/org/mockitousage/bugs/MultithreadedStubbingHalfManualTest.java,22,* @author Ivan Koblik
True,test/org/mockitousage/bugs/MultithreadedStubbingHalfManualTest.java,test/org/mockitousage/bugs/MultithreadedStubbingHalfManualTest.java,24,@Ignore
True,test/org/mockitousage/bugs/MultithreadedStubbingHalfManualTest.java,test/org/mockitousage/bugs/MultithreadedStubbingHalfManualTest.java,25,public class MultithreadedStubbingHalfManualTest {
True,test/org/mockitousage/bugs/MultithreadedStubbingHalfManualTest.java,test/org/mockitousage/bugs/MultithreadedStubbingHalfManualTest.java,28,"* Class with two methods, one of them is repeatedly mocked while another is repeatedly called."
True,test/org/mockitousage/bugs/MultithreadedStubbingHalfManualTest.java,test/org/mockitousage/bugs/MultithreadedStubbingHalfManualTest.java,30,public interface ToMock {
True,test/org/mockitousage/bugs/MultithreadedStubbingHalfManualTest.java,test/org/mockitousage/bugs/MultithreadedStubbingHalfManualTest.java,31,public Integer getValue(Integer param);
True,test/org/mockitousage/bugs/MultithreadedStubbingHalfManualTest.java,test/org/mockitousage/bugs/MultithreadedStubbingHalfManualTest.java,33,public List<Integer> getValues(Integer param);
True,test/org/mockitousage/bugs/MultithreadedStubbingHalfManualTest.java,test/org/mockitousage/bugs/MultithreadedStubbingHalfManualTest.java,37,* Thread pool for concurrent invocations.
True,test/org/mockitousage/bugs/MultithreadedStubbingHalfManualTest.java,test/org/mockitousage/bugs/MultithreadedStubbingHalfManualTest.java,39,private Executor executor;
True,test/org/mockitousage/bugs/MultithreadedStubbingHalfManualTest.java,test/org/mockitousage/bugs/MultithreadedStubbingHalfManualTest.java,41,private List exceptions = synchronizedList(new LinkedList());
True,test/org/mockitousage/bugs/MultithreadedStubbingHalfManualTest.java,test/org/mockitousage/bugs/MultithreadedStubbingHalfManualTest.java,43,@Before
True,test/org/mockitousage/bugs/MultithreadedStubbingHalfManualTest.java,test/org/mockitousage/bugs/MultithreadedStubbingHalfManualTest.java,44,public void setUp() {
True,test/org/mockitousage/bugs/MultithreadedStubbingHalfManualTest.java,test/org/mockitousage/bugs/MultithreadedStubbingHalfManualTest.java,45,this.executor = Executors.newSingleThreadExecutor();
True,test/org/mockitousage/bugs/MultithreadedStubbingHalfManualTest.java,test/org/mockitousage/bugs/MultithreadedStubbingHalfManualTest.java,49,* The returned runnable simply calls ToMock.getValues(int).
True,test/org/mockitousage/bugs/MultithreadedStubbingHalfManualTest.java,test/org/mockitousage/bugs/MultithreadedStubbingHalfManualTest.java,51,* @param toMock The mocked object
True,test/org/mockitousage/bugs/MultithreadedStubbingHalfManualTest.java,test/org/mockitousage/bugs/MultithreadedStubbingHalfManualTest.java,52,* @return The runnable.
True,test/org/mockitousage/bugs/MultithreadedStubbingHalfManualTest.java,test/org/mockitousage/bugs/MultithreadedStubbingHalfManualTest.java,54,private Runnable getConflictingRunnable(final ToMock toMock) {
True,test/org/mockitousage/bugs/MultithreadedStubbingHalfManualTest.java,test/org/mockitousage/bugs/MultithreadedStubbingHalfManualTest.java,55,return new Runnable() {
True,test/org/mockitousage/bugs/MultithreadedStubbingHalfManualTest.java,test/org/mockitousage/bugs/MultithreadedStubbingHalfManualTest.java,56,public void run() {
True,test/org/mockitousage/bugs/MultithreadedStubbingHalfManualTest.java,test/org/mockitousage/bugs/MultithreadedStubbingHalfManualTest.java,57,while (true) {
True,test/org/mockitousage/bugs/MultithreadedStubbingHalfManualTest.java,test/org/mockitousage/bugs/MultithreadedStubbingHalfManualTest.java,58,try {
True,test/org/mockitousage/bugs/MultithreadedStubbingHalfManualTest.java,test/org/mockitousage/bugs/MultithreadedStubbingHalfManualTest.java,59,Thread.sleep((long) (Math.random() * 10));
True,test/org/mockitousage/bugs/MultithreadedStubbingHalfManualTest.java,test/org/mockitousage/bugs/MultithreadedStubbingHalfManualTest.java,60,} catch (InterruptedException e) {
True,test/org/mockitousage/bugs/MultithreadedStubbingHalfManualTest.java,test/org/mockitousage/bugs/MultithreadedStubbingHalfManualTest.java,62,if (!toMock.getValues(0).isEmpty()) {
True,test/org/mockitousage/bugs/MultithreadedStubbingHalfManualTest.java,test/org/mockitousage/bugs/MultithreadedStubbingHalfManualTest.java,63,"fail(""Shouldn't happen, were just making sure it wasn't optimized away..."");"
True,test/org/mockitousage/bugs/MultithreadedStubbingHalfManualTest.java,test/org/mockitousage/bugs/MultithreadedStubbingHalfManualTest.java,70,@Test
True,test/org/mockitousage/bugs/MultithreadedStubbingHalfManualTest.java,test/org/mockitousage/bugs/MultithreadedStubbingHalfManualTest.java,71,//this problem shows at 4 out of 5 executions
True,test/org/mockitousage/bugs/MultithreadedStubbingHalfManualTest.java,test/org/mockitousage/bugs/MultithreadedStubbingHalfManualTest.java,72,//it is not strictly a bug because Mockito does not support simultanous stubbing (see FAQ)
True,test/org/mockitousage/bugs/MultithreadedStubbingHalfManualTest.java,test/org/mockitousage/bugs/MultithreadedStubbingHalfManualTest.java,73,//however I decided to synchronize some calls in order to make the exceptions nicer
True,test/org/mockitousage/bugs/MultithreadedStubbingHalfManualTest.java,test/org/mockitousage/bugs/MultithreadedStubbingHalfManualTest.java,74,public void tryToRevealTheProblem() {
True,test/org/mockitousage/bugs/MultithreadedStubbingHalfManualTest.java,test/org/mockitousage/bugs/MultithreadedStubbingHalfManualTest.java,75,ToMock toMock = mock(ToMock.class);
True,test/org/mockitousage/bugs/MultithreadedStubbingHalfManualTest.java,test/org/mockitousage/bugs/MultithreadedStubbingHalfManualTest.java,76,for (int i = 0; i < 100; i++) {
True,test/org/mockitousage/bugs/MultithreadedStubbingHalfManualTest.java,test/org/mockitousage/bugs/MultithreadedStubbingHalfManualTest.java,77,int j = i % 11;
True,test/org/mockitousage/bugs/MultithreadedStubbingHalfManualTest.java,test/org/mockitousage/bugs/MultithreadedStubbingHalfManualTest.java,79,// Repeated mocking
True,test/org/mockitousage/bugs/MultithreadedStubbingHalfManualTest.java,test/org/mockitousage/bugs/MultithreadedStubbingHalfManualTest.java,80,when(toMock.getValue(i)).thenReturn(j);
True,test/org/mockitousage/bugs/MultithreadedStubbingHalfManualTest.java,test/org/mockitousage/bugs/MultithreadedStubbingHalfManualTest.java,81,//TODO make it also showing errors for doReturn()
True,test/org/mockitousage/bugs/MultithreadedStubbingHalfManualTest.java,test/org/mockitousage/bugs/MultithreadedStubbingHalfManualTest.java,82,//            doReturn(j).when(toMock).getValue(i);
True,test/org/mockitousage/bugs/MultithreadedStubbingHalfManualTest.java,test/org/mockitousage/bugs/MultithreadedStubbingHalfManualTest.java,84,while (true) {
True,test/org/mockitousage/bugs/MultithreadedStubbingHalfManualTest.java,test/org/mockitousage/bugs/MultithreadedStubbingHalfManualTest.java,85,try {
True,test/org/mockitousage/bugs/MultithreadedStubbingHalfManualTest.java,test/org/mockitousage/bugs/MultithreadedStubbingHalfManualTest.java,86,// Scheduling invocation
True,test/org/mockitousage/bugs/MultithreadedStubbingHalfManualTest.java,test/org/mockitousage/bugs/MultithreadedStubbingHalfManualTest.java,87,this.executor.execute(getConflictingRunnable(toMock));
True,test/org/mockitousage/bugs/MultithreadedStubbingHalfManualTest.java,test/org/mockitousage/bugs/MultithreadedStubbingHalfManualTest.java,88,break;
True,test/org/mockitousage/bugs/MultithreadedStubbingHalfManualTest.java,test/org/mockitousage/bugs/MultithreadedStubbingHalfManualTest.java,89,} catch (RejectedExecutionException ex) {
True,test/org/mockitousage/bugs/MultithreadedStubbingHalfManualTest.java,test/org/mockitousage/bugs/MultithreadedStubbingHalfManualTest.java,90,fail();
True,test/org/mockitousage/bugs/MultithreadedStubbingHalfManualTest.java,test/org/mockitousage/bugs/MultithreadedStubbingHalfManualTest.java,94,try {
True,test/org/mockitousage/bugs/MultithreadedStubbingHalfManualTest.java,test/org/mockitousage/bugs/MultithreadedStubbingHalfManualTest.java,95,Thread.sleep(10 / ((i % 10) + 1));
True,test/org/mockitousage/bugs/MultithreadedStubbingHalfManualTest.java,test/org/mockitousage/bugs/MultithreadedStubbingHalfManualTest.java,96,} catch (InterruptedException e) {
