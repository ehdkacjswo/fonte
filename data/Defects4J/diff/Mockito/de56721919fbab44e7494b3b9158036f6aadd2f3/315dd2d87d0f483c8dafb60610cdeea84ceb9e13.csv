is_addition,old_file_path,new_file_path,line_num,content
True,buildSrc/src/main/groovy/org/mockito/release/steps/DefaultReleaseStep.java,buildSrc/src/main/groovy/org/mockito/release/steps/DefaultReleaseStep.java,3,import groovy.lang.Closure;
True,buildSrc/src/main/groovy/org/mockito/release/steps/DefaultReleaseStep.java,buildSrc/src/main/groovy/org/mockito/release/steps/DefaultReleaseStep.java,5,import org.mockito.release.util.operations.Operations;
True,buildSrc/src/main/groovy/org/mockito/release/steps/DefaultReleaseStep.java,buildSrc/src/main/groovy/org/mockito/release/steps/DefaultReleaseStep.java,11,private Operation rollback;
True,buildSrc/src/main/groovy/org/mockito/release/steps/DefaultReleaseStep.java,buildSrc/src/main/groovy/org/mockito/release/steps/DefaultReleaseStep.java,22,public void rollback(Closure closure) {
True,buildSrc/src/main/groovy/org/mockito/release/steps/DefaultReleaseStep.java,buildSrc/src/main/groovy/org/mockito/release/steps/DefaultReleaseStep.java,23,rollback = Operations.toOperation(closure);
True,buildSrc/src/main/groovy/org/mockito/release/steps/DefaultReleaseStep.java,buildSrc/src/main/groovy/org/mockito/release/steps/DefaultReleaseStep.java,26,public Operation getRollback() {
True,buildSrc/src/main/groovy/org/mockito/release/steps/DefaultReleaseStep.java,buildSrc/src/main/groovy/org/mockito/release/steps/DefaultReleaseStep.java,27,return rollback;
True,buildSrc/src/main/groovy/org/mockito/release/steps/DefaultReleaseSteps.java,buildSrc/src/main/groovy/org/mockito/release/steps/DefaultReleaseSteps.java,6,import java.util.LinkedList;
False,buildSrc/src/main/groovy/org/mockito/release/steps/DefaultReleaseSteps.java,buildSrc/src/main/groovy/org/mockito/release/steps/DefaultReleaseSteps.java,20,nt i = 1;
True,buildSrc/src/main/groovy/org/mockito/release/steps/DefaultReleaseSteps.java,buildSrc/src/main/groovy/org/mockito/release/steps/DefaultReleaseSteps.java,21,List<ReleaseStep> attempted = new LinkedList<ReleaseStep>();
False,buildSrc/src/main/groovy/org/mockito/release/steps/DefaultReleaseSteps.java,buildSrc/src/main/groovy/org/mockito/release/steps/DefaultReleaseSteps.java,22,"ystem.out.println(""Step "" + (i++) + "": "" + step.getDescription());"
False,buildSrc/src/main/groovy/org/mockito/release/steps/DefaultReleaseSteps.java,buildSrc/src/main/groovy/org/mockito/release/steps/DefaultReleaseSteps.java,23,tep.perform();
True,buildSrc/src/main/groovy/org/mockito/release/steps/DefaultReleaseSteps.java,buildSrc/src/main/groovy/org/mockito/release/steps/DefaultReleaseSteps.java,23,attempted.add(step);
True,buildSrc/src/main/groovy/org/mockito/release/steps/DefaultReleaseSteps.java,buildSrc/src/main/groovy/org/mockito/release/steps/DefaultReleaseSteps.java,24,"System.out.println(""Step "" + attempted.size() + "": "" + step.getDescription());"
True,buildSrc/src/main/groovy/org/mockito/release/steps/DefaultReleaseSteps.java,buildSrc/src/main/groovy/org/mockito/release/steps/DefaultReleaseSteps.java,25,try {
True,buildSrc/src/main/groovy/org/mockito/release/steps/DefaultReleaseSteps.java,buildSrc/src/main/groovy/org/mockito/release/steps/DefaultReleaseSteps.java,26,step.perform();
True,buildSrc/src/main/groovy/org/mockito/release/steps/DefaultReleaseSteps.java,buildSrc/src/main/groovy/org/mockito/release/steps/DefaultReleaseSteps.java,27,} catch (Throwable t) {
True,buildSrc/src/main/groovy/org/mockito/release/steps/DefaultReleaseSteps.java,buildSrc/src/main/groovy/org/mockito/release/steps/DefaultReleaseSteps.java,28,rollback(attempted); //TODO SF what if rollback fails?
True,buildSrc/src/main/groovy/org/mockito/release/steps/DefaultReleaseSteps.java,buildSrc/src/main/groovy/org/mockito/release/steps/DefaultReleaseSteps.java,29,"throw new RuntimeException(""Release failed. Rollback was performed."", t);"
True,buildSrc/src/main/groovy/org/mockito/release/steps/DefaultReleaseSteps.java,buildSrc/src/main/groovy/org/mockito/release/steps/DefaultReleaseSteps.java,34,private static void rollback(List<ReleaseStep> attempted) {
True,buildSrc/src/main/groovy/org/mockito/release/steps/DefaultReleaseSteps.java,buildSrc/src/main/groovy/org/mockito/release/steps/DefaultReleaseSteps.java,35,"System.out.println(""Release failed. Rolling back "" + attempted.size() + "" release steps."");"
True,buildSrc/src/main/groovy/org/mockito/release/steps/DefaultReleaseSteps.java,buildSrc/src/main/groovy/org/mockito/release/steps/DefaultReleaseSteps.java,36,LinkedList<ReleaseStep> targets = new LinkedList<ReleaseStep>();
True,buildSrc/src/main/groovy/org/mockito/release/steps/DefaultReleaseSteps.java,buildSrc/src/main/groovy/org/mockito/release/steps/DefaultReleaseSteps.java,37,while(!targets.isEmpty()) {
True,buildSrc/src/main/groovy/org/mockito/release/steps/DefaultReleaseSteps.java,buildSrc/src/main/groovy/org/mockito/release/steps/DefaultReleaseSteps.java,38,ReleaseStep s = targets.removeLast();
True,buildSrc/src/main/groovy/org/mockito/release/steps/DefaultReleaseSteps.java,buildSrc/src/main/groovy/org/mockito/release/steps/DefaultReleaseSteps.java,39,Operation r = s.getRollback();
True,buildSrc/src/main/groovy/org/mockito/release/steps/DefaultReleaseSteps.java,buildSrc/src/main/groovy/org/mockito/release/steps/DefaultReleaseSteps.java,40,if (r != null) {
True,buildSrc/src/main/groovy/org/mockito/release/steps/DefaultReleaseSteps.java,buildSrc/src/main/groovy/org/mockito/release/steps/DefaultReleaseSteps.java,41,"System.out.println(""Rolling back step "" + (targets.size() + 1) + "" ("" + s.getDescription() + "")"");"
True,buildSrc/src/main/groovy/org/mockito/release/steps/DefaultReleaseSteps.java,buildSrc/src/main/groovy/org/mockito/release/steps/DefaultReleaseSteps.java,42,r.perform();
True,buildSrc/src/main/groovy/org/mockito/release/steps/DefaultReleaseSteps.java,buildSrc/src/main/groovy/org/mockito/release/steps/DefaultReleaseSteps.java,43,} else {
True,buildSrc/src/main/groovy/org/mockito/release/steps/DefaultReleaseSteps.java,buildSrc/src/main/groovy/org/mockito/release/steps/DefaultReleaseSteps.java,44,"System.out.println(""No rollback for step "" + (targets.size() + 1) + "" ("" + s.getDescription() + "")"");"
True,buildSrc/src/main/groovy/org/mockito/release/steps/ReleaseStep.java,buildSrc/src/main/groovy/org/mockito/release/steps/ReleaseStep.java,3,import groovy.lang.Closure;
True,buildSrc/src/main/groovy/org/mockito/release/steps/ReleaseStep.java,buildSrc/src/main/groovy/org/mockito/release/steps/ReleaseStep.java,10,void rollback(Closure closure); //TODO SF avoid leaking closure here as the release steps should be a java tool
True,buildSrc/src/main/groovy/org/mockito/release/steps/ReleaseStep.java,buildSrc/src/main/groovy/org/mockito/release/steps/ReleaseStep.java,12,Operation getRollback();
