Pushed out complexity to separate class

Moved the file reading handling to a separate class
