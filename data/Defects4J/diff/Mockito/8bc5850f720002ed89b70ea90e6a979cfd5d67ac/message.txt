issue 327 : replace HashSet by a safe set that don't use Mock hashCode and equals method as they might be unreliable if not stubbable. Created an internal collection utils package.
