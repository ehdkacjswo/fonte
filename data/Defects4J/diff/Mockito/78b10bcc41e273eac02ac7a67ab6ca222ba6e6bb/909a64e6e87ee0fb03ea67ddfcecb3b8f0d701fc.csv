is_addition,old_file_path,new_file_path,line_num,content
False,src/org/mockito/internal/MockitoState.java,src/org/mockito/internal/MockitoState.java,7,mport org.mockito.exceptions.*;
True,src/org/mockito/internal/MockitoState.java,src/org/mockito/internal/MockitoState.java,7,import org.mockito.exceptions.Exceptions;
False,src/org/mockito/internal/MockitoState.java,src/org/mockito/internal/MockitoState.java,12,/TODO this has to be thready singleton
False,src/org/mockito/internal/MockitoState.java,src/org/mockito/internal/MockitoState.java,13,/look how many synchronized stuff we can get rid off
False,src/org/mockito/internal/MockitoState.java,src/org/mockito/internal/MockitoState.java,14,rivate static MockitoState INSTANCE = new MockitoState();
False,src/org/mockito/internal/MockitoState.java,src/org/mockito/internal/MockitoState.java,16,rivate final ThreadLocal<MockControl> lastControl = new ThreadLocal<MockControl>();
False,src/org/mockito/internal/MockitoState.java,src/org/mockito/internal/MockitoState.java,17,rivate final ThreadLocal<VerifyingMode> verifyingModeLocal = new ThreadLocal<VerifyingMode>();
False,src/org/mockito/internal/MockitoState.java,src/org/mockito/internal/MockitoState.java,18,rivate final ThreadLocal<Integer> invocationSequenceNumber = new ThreadLocal<Integer>();
False,src/org/mockito/internal/MockitoState.java,src/org/mockito/internal/MockitoState.java,19,rivate final ThreadLocal<Object> stubbingModeLocal = new ThreadLocal<Object>();
True,src/org/mockito/internal/MockitoState.java,src/org/mockito/internal/MockitoState.java,12,private static ThreadLocal<MockitoState> INSTANCE = new ThreadLocal<MockitoState>();
True,src/org/mockito/internal/MockitoState.java,src/org/mockito/internal/MockitoState.java,14,private MockControl lastControl;
True,src/org/mockito/internal/MockitoState.java,src/org/mockito/internal/MockitoState.java,15,private VerifyingMode verifyingModeLocal;
True,src/org/mockito/internal/MockitoState.java,src/org/mockito/internal/MockitoState.java,16,private int invocationSequenceNumber = 1;
True,src/org/mockito/internal/MockitoState.java,src/org/mockito/internal/MockitoState.java,17,private boolean stubbingModeLocal = false;
False,src/org/mockito/internal/MockitoState.java,src/org/mockito/internal/MockitoState.java,21,ockitoState() {}
False,src/org/mockito/internal/MockitoState.java,src/org/mockito/internal/MockitoState.java,23,ublic static synchronized MockitoState instance() {
False,src/org/mockito/internal/MockitoState.java,src/org/mockito/internal/MockitoState.java,24,eturn INSTANCE;
True,src/org/mockito/internal/MockitoState.java,src/org/mockito/internal/MockitoState.java,19,public static MockitoState instance() {
True,src/org/mockito/internal/MockitoState.java,src/org/mockito/internal/MockitoState.java,20,if (INSTANCE.get() == null) {
True,src/org/mockito/internal/MockitoState.java,src/org/mockito/internal/MockitoState.java,21,INSTANCE.set(new MockitoState());
True,src/org/mockito/internal/MockitoState.java,src/org/mockito/internal/MockitoState.java,23,return INSTANCE.get();
False,src/org/mockito/internal/MockitoState.java,src/org/mockito/internal/MockitoState.java,27,ublic synchronized void reportControlForStubbing(MockControl mockControl) {
False,src/org/mockito/internal/MockitoState.java,src/org/mockito/internal/MockitoState.java,28,astControl.set(mockControl);
True,src/org/mockito/internal/MockitoState.java,src/org/mockito/internal/MockitoState.java,26,public void reportControlForStubbing(MockControl mockControl) {
True,src/org/mockito/internal/MockitoState.java,src/org/mockito/internal/MockitoState.java,27,lastControl = mockControl;
False,src/org/mockito/internal/MockitoState.java,src/org/mockito/internal/MockitoState.java,31,ublic synchronized MockitoExpectation pullControlToBeStubbed() {
False,src/org/mockito/internal/MockitoState.java,src/org/mockito/internal/MockitoState.java,32,ockControl control = lastControl.get();
False,src/org/mockito/internal/MockitoState.java,src/org/mockito/internal/MockitoState.java,33,astControl.set(null);
False,src/org/mockito/internal/MockitoState.java,src/org/mockito/internal/MockitoState.java,34,eturn control;
True,src/org/mockito/internal/MockitoState.java,src/org/mockito/internal/MockitoState.java,30,public MockitoExpectation pullControlToBeStubbed() {
True,src/org/mockito/internal/MockitoState.java,src/org/mockito/internal/MockitoState.java,31,MockControl temp = lastControl;
True,src/org/mockito/internal/MockitoState.java,src/org/mockito/internal/MockitoState.java,32,lastControl = null;
True,src/org/mockito/internal/MockitoState.java,src/org/mockito/internal/MockitoState.java,33,return temp;
False,src/org/mockito/internal/MockitoState.java,src/org/mockito/internal/MockitoState.java,37,ublic synchronized void verifyingStarted(VerifyingMode verify) {
True,src/org/mockito/internal/MockitoState.java,src/org/mockito/internal/MockitoState.java,36,public void verifyingStarted(VerifyingMode verify) {
False,src/org/mockito/internal/MockitoState.java,src/org/mockito/internal/MockitoState.java,39,erifyingModeLocal.set(verify);
True,src/org/mockito/internal/MockitoState.java,src/org/mockito/internal/MockitoState.java,38,verifyingModeLocal = verify;
False,src/org/mockito/internal/MockitoState.java,src/org/mockito/internal/MockitoState.java,42,ublic synchronized VerifyingMode pullVerifyingMode() {
False,src/org/mockito/internal/MockitoState.java,src/org/mockito/internal/MockitoState.java,43,erifyingMode verifyingMode = verifyingModeLocal.get();
False,src/org/mockito/internal/MockitoState.java,src/org/mockito/internal/MockitoState.java,44,erifyingModeLocal.set(null);
False,src/org/mockito/internal/MockitoState.java,src/org/mockito/internal/MockitoState.java,45,eturn verifyingMode;
True,src/org/mockito/internal/MockitoState.java,src/org/mockito/internal/MockitoState.java,41,public VerifyingMode pullVerifyingMode() {
True,src/org/mockito/internal/MockitoState.java,src/org/mockito/internal/MockitoState.java,42,VerifyingMode temp = verifyingModeLocal;
True,src/org/mockito/internal/MockitoState.java,src/org/mockito/internal/MockitoState.java,43,verifyingModeLocal = null;
True,src/org/mockito/internal/MockitoState.java,src/org/mockito/internal/MockitoState.java,44,return temp;
False,src/org/mockito/internal/MockitoState.java,src/org/mockito/internal/MockitoState.java,48,ublic synchronized int nextSequenceNumber() {
False,src/org/mockito/internal/MockitoState.java,src/org/mockito/internal/MockitoState.java,49,f (invocationSequenceNumber.get() == null) {
False,src/org/mockito/internal/MockitoState.java,src/org/mockito/internal/MockitoState.java,50,nvocationSequenceNumber.set(1);
False,src/org/mockito/internal/MockitoState.java,src/org/mockito/internal/MockitoState.java,51,eturn 1;
False,src/org/mockito/internal/MockitoState.java,src/org/mockito/internal/MockitoState.java,52, else {
False,src/org/mockito/internal/MockitoState.java,src/org/mockito/internal/MockitoState.java,53,nt next = invocationSequenceNumber.get() + 1;
False,src/org/mockito/internal/MockitoState.java,src/org/mockito/internal/MockitoState.java,54,nvocationSequenceNumber.set(next);
False,src/org/mockito/internal/MockitoState.java,src/org/mockito/internal/MockitoState.java,55,eturn next;
True,src/org/mockito/internal/MockitoState.java,src/org/mockito/internal/MockitoState.java,47,public int nextSequenceNumber() {
True,src/org/mockito/internal/MockitoState.java,src/org/mockito/internal/MockitoState.java,48,return invocationSequenceNumber++;
False,src/org/mockito/internal/MockitoState.java,src/org/mockito/internal/MockitoState.java,59,ublic synchronized void stubbingStarted() {
True,src/org/mockito/internal/MockitoState.java,src/org/mockito/internal/MockitoState.java,51,public void stubbingStarted() {
False,src/org/mockito/internal/MockitoState.java,src/org/mockito/internal/MockitoState.java,61,tubbingModeLocal.set(new Object());
True,src/org/mockito/internal/MockitoState.java,src/org/mockito/internal/MockitoState.java,53,stubbingModeLocal = true;
False,src/org/mockito/internal/MockitoState.java,src/org/mockito/internal/MockitoState.java,64,ublic synchronized void validateState() {
False,src/org/mockito/internal/MockitoState.java,src/org/mockito/internal/MockitoState.java,65,f (verifyingModeLocal.get() != null) {
False,src/org/mockito/internal/MockitoState.java,src/org/mockito/internal/MockitoState.java,66,erifyingModeLocal.set(null);
True,src/org/mockito/internal/MockitoState.java,src/org/mockito/internal/MockitoState.java,56,public void validateState() {
True,src/org/mockito/internal/MockitoState.java,src/org/mockito/internal/MockitoState.java,57,if (verifyingModeLocal != null) {
True,src/org/mockito/internal/MockitoState.java,src/org/mockito/internal/MockitoState.java,58,verifyingModeLocal = null;
False,src/org/mockito/internal/MockitoState.java,src/org/mockito/internal/MockitoState.java,70,f (stubbingModeLocal.get() != null) {
False,src/org/mockito/internal/MockitoState.java,src/org/mockito/internal/MockitoState.java,71,tubbingModeLocal.set(null);
True,src/org/mockito/internal/MockitoState.java,src/org/mockito/internal/MockitoState.java,62,if (stubbingModeLocal) {
True,src/org/mockito/internal/MockitoState.java,src/org/mockito/internal/MockitoState.java,63,stubbingModeLocal = false;
False,src/org/mockito/internal/MockitoState.java,src/org/mockito/internal/MockitoState.java,76,ublic synchronized void stubbingCompleted() {
False,src/org/mockito/internal/MockitoState.java,src/org/mockito/internal/MockitoState.java,77,tubbingModeLocal.set(null);
True,src/org/mockito/internal/MockitoState.java,src/org/mockito/internal/MockitoState.java,68,public void stubbingCompleted() {
True,src/org/mockito/internal/MockitoState.java,src/org/mockito/internal/MockitoState.java,69,stubbingModeLocal = false;
False,src/org/mockito/internal/MockitoState.java,src/org/mockito/internal/MockitoState.java,81,"eturn  ""lastControl: "" + lastControl.get() +"
False,src/org/mockito/internal/MockitoState.java,src/org/mockito/internal/MockitoState.java,82,", verifyingMode: "" + verifyingModeLocal.get() +"
False,src/org/mockito/internal/MockitoState.java,src/org/mockito/internal/MockitoState.java,83,", invocationSequenceNumber: "" + invocationSequenceNumber.get() +"
False,src/org/mockito/internal/MockitoState.java,src/org/mockito/internal/MockitoState.java,84,", stubbingModeLocal: "" + stubbingModeLocal.get();"
False,src/org/mockito/internal/MockitoState.java,src/org/mockito/internal/MockitoState.java,87,ynchronized static void setInstance(MockitoState mockitoState) {
False,src/org/mockito/internal/MockitoState.java,src/org/mockito/internal/MockitoState.java,88,NSTANCE = mockitoState;
True,src/org/mockito/internal/MockitoState.java,src/org/mockito/internal/MockitoState.java,73,"return  ""lastControl: "" + lastControl +"
True,src/org/mockito/internal/MockitoState.java,src/org/mockito/internal/MockitoState.java,74,""", verifyingMode: "" + verifyingModeLocal +"
True,src/org/mockito/internal/MockitoState.java,src/org/mockito/internal/MockitoState.java,75,""", invocationSequenceNumber: "" + invocationSequenceNumber +"
True,src/org/mockito/internal/MockitoState.java,src/org/mockito/internal/MockitoState.java,76,""", stubbingModeLocal: "" + stubbingModeLocal;"
False,src/org/mockito/internal/MockitoState.java,src/org/mockito/internal/MockitoState.java,92,tubbingModeLocal.set(null);
False,src/org/mockito/internal/MockitoState.java,src/org/mockito/internal/MockitoState.java,93,erifyingModeLocal.set(null);
False,src/org/mockito/internal/MockitoState.java,src/org/mockito/internal/MockitoState.java,94,nvocationSequenceNumber.set(null);
True,src/org/mockito/internal/MockitoState.java,src/org/mockito/internal/MockitoState.java,80,stubbingModeLocal = false;
True,src/org/mockito/internal/MockitoState.java,src/org/mockito/internal/MockitoState.java,81,verifyingModeLocal = null;
True,src/org/mockito/internal/MockitoState.java,src/org/mockito/internal/MockitoState.java,82,invocationSequenceNumber = 1;
True,test/org/mockitousage/MultiThreadedRun.java,test/org/mockitousage/MultiThreadedTest.java,2,import static org.junit.Assert.assertFalse;
True,test/org/mockitousage/MultiThreadedRun.java,test/org/mockitousage/MultiThreadedTest.java,6,import org.junit.Test;
False,test/org/mockitousage/MultiThreadedRun.java,test/org/mockitousage/MultiThreadedTest.java,17,ublic class MultiThreadedRun {
True,test/org/mockitousage/MultiThreadedRun.java,test/org/mockitousage/MultiThreadedTest.java,20,public class MultiThreadedTest {
False,test/org/mockitousage/MultiThreadedRun.java,test/org/mockitousage/MultiThreadedTest.java,19,rivate static class AllTestsRunner implements Runnable {
True,test/org/mockitousage/MultiThreadedRun.java,test/org/mockitousage/MultiThreadedTest.java,22,private static class AllTestsRunner extends Thread {
True,test/org/mockitousage/MultiThreadedRun.java,test/org/mockitousage/MultiThreadedTest.java,24,private boolean failed;
True,test/org/mockitousage/MultiThreadedRun.java,test/org/mockitousage/MultiThreadedTest.java,79,failed = true;
True,test/org/mockitousage/MultiThreadedRun.java,test/org/mockitousage/MultiThreadedTest.java,84,public boolean isFailed() {
True,test/org/mockitousage/MultiThreadedRun.java,test/org/mockitousage/MultiThreadedTest.java,85,return failed;
False,test/org/mockitousage/MultiThreadedRun.java,test/org/mockitousage/MultiThreadedTest.java,79,ublic static void main(String[] args) throws Exception {
False,test/org/mockitousage/MultiThreadedRun.java,test/org/mockitousage/MultiThreadedTest.java,80,ist<Thread> threads = new LinkedList<Thread>();
False,test/org/mockitousage/MultiThreadedRun.java,test/org/mockitousage/MultiThreadedTest.java,81,or(int i = 1 ; i <= 30 ; i++) {
False,test/org/mockitousage/MultiThreadedRun.java,test/org/mockitousage/MultiThreadedTest.java,82,hreads.add(new Thread(new AllTestsRunner()));
True,test/org/mockitousage/MultiThreadedRun.java,test/org/mockitousage/MultiThreadedTest.java,89,@Test
True,test/org/mockitousage/MultiThreadedRun.java,test/org/mockitousage/MultiThreadedTest.java,90,public void shouldRunInMultipleThreads() throws Exception {
True,test/org/mockitousage/MultiThreadedRun.java,test/org/mockitousage/MultiThreadedTest.java,91,"assertFalse(""Run in multiple thread failed"", runInMultipleThreads(4));"
True,test/org/mockitousage/MultiThreadedRun.java,test/org/mockitousage/MultiThreadedTest.java,94,public static boolean runInMultipleThreads(int numberOfThreads) throws Exception {
True,test/org/mockitousage/MultiThreadedRun.java,test/org/mockitousage/MultiThreadedTest.java,95,List<AllTestsRunner> threads = new LinkedList<AllTestsRunner>();
True,test/org/mockitousage/MultiThreadedRun.java,test/org/mockitousage/MultiThreadedTest.java,96,for(int i = 1 ; i <= numberOfThreads ; i++) {
True,test/org/mockitousage/MultiThreadedRun.java,test/org/mockitousage/MultiThreadedTest.java,97,threads.add(new AllTestsRunner());
False,test/org/mockitousage/MultiThreadedRun.java,test/org/mockitousage/MultiThreadedTest.java,89,or (Thread t : threads) {
True,test/org/mockitousage/MultiThreadedRun.java,test/org/mockitousage/MultiThreadedTest.java,104,boolean failed = false;
True,test/org/mockitousage/MultiThreadedRun.java,test/org/mockitousage/MultiThreadedTest.java,105,for (AllTestsRunner t : threads) {
True,test/org/mockitousage/MultiThreadedRun.java,test/org/mockitousage/MultiThreadedTest.java,107,failed = failed? true : t.isFailed();
False,test/org/mockitousage/MultiThreadedRun.java,test/org/mockitousage/MultiThreadedTest.java,93,"ystem.out.println(""Finished!"");"
True,test/org/mockitousage/MultiThreadedRun.java,test/org/mockitousage/MultiThreadedTest.java,110,return failed;
True,test/org/mockitousage/MultiThreadedRun.java,test/org/mockitousage/MultiThreadedTest.java,113,public static void main(String[] args) throws Exception {
True,test/org/mockitousage/MultiThreadedRun.java,test/org/mockitousage/MultiThreadedTest.java,114,int numberOfThreads = 100;
True,test/org/mockitousage/MultiThreadedRun.java,test/org/mockitousage/MultiThreadedTest.java,115,runInMultipleThreads(numberOfThreads);
True,test/org/mockitousage/MultiThreadedRun.java,test/org/mockitousage/MultiThreadedTest.java,117,"System.out.println(""Finished running tests in "" + numberOfThreads + "" threads"");"
