VersionUtil: fix fd leak in .versionFor()

If the resource was not null, the opened InputStreamReader was never closed.
Fix.

Create a separate private doReadVersion() method to avoid deeply nested
try/catch/finally blocks.
