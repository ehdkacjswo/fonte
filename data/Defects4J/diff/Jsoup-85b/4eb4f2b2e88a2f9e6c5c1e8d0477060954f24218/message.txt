Detect charset from xml prolog

Fixes #701
