Implemented a proper total duration timeout
