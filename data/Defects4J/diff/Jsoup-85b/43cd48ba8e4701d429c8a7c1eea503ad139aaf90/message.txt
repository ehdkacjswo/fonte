Tweaked mingfai's surrogate pair implementation for efficiency.

On the core cases where characters are not surrogate pairs, I've kept
to pushing chars around. This is to try and minimize the number of
short-lived String objects.
