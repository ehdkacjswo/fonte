Case-insensitive attribute setter (#903)

* Add failing test for updating attribute using differently-cased key

* Do case-insensitive key comparison when replacing attributes
