Tidied up interrupt check, added test case to make sure it works.
