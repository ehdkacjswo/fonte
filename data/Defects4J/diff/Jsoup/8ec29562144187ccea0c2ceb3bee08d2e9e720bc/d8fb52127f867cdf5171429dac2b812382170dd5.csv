is_addition,old_file_path,new_file_path,line_num,content
True,src/test/java/org/jsoup/integration/ConnectTest.java,src/test/java/org/jsoup/integration/ConnectTest.java,1,package org.jsoup.integration;
True,src/test/java/org/jsoup/integration/ConnectTest.java,src/test/java/org/jsoup/integration/ConnectTest.java,3,import org.jsoup.Jsoup;
True,src/test/java/org/jsoup/integration/ConnectTest.java,src/test/java/org/jsoup/integration/ConnectTest.java,4,import org.jsoup.integration.servlets.HelloServlet;
True,src/test/java/org/jsoup/integration/ConnectTest.java,src/test/java/org/jsoup/integration/ConnectTest.java,5,import org.jsoup.nodes.Document;
True,src/test/java/org/jsoup/integration/ConnectTest.java,src/test/java/org/jsoup/integration/ConnectTest.java,6,import org.jsoup.nodes.Element;
True,src/test/java/org/jsoup/integration/ConnectTest.java,src/test/java/org/jsoup/integration/ConnectTest.java,7,import org.junit.AfterClass;
True,src/test/java/org/jsoup/integration/ConnectTest.java,src/test/java/org/jsoup/integration/ConnectTest.java,8,import org.junit.BeforeClass;
True,src/test/java/org/jsoup/integration/ConnectTest.java,src/test/java/org/jsoup/integration/ConnectTest.java,9,import org.junit.Test;
True,src/test/java/org/jsoup/integration/ConnectTest.java,src/test/java/org/jsoup/integration/ConnectTest.java,11,import java.io.IOException;
True,src/test/java/org/jsoup/integration/ConnectTest.java,src/test/java/org/jsoup/integration/ConnectTest.java,13,import static org.junit.Assert.assertEquals;
True,src/test/java/org/jsoup/integration/ConnectTest.java,src/test/java/org/jsoup/integration/ConnectTest.java,15,public class ConnectTest {
True,src/test/java/org/jsoup/integration/ConnectTest.java,src/test/java/org/jsoup/integration/ConnectTest.java,17,@BeforeClass public static void setUp() throws Exception {
True,src/test/java/org/jsoup/integration/ConnectTest.java,src/test/java/org/jsoup/integration/ConnectTest.java,18,TestServer.start();
True,src/test/java/org/jsoup/integration/ConnectTest.java,src/test/java/org/jsoup/integration/ConnectTest.java,21,@AfterClass public static void tearDown() throws Exception {
True,src/test/java/org/jsoup/integration/ConnectTest.java,src/test/java/org/jsoup/integration/ConnectTest.java,22,TestServer.stop();
True,src/test/java/org/jsoup/integration/ConnectTest.java,src/test/java/org/jsoup/integration/ConnectTest.java,25,@Test public void canConnectToLocalServer() throws IOException {
True,src/test/java/org/jsoup/integration/ConnectTest.java,src/test/java/org/jsoup/integration/ConnectTest.java,26,String url = HelloServlet.Url;
True,src/test/java/org/jsoup/integration/ConnectTest.java,src/test/java/org/jsoup/integration/ConnectTest.java,27,Document doc = Jsoup.connect(url).get();
True,src/test/java/org/jsoup/integration/ConnectTest.java,src/test/java/org/jsoup/integration/ConnectTest.java,28,"Element p = doc.selectFirst(""p"");"
True,src/test/java/org/jsoup/integration/ConnectTest.java,src/test/java/org/jsoup/integration/ConnectTest.java,29,"assertEquals(""Hello, World!"", p.text());"
True,src/test/java/org/jsoup/integration/TestServer.java,src/test/java/org/jsoup/integration/TestServer.java,1,package org.jsoup.integration;
True,src/test/java/org/jsoup/integration/TestServer.java,src/test/java/org/jsoup/integration/TestServer.java,3,import org.eclipse.jetty.server.Server;
True,src/test/java/org/jsoup/integration/TestServer.java,src/test/java/org/jsoup/integration/TestServer.java,4,import org.eclipse.jetty.server.ServerConnector;
True,src/test/java/org/jsoup/integration/TestServer.java,src/test/java/org/jsoup/integration/TestServer.java,5,import org.eclipse.jetty.servlet.ServletHandler;
True,src/test/java/org/jsoup/integration/TestServer.java,src/test/java/org/jsoup/integration/TestServer.java,6,import org.jsoup.integration.servlets.BaseServlet;
True,src/test/java/org/jsoup/integration/TestServer.java,src/test/java/org/jsoup/integration/TestServer.java,8,import java.util.concurrent.atomic.AtomicInteger;
True,src/test/java/org/jsoup/integration/TestServer.java,src/test/java/org/jsoup/integration/TestServer.java,10,public class TestServer {
True,src/test/java/org/jsoup/integration/TestServer.java,src/test/java/org/jsoup/integration/TestServer.java,11,private static final Server jetty = new Server(0);
True,src/test/java/org/jsoup/integration/TestServer.java,src/test/java/org/jsoup/integration/TestServer.java,12,private static final ServletHandler handler = new ServletHandler();
True,src/test/java/org/jsoup/integration/TestServer.java,src/test/java/org/jsoup/integration/TestServer.java,13,private static AtomicInteger latch = new AtomicInteger(0);
True,src/test/java/org/jsoup/integration/TestServer.java,src/test/java/org/jsoup/integration/TestServer.java,15,static {
True,src/test/java/org/jsoup/integration/TestServer.java,src/test/java/org/jsoup/integration/TestServer.java,16,jetty.setHandler(handler);
True,src/test/java/org/jsoup/integration/TestServer.java,src/test/java/org/jsoup/integration/TestServer.java,17,start();
True,src/test/java/org/jsoup/integration/TestServer.java,src/test/java/org/jsoup/integration/TestServer.java,20,private TestServer() {
True,src/test/java/org/jsoup/integration/TestServer.java,src/test/java/org/jsoup/integration/TestServer.java,23,static void start() {
True,src/test/java/org/jsoup/integration/TestServer.java,src/test/java/org/jsoup/integration/TestServer.java,24,synchronized (jetty) {
True,src/test/java/org/jsoup/integration/TestServer.java,src/test/java/org/jsoup/integration/TestServer.java,25,int count = latch.getAndIncrement();
True,src/test/java/org/jsoup/integration/TestServer.java,src/test/java/org/jsoup/integration/TestServer.java,26,if (count == 0) {
True,src/test/java/org/jsoup/integration/TestServer.java,src/test/java/org/jsoup/integration/TestServer.java,27,try {
True,src/test/java/org/jsoup/integration/TestServer.java,src/test/java/org/jsoup/integration/TestServer.java,28,jetty.start();
True,src/test/java/org/jsoup/integration/TestServer.java,src/test/java/org/jsoup/integration/TestServer.java,29,} catch (Exception e) {
True,src/test/java/org/jsoup/integration/TestServer.java,src/test/java/org/jsoup/integration/TestServer.java,30,throw new IllegalStateException(e);
True,src/test/java/org/jsoup/integration/TestServer.java,src/test/java/org/jsoup/integration/TestServer.java,36,static void stop() {
True,src/test/java/org/jsoup/integration/TestServer.java,src/test/java/org/jsoup/integration/TestServer.java,37,synchronized (jetty) {
True,src/test/java/org/jsoup/integration/TestServer.java,src/test/java/org/jsoup/integration/TestServer.java,38,int count = latch.decrementAndGet();
True,src/test/java/org/jsoup/integration/TestServer.java,src/test/java/org/jsoup/integration/TestServer.java,39,if (count == 0) {
True,src/test/java/org/jsoup/integration/TestServer.java,src/test/java/org/jsoup/integration/TestServer.java,40,try {
True,src/test/java/org/jsoup/integration/TestServer.java,src/test/java/org/jsoup/integration/TestServer.java,41,jetty.stop();
True,src/test/java/org/jsoup/integration/TestServer.java,src/test/java/org/jsoup/integration/TestServer.java,42,} catch (Exception e) {
True,src/test/java/org/jsoup/integration/TestServer.java,src/test/java/org/jsoup/integration/TestServer.java,43,throw new IllegalStateException(e);
True,src/test/java/org/jsoup/integration/TestServer.java,src/test/java/org/jsoup/integration/TestServer.java,49,public static String map(Class<? extends BaseServlet> servletClass) {
True,src/test/java/org/jsoup/integration/TestServer.java,src/test/java/org/jsoup/integration/TestServer.java,50,synchronized (jetty) {
True,src/test/java/org/jsoup/integration/TestServer.java,src/test/java/org/jsoup/integration/TestServer.java,51,"String path = ""/"" + servletClass.getSimpleName();"
True,src/test/java/org/jsoup/integration/TestServer.java,src/test/java/org/jsoup/integration/TestServer.java,52,"handler.addServletWithMapping(servletClass, path);"
True,src/test/java/org/jsoup/integration/TestServer.java,src/test/java/org/jsoup/integration/TestServer.java,53,int port = ((ServerConnector) jetty.getConnectors()[0]).getLocalPort();
True,src/test/java/org/jsoup/integration/TestServer.java,src/test/java/org/jsoup/integration/TestServer.java,54,"return ""http://localhost:"" + port + path;"
True,src/test/java/org/jsoup/integration/servlets/BaseServlet.java,src/test/java/org/jsoup/integration/servlets/BaseServlet.java,1,package org.jsoup.integration.servlets;
True,src/test/java/org/jsoup/integration/servlets/BaseServlet.java,src/test/java/org/jsoup/integration/servlets/BaseServlet.java,3,import javax.servlet.ServletException;
True,src/test/java/org/jsoup/integration/servlets/BaseServlet.java,src/test/java/org/jsoup/integration/servlets/BaseServlet.java,4,import javax.servlet.http.HttpServlet;
True,src/test/java/org/jsoup/integration/servlets/BaseServlet.java,src/test/java/org/jsoup/integration/servlets/BaseServlet.java,5,import javax.servlet.http.HttpServletRequest;
True,src/test/java/org/jsoup/integration/servlets/BaseServlet.java,src/test/java/org/jsoup/integration/servlets/BaseServlet.java,6,import javax.servlet.http.HttpServletResponse;
True,src/test/java/org/jsoup/integration/servlets/BaseServlet.java,src/test/java/org/jsoup/integration/servlets/BaseServlet.java,7,import java.io.IOException;
True,src/test/java/org/jsoup/integration/servlets/BaseServlet.java,src/test/java/org/jsoup/integration/servlets/BaseServlet.java,9,public abstract class BaseServlet extends HttpServlet {
True,src/test/java/org/jsoup/integration/servlets/BaseServlet.java,src/test/java/org/jsoup/integration/servlets/BaseServlet.java,10,"static final String TextHtml = ""text/html"";"
True,src/test/java/org/jsoup/integration/servlets/BaseServlet.java,src/test/java/org/jsoup/integration/servlets/BaseServlet.java,12,@Override
True,src/test/java/org/jsoup/integration/servlets/BaseServlet.java,src/test/java/org/jsoup/integration/servlets/BaseServlet.java,13,"protected void doGet(HttpServletRequest req, HttpServletResponse res) throws ServletException, IOException {"
True,src/test/java/org/jsoup/integration/servlets/BaseServlet.java,src/test/java/org/jsoup/integration/servlets/BaseServlet.java,14,"super.doGet(req, res);"
True,src/test/java/org/jsoup/integration/servlets/HelloServlet.java,src/test/java/org/jsoup/integration/servlets/HelloServlet.java,1,package org.jsoup.integration.servlets;
True,src/test/java/org/jsoup/integration/servlets/HelloServlet.java,src/test/java/org/jsoup/integration/servlets/HelloServlet.java,3,import org.jsoup.integration.TestServer;
True,src/test/java/org/jsoup/integration/servlets/HelloServlet.java,src/test/java/org/jsoup/integration/servlets/HelloServlet.java,5,import javax.servlet.ServletException;
True,src/test/java/org/jsoup/integration/servlets/HelloServlet.java,src/test/java/org/jsoup/integration/servlets/HelloServlet.java,6,import javax.servlet.http.HttpServletRequest;
True,src/test/java/org/jsoup/integration/servlets/HelloServlet.java,src/test/java/org/jsoup/integration/servlets/HelloServlet.java,7,import javax.servlet.http.HttpServletResponse;
True,src/test/java/org/jsoup/integration/servlets/HelloServlet.java,src/test/java/org/jsoup/integration/servlets/HelloServlet.java,8,import java.io.IOException;
True,src/test/java/org/jsoup/integration/servlets/HelloServlet.java,src/test/java/org/jsoup/integration/servlets/HelloServlet.java,10,public class HelloServlet extends BaseServlet {
True,src/test/java/org/jsoup/integration/servlets/HelloServlet.java,src/test/java/org/jsoup/integration/servlets/HelloServlet.java,11,public static final String Url = TestServer.map(HelloServlet.class);
True,src/test/java/org/jsoup/integration/servlets/HelloServlet.java,src/test/java/org/jsoup/integration/servlets/HelloServlet.java,13,@Override
True,src/test/java/org/jsoup/integration/servlets/HelloServlet.java,src/test/java/org/jsoup/integration/servlets/HelloServlet.java,14,"protected void doGet(HttpServletRequest req, HttpServletResponse res) throws ServletException, IOException {"
True,src/test/java/org/jsoup/integration/servlets/HelloServlet.java,src/test/java/org/jsoup/integration/servlets/HelloServlet.java,15,res.setContentType(TextHtml);
True,src/test/java/org/jsoup/integration/servlets/HelloServlet.java,src/test/java/org/jsoup/integration/servlets/HelloServlet.java,16,res.setStatus(HttpServletResponse.SC_OK);
True,src/test/java/org/jsoup/integration/servlets/HelloServlet.java,src/test/java/org/jsoup/integration/servlets/HelloServlet.java,18,"String doc = ""<p>Hello, World!"";"
True,src/test/java/org/jsoup/integration/servlets/HelloServlet.java,src/test/java/org/jsoup/integration/servlets/HelloServlet.java,19,res.getWriter().write(doc);
