is_addition,old_file_path,new_file_path,line_num,content
True,src/main/java/org/jsoup/Connection.java,src/main/java/org/jsoup/Connection.java,8,import java.io.IOException;
False,src/main/java/org/jsoup/Connection.java,src/main/java/org/jsoup/Connection.java,39,ublic Document get();
True,src/main/java/org/jsoup/Connection.java,src/main/java/org/jsoup/Connection.java,40,public Document get() throws IOException;
False,src/main/java/org/jsoup/Connection.java,src/main/java/org/jsoup/Connection.java,41,ublic Document post();
True,src/main/java/org/jsoup/Connection.java,src/main/java/org/jsoup/Connection.java,42,public Document post() throws IOException;
False,src/main/java/org/jsoup/Connection.java,src/main/java/org/jsoup/Connection.java,43,ublic Response execute();
True,src/main/java/org/jsoup/Connection.java,src/main/java/org/jsoup/Connection.java,44,public Response execute() throws IOException;
True,src/main/java/org/jsoup/Connection.java,src/main/java/org/jsoup/Connection.java,101,public String statusMessage();
True,src/main/java/org/jsoup/Connection.java,src/main/java/org/jsoup/Connection.java,103,public String charset();
True,src/main/java/org/jsoup/Connection.java,src/main/java/org/jsoup/Connection.java,105,public Document parse();
True,src/main/java/org/jsoup/Jsoup.java,src/main/java/org/jsoup/Jsoup.java,7,import org.jsoup.helper.DataUtil;
True,src/main/java/org/jsoup/Jsoup.java,src/main/java/org/jsoup/Jsoup.java,8,import org.jsoup.helper.HttpConnection;
False,src/main/java/org/jsoup/Jsoup.java,src/main/java/org/jsoup/Jsoup.java,57,"eturn DataUtil.load(url, timeoutMillis);"
True,src/main/java/org/jsoup/Jsoup.java,src/main/java/org/jsoup/Jsoup.java,59,Connection con = HttpConnection.connect(url);
True,src/main/java/org/jsoup/Jsoup.java,src/main/java/org/jsoup/Jsoup.java,60,con.timeout(timeoutMillis / 1000);
True,src/main/java/org/jsoup/Jsoup.java,src/main/java/org/jsoup/Jsoup.java,61,return con.get();
True,src/main/java/org/jsoup/Jsoup.java,src/main/java/org/jsoup/Jsoup.java,64,public static Connection connect(String url) {
True,src/main/java/org/jsoup/Jsoup.java,src/main/java/org/jsoup/Jsoup.java,65,return HttpConnection.connect(url);
False,src/main/java/org/jsoup/DataUtil.java,src/main/java/org/jsoup/helper/DataUtil.java,1,ackage org.jsoup;
True,src/main/java/org/jsoup/DataUtil.java,src/main/java/org/jsoup/helper/DataUtil.java,1,package org.jsoup.helper;
False,src/main/java/org/jsoup/DataUtil.java,src/main/java/org/jsoup/helper/DataUtil.java,3,mport org.jsoup.helper.Validate;
True,src/main/java/org/jsoup/DataUtil.java,src/main/java/org/jsoup/helper/DataUtil.java,3,import org.jsoup.Jsoup;
False,src/main/java/org/jsoup/DataUtil.java,src/main/java/org/jsoup/helper/DataUtil.java,8,mport java.net.HttpURLConnection;
False,src/main/java/org/jsoup/DataUtil.java,src/main/java/org/jsoup/helper/DataUtil.java,9,mport java.net.URL;
False,src/main/java/org/jsoup/DataUtil.java,src/main/java/org/jsoup/helper/DataUtil.java,19,lass DataUtil {
True,src/main/java/org/jsoup/DataUtil.java,src/main/java/org/jsoup/helper/DataUtil.java,17,public class DataUtil {
False,src/main/java/org/jsoup/DataUtil.java,src/main/java/org/jsoup/helper/DataUtil.java,21,"rivate static final String defaultCharset = ""UTF-8""; // used if not found in header or meta charset"
True,src/main/java/org/jsoup/DataUtil.java,src/main/java/org/jsoup/helper/DataUtil.java,19,"static final String defaultCharset = ""UTF-8""; // used if not found in header or meta charset"
False,src/main/java/org/jsoup/DataUtil.java,src/main/java/org/jsoup/helper/DataUtil.java,31,"tatic Document load(File in, String charsetName, String baseUri) throws IOException {"
True,src/main/java/org/jsoup/DataUtil.java,src/main/java/org/jsoup/helper/DataUtil.java,29,"public static Document load(File in, String charsetName, String baseUri) throws IOException {"
False,src/main/java/org/jsoup/DataUtil.java,src/main/java/org/jsoup/helper/DataUtil.java,33,"ocument doc = readInputStream(inStream, charsetName, baseUri);"
False,src/main/java/org/jsoup/DataUtil.java,src/main/java/org/jsoup/helper/DataUtil.java,34,nStream.close();
False,src/main/java/org/jsoup/DataUtil.java,src/main/java/org/jsoup/helper/DataUtil.java,35,eturn doc;
False,src/main/java/org/jsoup/DataUtil.java,src/main/java/org/jsoup/helper/DataUtil.java,39,etches a URL and gets as a string.
False,src/main/java/org/jsoup/DataUtil.java,src/main/java/org/jsoup/helper/DataUtil.java,40,param url
False,src/main/java/org/jsoup/DataUtil.java,src/main/java/org/jsoup/helper/DataUtil.java,41,param timeoutMillis
False,src/main/java/org/jsoup/DataUtil.java,src/main/java/org/jsoup/helper/DataUtil.java,42,return
False,src/main/java/org/jsoup/DataUtil.java,src/main/java/org/jsoup/helper/DataUtil.java,43,throws IOException
False,src/main/java/org/jsoup/DataUtil.java,src/main/java/org/jsoup/helper/DataUtil.java,45,"tatic Document load(URL url, int timeoutMillis) throws IOException {"
False,src/main/java/org/jsoup/DataUtil.java,src/main/java/org/jsoup/helper/DataUtil.java,46,tring protocol = url.getProtocol();
False,src/main/java/org/jsoup/DataUtil.java,src/main/java/org/jsoup/helper/DataUtil.java,47,"alidate.isTrue(protocol.equals(""http"") || protocol.equals(""https""), ""Only http & https protocols supported"");"
False,src/main/java/org/jsoup/DataUtil.java,src/main/java/org/jsoup/helper/DataUtil.java,49,ttpURLConnection conn = (HttpURLConnection) url.openConnection();
False,src/main/java/org/jsoup/DataUtil.java,src/main/java/org/jsoup/helper/DataUtil.java,50,onn.setInstanceFollowRedirects(true);
False,src/main/java/org/jsoup/DataUtil.java,src/main/java/org/jsoup/helper/DataUtil.java,51,onn.setConnectTimeout(timeoutMillis);
False,src/main/java/org/jsoup/DataUtil.java,src/main/java/org/jsoup/helper/DataUtil.java,52,onn.setReadTimeout(timeoutMillis);
False,src/main/java/org/jsoup/DataUtil.java,src/main/java/org/jsoup/helper/DataUtil.java,53,onn.connect();
False,src/main/java/org/jsoup/DataUtil.java,src/main/java/org/jsoup/helper/DataUtil.java,55,nt res = conn.getResponseCode();
False,src/main/java/org/jsoup/DataUtil.java,src/main/java/org/jsoup/helper/DataUtil.java,56,f (res != HttpURLConnection.HTTP_OK)
False,src/main/java/org/jsoup/DataUtil.java,src/main/java/org/jsoup/helper/DataUtil.java,57,"hrow new IOException(res + "" error loading URL "" + url.toString());"
False,src/main/java/org/jsoup/DataUtil.java,src/main/java/org/jsoup/helper/DataUtil.java,59,tring contentType = conn.getContentType();
False,src/main/java/org/jsoup/DataUtil.java,src/main/java/org/jsoup/helper/DataUtil.java,60,"f (contentType == null || !contentType.startsWith(""text/""))"
False,src/main/java/org/jsoup/DataUtil.java,src/main/java/org/jsoup/helper/DataUtil.java,61,"hrow new IOException(String.format(""Unhandled content type \""%s\"" on URL %s. Must be text/*"","
False,src/main/java/org/jsoup/DataUtil.java,src/main/java/org/jsoup/helper/DataUtil.java,62,"ontentType, url.toString()));"
False,src/main/java/org/jsoup/DataUtil.java,src/main/java/org/jsoup/helper/DataUtil.java,64,nputStream inStream = new BufferedInputStream(conn.getInputStream());
False,src/main/java/org/jsoup/DataUtil.java,src/main/java/org/jsoup/helper/DataUtil.java,65,"tring charSet = getCharsetFromContentType(contentType); // may be null, readInputStream deals with it"
False,src/main/java/org/jsoup/DataUtil.java,src/main/java/org/jsoup/helper/DataUtil.java,67,"ocument doc = readInputStream(inStream, charSet, url.toExternalForm());"
True,src/main/java/org/jsoup/DataUtil.java,src/main/java/org/jsoup/helper/DataUtil.java,31,ByteBuffer byteData = readToByteBuffer(inStream);
True,src/main/java/org/jsoup/DataUtil.java,src/main/java/org/jsoup/helper/DataUtil.java,32,"Document doc = parseByteData(byteData, charsetName, baseUri);"
False,src/main/java/org/jsoup/DataUtil.java,src/main/java/org/jsoup/helper/DataUtil.java,74,"rivate static Document readInputStream(InputStream inStream, String charsetName, String baseUri) throws IOException {"
False,src/main/java/org/jsoup/DataUtil.java,src/main/java/org/jsoup/helper/DataUtil.java,75,yte[] buffer = new byte[bufferSize];
False,src/main/java/org/jsoup/DataUtil.java,src/main/java/org/jsoup/helper/DataUtil.java,76,yteArrayOutputStream outStream = new ByteArrayOutputStream(bufferSize);
False,src/main/java/org/jsoup/DataUtil.java,src/main/java/org/jsoup/helper/DataUtil.java,77,nt read;
False,src/main/java/org/jsoup/DataUtil.java,src/main/java/org/jsoup/helper/DataUtil.java,78,hile(true) {
False,src/main/java/org/jsoup/DataUtil.java,src/main/java/org/jsoup/helper/DataUtil.java,79,ead  = inStream.read(buffer);
False,src/main/java/org/jsoup/DataUtil.java,src/main/java/org/jsoup/helper/DataUtil.java,80,f (read == -1) break;
False,src/main/java/org/jsoup/DataUtil.java,src/main/java/org/jsoup/helper/DataUtil.java,81,"utStream.write(buffer, 0, read);"
False,src/main/java/org/jsoup/DataUtil.java,src/main/java/org/jsoup/helper/DataUtil.java,83,yteBuffer byteData = ByteBuffer.wrap(outStream.toByteArray());
True,src/main/java/org/jsoup/DataUtil.java,src/main/java/org/jsoup/helper/DataUtil.java,39,"static Document parseByteData(ByteBuffer byteData, String charsetName, String baseUri) {"
True,src/main/java/org/jsoup/DataUtil.java,src/main/java/org/jsoup/helper/DataUtil.java,66,static ByteBuffer readToByteBuffer(InputStream inStream) throws IOException {
True,src/main/java/org/jsoup/DataUtil.java,src/main/java/org/jsoup/helper/DataUtil.java,67,byte[] buffer = new byte[bufferSize];
True,src/main/java/org/jsoup/DataUtil.java,src/main/java/org/jsoup/helper/DataUtil.java,68,ByteArrayOutputStream outStream = new ByteArrayOutputStream(bufferSize);
True,src/main/java/org/jsoup/DataUtil.java,src/main/java/org/jsoup/helper/DataUtil.java,69,int read;
True,src/main/java/org/jsoup/DataUtil.java,src/main/java/org/jsoup/helper/DataUtil.java,70,while(true) {
True,src/main/java/org/jsoup/DataUtil.java,src/main/java/org/jsoup/helper/DataUtil.java,71,read  = inStream.read(buffer);
True,src/main/java/org/jsoup/DataUtil.java,src/main/java/org/jsoup/helper/DataUtil.java,72,if (read == -1) break;
True,src/main/java/org/jsoup/DataUtil.java,src/main/java/org/jsoup/helper/DataUtil.java,73,"outStream.write(buffer, 0, read);"
True,src/main/java/org/jsoup/DataUtil.java,src/main/java/org/jsoup/helper/DataUtil.java,75,ByteBuffer byteData = ByteBuffer.wrap(outStream.toByteArray());
True,src/main/java/org/jsoup/DataUtil.java,src/main/java/org/jsoup/helper/DataUtil.java,76,return byteData;
True,src/main/java/org/jsoup/helper/HttpConnection.java,src/main/java/org/jsoup/helper/HttpConnection.java,5,import org.jsoup.parser.TokenQueue;
True,src/main/java/org/jsoup/helper/HttpConnection.java,src/main/java/org/jsoup/helper/HttpConnection.java,7,import java.io.BufferedInputStream;
True,src/main/java/org/jsoup/helper/HttpConnection.java,src/main/java/org/jsoup/helper/HttpConnection.java,8,import java.io.IOException;
True,src/main/java/org/jsoup/helper/HttpConnection.java,src/main/java/org/jsoup/helper/HttpConnection.java,9,import java.io.InputStream;
True,src/main/java/org/jsoup/helper/HttpConnection.java,src/main/java/org/jsoup/helper/HttpConnection.java,10,import java.net.HttpURLConnection;
False,src/main/java/org/jsoup/helper/HttpConnection.java,src/main/java/org/jsoup/helper/HttpConnection.java,8,mport java.util.LinkedHashMap;
False,src/main/java/org/jsoup/helper/HttpConnection.java,src/main/java/org/jsoup/helper/HttpConnection.java,9,mport java.util.Map;
False,src/main/java/org/jsoup/helper/HttpConnection.java,src/main/java/org/jsoup/helper/HttpConnection.java,10,mport java.util.Collection;
False,src/main/java/org/jsoup/helper/HttpConnection.java,src/main/java/org/jsoup/helper/HttpConnection.java,11,mport java.util.ArrayList;
False,src/main/java/org/jsoup/helper/HttpConnection.java,src/main/java/org/jsoup/helper/HttpConnection.java,14, DRAFT implementation of Connection.
True,src/main/java/org/jsoup/helper/HttpConnection.java,src/main/java/org/jsoup/helper/HttpConnection.java,13,import java.nio.ByteBuffer;
True,src/main/java/org/jsoup/helper/HttpConnection.java,src/main/java/org/jsoup/helper/HttpConnection.java,14,import java.nio.charset.Charset;
True,src/main/java/org/jsoup/helper/HttpConnection.java,src/main/java/org/jsoup/helper/HttpConnection.java,15,import java.util.*;
True,src/main/java/org/jsoup/helper/HttpConnection.java,src/main/java/org/jsoup/helper/HttpConnection.java,16,import java.util.regex.Matcher;
True,src/main/java/org/jsoup/helper/HttpConnection.java,src/main/java/org/jsoup/helper/HttpConnection.java,17,import java.util.regex.Pattern;
True,src/main/java/org/jsoup/helper/HttpConnection.java,src/main/java/org/jsoup/helper/HttpConnection.java,19,/** DRAFT implementation of Connection. */
True,src/main/java/org/jsoup/helper/HttpConnection.java,src/main/java/org/jsoup/helper/HttpConnection.java,21,"private static final Pattern charsetPattern = Pattern.compile(""(?i)\\bcharset=([^\\s;]*)"");"
True,src/main/java/org/jsoup/helper/HttpConnection.java,src/main/java/org/jsoup/helper/HttpConnection.java,23,public static Connection connect(String url) {
True,src/main/java/org/jsoup/helper/HttpConnection.java,src/main/java/org/jsoup/helper/HttpConnection.java,24,Connection con = new HttpConnection();
True,src/main/java/org/jsoup/helper/HttpConnection.java,src/main/java/org/jsoup/helper/HttpConnection.java,25,con.url(url);
True,src/main/java/org/jsoup/helper/HttpConnection.java,src/main/java/org/jsoup/helper/HttpConnection.java,26,return con;
True,src/main/java/org/jsoup/helper/HttpConnection.java,src/main/java/org/jsoup/helper/HttpConnection.java,29,public static Connection connect(URL url) {
True,src/main/java/org/jsoup/helper/HttpConnection.java,src/main/java/org/jsoup/helper/HttpConnection.java,30,Connection con = new HttpConnection();
True,src/main/java/org/jsoup/helper/HttpConnection.java,src/main/java/org/jsoup/helper/HttpConnection.java,31,con.url(url);
True,src/main/java/org/jsoup/helper/HttpConnection.java,src/main/java/org/jsoup/helper/HttpConnection.java,32,return con;
False,src/main/java/org/jsoup/helper/HttpConnection.java,src/main/java/org/jsoup/helper/HttpConnection.java,72,or (int i = 0; i < keyvals.length; i+=2) {
False,src/main/java/org/jsoup/helper/HttpConnection.java,src/main/java/org/jsoup/helper/HttpConnection.java,73,"eq.data(KeyVal.create(keyvals[i], keyvals[i+1]));"
True,src/main/java/org/jsoup/helper/HttpConnection.java,src/main/java/org/jsoup/helper/HttpConnection.java,90,for (int i = 0; i < keyvals.length; i += 2) {
True,src/main/java/org/jsoup/helper/HttpConnection.java,src/main/java/org/jsoup/helper/HttpConnection.java,91,"req.data(KeyVal.create(keyvals[i], keyvals[i + 1]));"
False,src/main/java/org/jsoup/helper/HttpConnection.java,src/main/java/org/jsoup/helper/HttpConnection.java,88,ublic Document get() {
True,src/main/java/org/jsoup/helper/HttpConnection.java,src/main/java/org/jsoup/helper/HttpConnection.java,106,public Document get() throws IOException {
False,src/main/java/org/jsoup/helper/HttpConnection.java,src/main/java/org/jsoup/helper/HttpConnection.java,91,/ todo: parse for doc
False,src/main/java/org/jsoup/helper/HttpConnection.java,src/main/java/org/jsoup/helper/HttpConnection.java,92,eturn null;
True,src/main/java/org/jsoup/helper/HttpConnection.java,src/main/java/org/jsoup/helper/HttpConnection.java,109,return res.parse();
False,src/main/java/org/jsoup/helper/HttpConnection.java,src/main/java/org/jsoup/helper/HttpConnection.java,95,ublic Document post() {
True,src/main/java/org/jsoup/helper/HttpConnection.java,src/main/java/org/jsoup/helper/HttpConnection.java,112,public Document post() throws IOException {
False,src/main/java/org/jsoup/helper/HttpConnection.java,src/main/java/org/jsoup/helper/HttpConnection.java,98,/ todo: parse for doc
False,src/main/java/org/jsoup/helper/HttpConnection.java,src/main/java/org/jsoup/helper/HttpConnection.java,99,eturn null;
True,src/main/java/org/jsoup/helper/HttpConnection.java,src/main/java/org/jsoup/helper/HttpConnection.java,115,return res.parse();
False,src/main/java/org/jsoup/helper/HttpConnection.java,src/main/java/org/jsoup/helper/HttpConnection.java,102,ublic Connection.Response execute() {
False,src/main/java/org/jsoup/helper/HttpConnection.java,src/main/java/org/jsoup/helper/HttpConnection.java,103,/ todo: execute
True,src/main/java/org/jsoup/helper/HttpConnection.java,src/main/java/org/jsoup/helper/HttpConnection.java,118,public Connection.Response execute() throws IOException {
True,src/main/java/org/jsoup/helper/HttpConnection.java,src/main/java/org/jsoup/helper/HttpConnection.java,119,res = Response.execute(req);
False,src/main/java/org/jsoup/helper/HttpConnection.java,src/main/java/org/jsoup/helper/HttpConnection.java,127,rivate URL url;
False,src/main/java/org/jsoup/helper/HttpConnection.java,src/main/java/org/jsoup/helper/HttpConnection.java,128,rivate Method method;
False,src/main/java/org/jsoup/helper/HttpConnection.java,src/main/java/org/jsoup/helper/HttpConnection.java,129,"rivate Map<String, String> headers;"
False,src/main/java/org/jsoup/helper/HttpConnection.java,src/main/java/org/jsoup/helper/HttpConnection.java,130,"rivate Map<String, String> cookies;"
True,src/main/java/org/jsoup/helper/HttpConnection.java,src/main/java/org/jsoup/helper/HttpConnection.java,143,URL url;
True,src/main/java/org/jsoup/helper/HttpConnection.java,src/main/java/org/jsoup/helper/HttpConnection.java,144,Method method;
True,src/main/java/org/jsoup/helper/HttpConnection.java,src/main/java/org/jsoup/helper/HttpConnection.java,145,"Map<String, String> headers;"
True,src/main/java/org/jsoup/helper/HttpConnection.java,src/main/java/org/jsoup/helper/HttpConnection.java,146,"Map<String, String> cookies;"
True,src/main/java/org/jsoup/helper/HttpConnection.java,src/main/java/org/jsoup/helper/HttpConnection.java,222,method = Connection.Method.GET;
True,src/main/java/org/jsoup/helper/HttpConnection.java,src/main/java/org/jsoup/helper/HttpConnection.java,246,private String statusMessage;
True,src/main/java/org/jsoup/helper/HttpConnection.java,src/main/java/org/jsoup/helper/HttpConnection.java,247,private ByteBuffer byteData;
True,src/main/java/org/jsoup/helper/HttpConnection.java,src/main/java/org/jsoup/helper/HttpConnection.java,248,private String charset;
True,src/main/java/org/jsoup/helper/HttpConnection.java,src/main/java/org/jsoup/helper/HttpConnection.java,250,static Response execute(Connection.Request req) throws IOException {
True,src/main/java/org/jsoup/helper/HttpConnection.java,src/main/java/org/jsoup/helper/HttpConnection.java,251,URL url = req.url();
True,src/main/java/org/jsoup/helper/HttpConnection.java,src/main/java/org/jsoup/helper/HttpConnection.java,252,String protocol = url.getProtocol();
True,src/main/java/org/jsoup/helper/HttpConnection.java,src/main/java/org/jsoup/helper/HttpConnection.java,253,Validate
True,src/main/java/org/jsoup/helper/HttpConnection.java,src/main/java/org/jsoup/helper/HttpConnection.java,254,".isTrue(protocol.equals(""http"") || protocol.equals(""https""), ""Only http & https protocols supported"");"
True,src/main/java/org/jsoup/helper/HttpConnection.java,src/main/java/org/jsoup/helper/HttpConnection.java,256,HttpURLConnection conn = (HttpURLConnection) url.openConnection();
True,src/main/java/org/jsoup/helper/HttpConnection.java,src/main/java/org/jsoup/helper/HttpConnection.java,257,conn.setRequestMethod(req.method().name());
True,src/main/java/org/jsoup/helper/HttpConnection.java,src/main/java/org/jsoup/helper/HttpConnection.java,258,conn.setInstanceFollowRedirects(true);
True,src/main/java/org/jsoup/helper/HttpConnection.java,src/main/java/org/jsoup/helper/HttpConnection.java,259,conn.setConnectTimeout(req.timeout() * 1000);
True,src/main/java/org/jsoup/helper/HttpConnection.java,src/main/java/org/jsoup/helper/HttpConnection.java,260,conn.setReadTimeout(req.timeout() * 1000);
True,src/main/java/org/jsoup/helper/HttpConnection.java,src/main/java/org/jsoup/helper/HttpConnection.java,261,"// todo: handle get params not in url, and post params"
True,src/main/java/org/jsoup/helper/HttpConnection.java,src/main/java/org/jsoup/helper/HttpConnection.java,262,conn.connect();
True,src/main/java/org/jsoup/helper/HttpConnection.java,src/main/java/org/jsoup/helper/HttpConnection.java,264,"// todo: error handling options, allow user to get !200 without exception"
True,src/main/java/org/jsoup/helper/HttpConnection.java,src/main/java/org/jsoup/helper/HttpConnection.java,265,int status = conn.getResponseCode();
True,src/main/java/org/jsoup/helper/HttpConnection.java,src/main/java/org/jsoup/helper/HttpConnection.java,266,if (status != HttpURLConnection.HTTP_OK)
True,src/main/java/org/jsoup/helper/HttpConnection.java,src/main/java/org/jsoup/helper/HttpConnection.java,267,"throw new IOException(status + "" error loading URL "" + url.toString());"
True,src/main/java/org/jsoup/helper/HttpConnection.java,src/main/java/org/jsoup/helper/HttpConnection.java,268,Response res = new Response();
True,src/main/java/org/jsoup/helper/HttpConnection.java,src/main/java/org/jsoup/helper/HttpConnection.java,269,res.setupFromConnection(conn);
True,src/main/java/org/jsoup/helper/HttpConnection.java,src/main/java/org/jsoup/helper/HttpConnection.java,271,// todo: move to parse
True,src/main/java/org/jsoup/helper/HttpConnection.java,src/main/java/org/jsoup/helper/HttpConnection.java,272,String contentType = conn.getContentType();
True,src/main/java/org/jsoup/helper/HttpConnection.java,src/main/java/org/jsoup/helper/HttpConnection.java,273,"if (contentType == null || !contentType.startsWith(""text/""))"
True,src/main/java/org/jsoup/helper/HttpConnection.java,src/main/java/org/jsoup/helper/HttpConnection.java,274,"throw new IOException(String.format(""Unhandled content type \""%s\"" on URL %s. Must be text/*"","
True,src/main/java/org/jsoup/helper/HttpConnection.java,src/main/java/org/jsoup/helper/HttpConnection.java,275,"contentType, url.toString()));"
True,src/main/java/org/jsoup/helper/HttpConnection.java,src/main/java/org/jsoup/helper/HttpConnection.java,277,InputStream inStream = new BufferedInputStream(conn.getInputStream());
True,src/main/java/org/jsoup/helper/HttpConnection.java,src/main/java/org/jsoup/helper/HttpConnection.java,278,res.byteData = DataUtil.readToByteBuffer(inStream);
True,src/main/java/org/jsoup/helper/HttpConnection.java,src/main/java/org/jsoup/helper/HttpConnection.java,279,"res.charset = getCharsetFromContentType(contentType); // may be null, readInputStream deals with it"
True,src/main/java/org/jsoup/helper/HttpConnection.java,src/main/java/org/jsoup/helper/HttpConnection.java,280,inStream.close();
True,src/main/java/org/jsoup/helper/HttpConnection.java,src/main/java/org/jsoup/helper/HttpConnection.java,282,return res;
True,src/main/java/org/jsoup/helper/HttpConnection.java,src/main/java/org/jsoup/helper/HttpConnection.java,289,public String statusMessage() {
True,src/main/java/org/jsoup/helper/HttpConnection.java,src/main/java/org/jsoup/helper/HttpConnection.java,290,return statusMessage;
True,src/main/java/org/jsoup/helper/HttpConnection.java,src/main/java/org/jsoup/helper/HttpConnection.java,293,public String charset() {
True,src/main/java/org/jsoup/helper/HttpConnection.java,src/main/java/org/jsoup/helper/HttpConnection.java,294,return charset;
True,src/main/java/org/jsoup/helper/HttpConnection.java,src/main/java/org/jsoup/helper/HttpConnection.java,297,public Document parse() {
True,src/main/java/org/jsoup/helper/HttpConnection.java,src/main/java/org/jsoup/helper/HttpConnection.java,298,"Document doc = DataUtil.parseByteData(byteData, charset, url.toExternalForm());"
True,src/main/java/org/jsoup/helper/HttpConnection.java,src/main/java/org/jsoup/helper/HttpConnection.java,299,byteData.rewind();
True,src/main/java/org/jsoup/helper/HttpConnection.java,src/main/java/org/jsoup/helper/HttpConnection.java,300,"charset = doc.outputSettings().charset().name(); // update charset from meta-equiv, possibly"
True,src/main/java/org/jsoup/helper/HttpConnection.java,src/main/java/org/jsoup/helper/HttpConnection.java,301,return doc;
False,src/main/java/org/jsoup/helper/HttpConnection.java,src/main/java/org/jsoup/helper/HttpConnection.java,235,eturn null;
True,src/main/java/org/jsoup/helper/HttpConnection.java,src/main/java/org/jsoup/helper/HttpConnection.java,305,"// gets set from header on execute, and from meta-equiv on parse. parse may not have happened yet"
True,src/main/java/org/jsoup/helper/HttpConnection.java,src/main/java/org/jsoup/helper/HttpConnection.java,306,String body;
True,src/main/java/org/jsoup/helper/HttpConnection.java,src/main/java/org/jsoup/helper/HttpConnection.java,307,if (charset == null)
True,src/main/java/org/jsoup/helper/HttpConnection.java,src/main/java/org/jsoup/helper/HttpConnection.java,308,body = Charset.forName(DataUtil.defaultCharset).decode(byteData).toString();
True,src/main/java/org/jsoup/helper/HttpConnection.java,src/main/java/org/jsoup/helper/HttpConnection.java,309,else
True,src/main/java/org/jsoup/helper/HttpConnection.java,src/main/java/org/jsoup/helper/HttpConnection.java,310,body = Charset.forName(charset).decode(byteData).toString();
True,src/main/java/org/jsoup/helper/HttpConnection.java,src/main/java/org/jsoup/helper/HttpConnection.java,311,byteData.rewind();
True,src/main/java/org/jsoup/helper/HttpConnection.java,src/main/java/org/jsoup/helper/HttpConnection.java,312,return body;
False,src/main/java/org/jsoup/helper/HttpConnection.java,src/main/java/org/jsoup/helper/HttpConnection.java,239,eturn new byte[0];
True,src/main/java/org/jsoup/helper/HttpConnection.java,src/main/java/org/jsoup/helper/HttpConnection.java,316,return byteData.array();
True,src/main/java/org/jsoup/helper/HttpConnection.java,src/main/java/org/jsoup/helper/HttpConnection.java,319,"// set up url, method, header, cookies"
True,src/main/java/org/jsoup/helper/HttpConnection.java,src/main/java/org/jsoup/helper/HttpConnection.java,320,private void setupFromConnection(HttpURLConnection conn) throws IOException {
True,src/main/java/org/jsoup/helper/HttpConnection.java,src/main/java/org/jsoup/helper/HttpConnection.java,321,method = Connection.Method.valueOf(conn.getRequestMethod());
True,src/main/java/org/jsoup/helper/HttpConnection.java,src/main/java/org/jsoup/helper/HttpConnection.java,322,url = conn.getURL();
True,src/main/java/org/jsoup/helper/HttpConnection.java,src/main/java/org/jsoup/helper/HttpConnection.java,323,statusCode = conn.getResponseCode();
True,src/main/java/org/jsoup/helper/HttpConnection.java,src/main/java/org/jsoup/helper/HttpConnection.java,324,statusMessage = conn.getResponseMessage();
True,src/main/java/org/jsoup/helper/HttpConnection.java,src/main/java/org/jsoup/helper/HttpConnection.java,326,"Map<String, List<String>> resHeaders = conn.getHeaderFields();"
True,src/main/java/org/jsoup/helper/HttpConnection.java,src/main/java/org/jsoup/helper/HttpConnection.java,327,"for (Map.Entry<String, List<String>> entry : resHeaders.entrySet()) {"
True,src/main/java/org/jsoup/helper/HttpConnection.java,src/main/java/org/jsoup/helper/HttpConnection.java,328,String name = entry.getKey();
True,src/main/java/org/jsoup/helper/HttpConnection.java,src/main/java/org/jsoup/helper/HttpConnection.java,329,if (name == null)
True,src/main/java/org/jsoup/helper/HttpConnection.java,src/main/java/org/jsoup/helper/HttpConnection.java,330,continue; // http/1.1 line
True,src/main/java/org/jsoup/helper/HttpConnection.java,src/main/java/org/jsoup/helper/HttpConnection.java,332,List<String> values = entry.getValue();
True,src/main/java/org/jsoup/helper/HttpConnection.java,src/main/java/org/jsoup/helper/HttpConnection.java,334,"if (name.equals(""Set-Cookie"")) {"
True,src/main/java/org/jsoup/helper/HttpConnection.java,src/main/java/org/jsoup/helper/HttpConnection.java,335,for (String value : values) {
True,src/main/java/org/jsoup/helper/HttpConnection.java,src/main/java/org/jsoup/helper/HttpConnection.java,336,TokenQueue cd = new TokenQueue(value);
True,src/main/java/org/jsoup/helper/HttpConnection.java,src/main/java/org/jsoup/helper/HttpConnection.java,337,"String cookieName = cd.chompTo(""="").trim();"
True,src/main/java/org/jsoup/helper/HttpConnection.java,src/main/java/org/jsoup/helper/HttpConnection.java,338,"String cookieVal = cd.consumeTo("";"").trim();"
True,src/main/java/org/jsoup/helper/HttpConnection.java,src/main/java/org/jsoup/helper/HttpConnection.java,339,"// ignores path, date, domain, secure et al. req'd?"
True,src/main/java/org/jsoup/helper/HttpConnection.java,src/main/java/org/jsoup/helper/HttpConnection.java,340,"cookie(cookieName, cookieVal);"
True,src/main/java/org/jsoup/helper/HttpConnection.java,src/main/java/org/jsoup/helper/HttpConnection.java,342,} else { // only take the first instance of each header
True,src/main/java/org/jsoup/helper/HttpConnection.java,src/main/java/org/jsoup/helper/HttpConnection.java,343,"header(name, values.get(0));"
True,src/main/java/org/jsoup/helper/HttpConnection.java,src/main/java/org/jsoup/helper/HttpConnection.java,382,* Parse out a charset from a content type header.
True,src/main/java/org/jsoup/helper/HttpConnection.java,src/main/java/org/jsoup/helper/HttpConnection.java,384,"* @param contentType e.g. ""text/html; charset=EUC-JP"""
True,src/main/java/org/jsoup/helper/HttpConnection.java,src/main/java/org/jsoup/helper/HttpConnection.java,385,"* @return ""EUC-JP"", or null if not found. Charset is trimmed and uppercased."
True,src/main/java/org/jsoup/helper/HttpConnection.java,src/main/java/org/jsoup/helper/HttpConnection.java,387,private static String getCharsetFromContentType(String contentType) {
True,src/main/java/org/jsoup/helper/HttpConnection.java,src/main/java/org/jsoup/helper/HttpConnection.java,388,if (contentType == null) return null;
True,src/main/java/org/jsoup/helper/HttpConnection.java,src/main/java/org/jsoup/helper/HttpConnection.java,390,Matcher m = charsetPattern.matcher(contentType);
True,src/main/java/org/jsoup/helper/HttpConnection.java,src/main/java/org/jsoup/helper/HttpConnection.java,391,if (m.find()) {
True,src/main/java/org/jsoup/helper/HttpConnection.java,src/main/java/org/jsoup/helper/HttpConnection.java,392,return m.group(1).trim().toUpperCase();
True,src/main/java/org/jsoup/helper/HttpConnection.java,src/main/java/org/jsoup/helper/HttpConnection.java,394,return null;
False,src/test/java/org/jsoup/DataUtilTest.java,src/test/java/org/jsoup/helper/DataUtilTest.java,1,ackage org.jsoup;
True,src/test/java/org/jsoup/DataUtilTest.java,src/test/java/org/jsoup/helper/DataUtilTest.java,1,package org.jsoup.helper;
True,src/test/java/org/jsoup/DataUtilTest.java,src/test/java/org/jsoup/helper/DataUtilTest.java,3,import static org.junit.Assert.assertEquals;
False,src/test/java/org/jsoup/DataUtilTest.java,src/test/java/org/jsoup/helper/DataUtilTest.java,5,mport static org.junit.Assert.*;
False,src/test/java/org/jsoup/DataUtilTest.java,src/test/java/org/jsoup/helper/DataUtilTest.java,8,Test public void testCharset() {
True,src/test/java/org/jsoup/DataUtilTest.java,src/test/java/org/jsoup/helper/DataUtilTest.java,7,@Test
True,src/test/java/org/jsoup/DataUtilTest.java,src/test/java/org/jsoup/helper/DataUtilTest.java,8,public void testCharset() {
False,src/test/java/org/jsoup/integration/ParseTest.java,src/test/java/org/jsoup/integration/ParseTest.java,6,mport org.jsoup.nodes.Entities;
True,src/test/java/org/jsoup/integration/ParseTest.java,src/test/java/org/jsoup/integration/ParseTest.java,7,import static org.junit.Assert.*;
False,src/test/java/org/jsoup/integration/ParseTest.java,src/test/java/org/jsoup/integration/ParseTest.java,14,mport static org.junit.Assert.*;
False,src/test/java/org/jsoup/integration/ParseTest.java,src/test/java/org/jsoup/integration/ParseTest.java,18,ntegration test: parses from real-world example HTML.
False,src/test/java/org/jsoup/integration/ParseTest.java,src/test/java/org/jsoup/integration/ParseTest.java,20,"author Jonathan Hedley, jonathan@hedley.net */"
True,src/test/java/org/jsoup/integration/ParseTest.java,src/test/java/org/jsoup/integration/ParseTest.java,15,* Integration test: parses from real-world example HTML.
True,src/test/java/org/jsoup/integration/ParseTest.java,src/test/java/org/jsoup/integration/ParseTest.java,17,"* @author Jonathan Hedley, jonathan@hedley.net"
False,src/test/java/org/jsoup/integration/ParseTest.java,src/test/java/org/jsoup/integration/ParseTest.java,23,Test public void testSmhBizArticle() throws IOException {
True,src/test/java/org/jsoup/integration/ParseTest.java,src/test/java/org/jsoup/integration/ParseTest.java,21,@Test
True,src/test/java/org/jsoup/integration/ParseTest.java,src/test/java/org/jsoup/integration/ParseTest.java,22,public void testSmhBizArticle() throws IOException {
False,src/test/java/org/jsoup/integration/ParseTest.java,src/test/java/org/jsoup/integration/ParseTest.java,25,"ocument doc = Jsoup.parse(in, ""UTF-8"", ""http://www.smh.com.au/business/the-boards-next-fear-the-female-quota-20100106-lteq.html"");"
False,src/test/java/org/jsoup/integration/ParseTest.java,src/test/java/org/jsoup/integration/ParseTest.java,26,"ssertEquals(""The board’s next fear: the female quota"", doc.title()); // note that the apos in the source is a literal ’ (8217), not escaped or '"
True,src/test/java/org/jsoup/integration/ParseTest.java,src/test/java/org/jsoup/integration/ParseTest.java,24,"Document doc = Jsoup.parse(in, ""UTF-8"","
True,src/test/java/org/jsoup/integration/ParseTest.java,src/test/java/org/jsoup/integration/ParseTest.java,25,"""http://www.smh.com.au/business/the-boards-next-fear-the-female-quota-20100106-lteq.html"");"
True,src/test/java/org/jsoup/integration/ParseTest.java,src/test/java/org/jsoup/integration/ParseTest.java,26,"assertEquals(""The board’s next fear: the female quota"","
True,src/test/java/org/jsoup/integration/ParseTest.java,src/test/java/org/jsoup/integration/ParseTest.java,27,"doc.title()); // note that the apos in the source is a literal ’ (8217), not escaped or '"
False,src/test/java/org/jsoup/integration/ParseTest.java,src/test/java/org/jsoup/integration/ParseTest.java,35,Test public void testNewsHomepage() throws IOException {
True,src/test/java/org/jsoup/integration/ParseTest.java,src/test/java/org/jsoup/integration/ParseTest.java,36,@Test
True,src/test/java/org/jsoup/integration/ParseTest.java,src/test/java/org/jsoup/integration/ParseTest.java,37,public void testNewsHomepage() throws IOException {
False,src/test/java/org/jsoup/integration/ParseTest.java,src/test/java/org/jsoup/integration/ParseTest.java,46,"ssertEquals(""http://www.heraldsun.com.au/news/naughty-corners-are-a-bad-idea-for-kids/story-e6frf7jo-1225817899003"", hs.attr(""href""));"
True,src/test/java/org/jsoup/integration/ParseTest.java,src/test/java/org/jsoup/integration/ParseTest.java,48,assertEquals(
True,src/test/java/org/jsoup/integration/ParseTest.java,src/test/java/org/jsoup/integration/ParseTest.java,49,"""http://www.heraldsun.com.au/news/naughty-corners-are-a-bad-idea-for-kids/story-e6frf7jo-1225817899003"","
True,src/test/java/org/jsoup/integration/ParseTest.java,src/test/java/org/jsoup/integration/ParseTest.java,50,"hs.attr(""href""));"
False,src/test/java/org/jsoup/integration/ParseTest.java,src/test/java/org/jsoup/integration/ParseTest.java,50,Test public void testGoogleSearchIpod() throws IOException {
True,src/test/java/org/jsoup/integration/ParseTest.java,src/test/java/org/jsoup/integration/ParseTest.java,54,@Test
True,src/test/java/org/jsoup/integration/ParseTest.java,src/test/java/org/jsoup/integration/ParseTest.java,55,public void testGoogleSearchIpod() throws IOException {
False,src/test/java/org/jsoup/integration/ParseTest.java,src/test/java/org/jsoup/integration/ParseTest.java,56,"ssertEquals(""http://news.google.com/news?hl=en&q=ipod&um=1&ie=UTF-8&ei=uYlKS4SbBoGg6gPf-5XXCw&sa=X&oi=news_group&ct=title&resnum=1&ved=0CCIQsQQwAA"","
False,src/test/java/org/jsoup/integration/ParseTest.java,src/test/java/org/jsoup/integration/ParseTest.java,57,"esults.get(0).attr(""href""));"
True,src/test/java/org/jsoup/integration/ParseTest.java,src/test/java/org/jsoup/integration/ParseTest.java,61,assertEquals(
True,src/test/java/org/jsoup/integration/ParseTest.java,src/test/java/org/jsoup/integration/ParseTest.java,62,"""http://news.google.com/news?hl=en&q=ipod&um=1&ie=UTF-8&ei=uYlKS4SbBoGg6gPf-5XXCw&sa=X&oi=news_group&ct=title&resnum=1&ved=0CCIQsQQwAA"","
True,src/test/java/org/jsoup/integration/ParseTest.java,src/test/java/org/jsoup/integration/ParseTest.java,63,"results.get(0).attr(""href""));"
False,src/test/java/org/jsoup/integration/ParseTest.java,src/test/java/org/jsoup/integration/ParseTest.java,59,"esults.get(1).attr(""href""));"
True,src/test/java/org/jsoup/integration/ParseTest.java,src/test/java/org/jsoup/integration/ParseTest.java,65,"results.get(1).attr(""href""));"
False,src/test/java/org/jsoup/integration/ParseTest.java,src/test/java/org/jsoup/integration/ParseTest.java,62,Test public void testBinary() throws IOException {
True,src/test/java/org/jsoup/integration/ParseTest.java,src/test/java/org/jsoup/integration/ParseTest.java,68,@Test
True,src/test/java/org/jsoup/integration/ParseTest.java,src/test/java/org/jsoup/integration/ParseTest.java,69,public void testBinary() throws IOException {
False,src/test/java/org/jsoup/integration/ParseTest.java,src/test/java/org/jsoup/integration/ParseTest.java,69,Test public void testYahooJp() throws IOException {
True,src/test/java/org/jsoup/integration/ParseTest.java,src/test/java/org/jsoup/integration/ParseTest.java,76,@Test
True,src/test/java/org/jsoup/integration/ParseTest.java,src/test/java/org/jsoup/integration/ParseTest.java,77,public void testYahooJp() throws IOException {
False,src/test/java/org/jsoup/integration/ParseTest.java,src/test/java/org/jsoup/integration/ParseTest.java,74,"ssertEquals(""http://www.yahoo.co.jp/_ylh=X3oDMTB0NWxnaGxsBF9TAzIwNzcyOTYyNjUEdGlkAzEyBHRtcGwDZ2Ex/t/2322m2"","
False,src/test/java/org/jsoup/integration/ParseTest.java,src/test/java/org/jsoup/integration/ParseTest.java,75,".attr(""abs:href"")); // session put into <base>"
True,src/test/java/org/jsoup/integration/ParseTest.java,src/test/java/org/jsoup/integration/ParseTest.java,82,"assertEquals(""http://www.yahoo.co.jp/_ylh=X3oDMTB0NWxnaGxsBF9TAzIwNzcyOTYyNjUEdGlkAzEyBHRtcGwDZ2Ex/t/2322m2"","
True,src/test/java/org/jsoup/integration/ParseTest.java,src/test/java/org/jsoup/integration/ParseTest.java,83,"a.attr(""abs:href"")); // session put into <base>"
False,src/test/java/org/jsoup/integration/ParseTest.java,src/test/java/org/jsoup/integration/ParseTest.java,79,Test public void testBaidu() throws IOException {
True,src/test/java/org/jsoup/integration/ParseTest.java,src/test/java/org/jsoup/integration/ParseTest.java,87,@Test
True,src/test/java/org/jsoup/integration/ParseTest.java,src/test/java/org/jsoup/integration/ParseTest.java,88,public void testBaidu() throws IOException {
False,src/test/java/org/jsoup/integration/ParseTest.java,src/test/java/org/jsoup/integration/ParseTest.java,82,"ocument doc = Jsoup.parse(in, null, ""http://www.baidu.com/""); // http charset is gb2312, but NOT specifying it, to test http-equiv parse"
True,src/test/java/org/jsoup/integration/ParseTest.java,src/test/java/org/jsoup/integration/ParseTest.java,91,"Document doc = Jsoup.parse(in, null,"
True,src/test/java/org/jsoup/integration/ParseTest.java,src/test/java/org/jsoup/integration/ParseTest.java,92,"""http://www.baidu.com/""); // http charset is gb2312, but NOT specifying it, to test http-equiv parse"
False,src/test/java/org/jsoup/integration/ParseTest.java,src/test/java/org/jsoup/integration/ParseTest.java,97,"ssertEquals(""\n<title>&#30334;&#24230;&#19968;&#19979;&#65292;&#20320;&#23601;&#30693;&#36947;      </title>"", doc.select(""title"").outerHtml());"
True,src/test/java/org/jsoup/integration/ParseTest.java,src/test/java/org/jsoup/integration/ParseTest.java,107,"assertEquals(""\n<title>&#30334;&#24230;&#19968;&#19979;&#65292;&#20320;&#23601;&#30693;&#36947;      </title>"","
True,src/test/java/org/jsoup/integration/ParseTest.java,src/test/java/org/jsoup/integration/ParseTest.java,108,"doc.select(""title"").outerHtml());"
False,src/test/java/org/jsoup/integration/ParseTest.java,src/test/java/org/jsoup/integration/ParseTest.java,100,Test public void testHtml5Charset() throws IOException {
True,src/test/java/org/jsoup/integration/ParseTest.java,src/test/java/org/jsoup/integration/ParseTest.java,111,@Test
True,src/test/java/org/jsoup/integration/ParseTest.java,src/test/java/org/jsoup/integration/ParseTest.java,112,public void testHtml5Charset() throws IOException {
False,src/test/java/org/jsoup/integration/ParseTest.java,src/test/java/org/jsoup/integration/ParseTest.java,120,Test public void testNytArticle() throws IOException {
True,src/test/java/org/jsoup/integration/ParseTest.java,src/test/java/org/jsoup/integration/ParseTest.java,132,@Test
True,src/test/java/org/jsoup/integration/ParseTest.java,src/test/java/org/jsoup/integration/ParseTest.java,133,public void testNytArticle() throws IOException {
