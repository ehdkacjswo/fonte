is_addition,old_file_path,new_file_path,line_num,content
True,src/main/java/org/jsoup/Jsoup.java,src/main/java/org/jsoup/Jsoup.java,147,Test if the input HTML has only tags and attributes allowed by the Whitelist. Useful for form validation. The input HTML should
True,src/main/java/org/jsoup/Jsoup.java,src/main/java/org/jsoup/Jsoup.java,148,"still be run through the cleaner to set up enforced attributes, and to tidy the output."
True,src/main/java/org/jsoup/Jsoup.java,src/main/java/org/jsoup/Jsoup.java,149,@param bodyHtml HTML to test
True,src/main/java/org/jsoup/Jsoup.java,src/main/java/org/jsoup/Jsoup.java,150,@param whitelist whitelist to test against
True,src/main/java/org/jsoup/Jsoup.java,src/main/java/org/jsoup/Jsoup.java,151,@return true if no tags or attributes were removed; false otherwise
True,src/main/java/org/jsoup/Jsoup.java,src/main/java/org/jsoup/Jsoup.java,152,"@see #clean(String, org.jsoup.safety.Whitelist)"
True,src/main/java/org/jsoup/Jsoup.java,src/main/java/org/jsoup/Jsoup.java,154,"public static boolean isValid(String bodyHtml, Whitelist whitelist) {"
True,src/main/java/org/jsoup/Jsoup.java,src/main/java/org/jsoup/Jsoup.java,155,"Document dirty = parseBodyFragment(bodyHtml, """");"
True,src/main/java/org/jsoup/Jsoup.java,src/main/java/org/jsoup/Jsoup.java,156,Cleaner cleaner = new Cleaner(whitelist);
True,src/main/java/org/jsoup/Jsoup.java,src/main/java/org/jsoup/Jsoup.java,157,return cleaner.isValid(dirty);
False,src/main/java/org/jsoup/safety/Cleaner.java,src/main/java/org/jsoup/safety/Cleaner.java,48,"rivate void copySafeNodes(Element source, Element dest) {"
True,src/main/java/org/jsoup/safety/Cleaner.java,src/main/java/org/jsoup/safety/Cleaner.java,49,"Dertmines if the input document is valid, against the whitelist. It is considered valid if all the tags and attributes"
True,src/main/java/org/jsoup/safety/Cleaner.java,src/main/java/org/jsoup/safety/Cleaner.java,50,in the input HTML are allowed by the whitelist.
True,src/main/java/org/jsoup/safety/Cleaner.java,src/main/java/org/jsoup/safety/Cleaner.java,51,<p/>
True,src/main/java/org/jsoup/safety/Cleaner.java,src/main/java/org/jsoup/safety/Cleaner.java,52,This method can be used as a validator for user input forms. An invalid document will still be cleaned successfully
True,src/main/java/org/jsoup/safety/Cleaner.java,src/main/java/org/jsoup/safety/Cleaner.java,53,"using the {@link #clean(Document)} document. If using as a validator, it is recommended to still clean the document"
True,src/main/java/org/jsoup/safety/Cleaner.java,src/main/java/org/jsoup/safety/Cleaner.java,54,"to ensure enforced attributes are set correctly, and that the output is tidied."
True,src/main/java/org/jsoup/safety/Cleaner.java,src/main/java/org/jsoup/safety/Cleaner.java,55,@param dirtyDocument document to test
True,src/main/java/org/jsoup/safety/Cleaner.java,src/main/java/org/jsoup/safety/Cleaner.java,56,@return true if no tags or attributes need to be removed; false if they do
True,src/main/java/org/jsoup/safety/Cleaner.java,src/main/java/org/jsoup/safety/Cleaner.java,58,public boolean isValid(Document dirtyDocument) {
True,src/main/java/org/jsoup/safety/Cleaner.java,src/main/java/org/jsoup/safety/Cleaner.java,59,Validate.notNull(dirtyDocument);
True,src/main/java/org/jsoup/safety/Cleaner.java,src/main/java/org/jsoup/safety/Cleaner.java,61,Document clean = Document.createShell(dirtyDocument.baseUri());
True,src/main/java/org/jsoup/safety/Cleaner.java,src/main/java/org/jsoup/safety/Cleaner.java,62,"int numDiscarded = copySafeNodes(dirtyDocument.body(), clean.body());"
True,src/main/java/org/jsoup/safety/Cleaner.java,src/main/java/org/jsoup/safety/Cleaner.java,63,return numDiscarded == 0;
True,src/main/java/org/jsoup/safety/Cleaner.java,src/main/java/org/jsoup/safety/Cleaner.java,67,"Iterates the input and copies trusted nodes (tags, attributes, text) into the destination."
True,src/main/java/org/jsoup/safety/Cleaner.java,src/main/java/org/jsoup/safety/Cleaner.java,68,@param source source of HTML
True,src/main/java/org/jsoup/safety/Cleaner.java,src/main/java/org/jsoup/safety/Cleaner.java,69,@param dest destination element to copy into
True,src/main/java/org/jsoup/safety/Cleaner.java,src/main/java/org/jsoup/safety/Cleaner.java,70,@return number of discarded elements (that were considered unsafe)
True,src/main/java/org/jsoup/safety/Cleaner.java,src/main/java/org/jsoup/safety/Cleaner.java,72,"private int copySafeNodes(Element source, Element dest) {"
True,src/main/java/org/jsoup/safety/Cleaner.java,src/main/java/org/jsoup/safety/Cleaner.java,74,int numDiscarded = 0;
False,src/main/java/org/jsoup/safety/Cleaner.java,src/main/java/org/jsoup/safety/Cleaner.java,56,lement destChild = createSafeElement(sourceEl);
True,src/main/java/org/jsoup/safety/Cleaner.java,src/main/java/org/jsoup/safety/Cleaner.java,81,ElementMeta meta = createSafeElement(sourceEl);
True,src/main/java/org/jsoup/safety/Cleaner.java,src/main/java/org/jsoup/safety/Cleaner.java,82,Element destChild = meta.el;
False,src/main/java/org/jsoup/safety/Cleaner.java,src/main/java/org/jsoup/safety/Cleaner.java,58,"opySafeNodes(sourceEl, destChild); // recurs"
True,src/main/java/org/jsoup/safety/Cleaner.java,src/main/java/org/jsoup/safety/Cleaner.java,85,numDiscarded += meta.numAttribsDiscarded;
True,src/main/java/org/jsoup/safety/Cleaner.java,src/main/java/org/jsoup/safety/Cleaner.java,86,"numDiscarded += copySafeNodes(sourceEl, destChild); // recurs"
False,src/main/java/org/jsoup/safety/Cleaner.java,src/main/java/org/jsoup/safety/Cleaner.java,60,"opySafeNodes(sourceEl, dest);"
True,src/main/java/org/jsoup/safety/Cleaner.java,src/main/java/org/jsoup/safety/Cleaner.java,88,numDiscarded++;
True,src/main/java/org/jsoup/safety/Cleaner.java,src/main/java/org/jsoup/safety/Cleaner.java,89,"numDiscarded += copySafeNodes(sourceEl, dest);"
True,src/main/java/org/jsoup/safety/Cleaner.java,src/main/java/org/jsoup/safety/Cleaner.java,97,return numDiscarded;
False,src/main/java/org/jsoup/safety/Cleaner.java,src/main/java/org/jsoup/safety/Cleaner.java,70,rivate Element createSafeElement(Element sourceEl) {
True,src/main/java/org/jsoup/safety/Cleaner.java,src/main/java/org/jsoup/safety/Cleaner.java,100,private ElementMeta createSafeElement(Element sourceEl) {
True,src/main/java/org/jsoup/safety/Cleaner.java,src/main/java/org/jsoup/safety/Cleaner.java,104,int numDiscarded = 0;
True,src/main/java/org/jsoup/safety/Cleaner.java,src/main/java/org/jsoup/safety/Cleaner.java,110,else
True,src/main/java/org/jsoup/safety/Cleaner.java,src/main/java/org/jsoup/safety/Cleaner.java,111,numDiscarded++;
False,src/main/java/org/jsoup/safety/Cleaner.java,src/main/java/org/jsoup/safety/Cleaner.java,82,eturn dest;
True,src/main/java/org/jsoup/safety/Cleaner.java,src/main/java/org/jsoup/safety/Cleaner.java,116,"return new ElementMeta(dest, numDiscarded);"
True,src/main/java/org/jsoup/safety/Cleaner.java,src/main/java/org/jsoup/safety/Cleaner.java,119,private static class ElementMeta {
True,src/main/java/org/jsoup/safety/Cleaner.java,src/main/java/org/jsoup/safety/Cleaner.java,120,Element el;
True,src/main/java/org/jsoup/safety/Cleaner.java,src/main/java/org/jsoup/safety/Cleaner.java,121,int numAttribsDiscarded;
True,src/main/java/org/jsoup/safety/Cleaner.java,src/main/java/org/jsoup/safety/Cleaner.java,123,"ElementMeta(Element el, int numAttribsDiscarded) {"
True,src/main/java/org/jsoup/safety/Cleaner.java,src/main/java/org/jsoup/safety/Cleaner.java,124,this.el = el;
True,src/main/java/org/jsoup/safety/Cleaner.java,src/main/java/org/jsoup/safety/Cleaner.java,125,this.numAttribsDiscarded = numAttribsDiscarded;
True,src/test/java/org/jsoup/org/jsoup/safety/CleanerTest.java,src/test/java/org/jsoup/org/jsoup/safety/CleanerTest.java,90,@Test public void testIsValid() {
True,src/test/java/org/jsoup/org/jsoup/safety/CleanerTest.java,src/test/java/org/jsoup/org/jsoup/safety/CleanerTest.java,91,"String ok = ""<p>Test <b>OK</b></p>"";"
True,src/test/java/org/jsoup/org/jsoup/safety/CleanerTest.java,src/test/java/org/jsoup/org/jsoup/safety/CleanerTest.java,92,"String nok1 = ""<p><script></script>Not <b>OK</b></p>"";"
True,src/test/java/org/jsoup/org/jsoup/safety/CleanerTest.java,src/test/java/org/jsoup/org/jsoup/safety/CleanerTest.java,93,"String nok2 = ""<p align=right>Test <b>OK</b></p>"";"
True,src/test/java/org/jsoup/org/jsoup/safety/CleanerTest.java,src/test/java/org/jsoup/org/jsoup/safety/CleanerTest.java,94,"assertTrue(Jsoup.isValid(ok, Whitelist.basic()));"
True,src/test/java/org/jsoup/org/jsoup/safety/CleanerTest.java,src/test/java/org/jsoup/org/jsoup/safety/CleanerTest.java,95,"assertFalse(Jsoup.isValid(nok1, Whitelist.basic()));"
True,src/test/java/org/jsoup/org/jsoup/safety/CleanerTest.java,src/test/java/org/jsoup/org/jsoup/safety/CleanerTest.java,96,"assertFalse(Jsoup.isValid(nok2, Whitelist.basic()));"
